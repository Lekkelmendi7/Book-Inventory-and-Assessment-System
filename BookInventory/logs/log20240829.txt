2024-08-29 08:51:00.488 +02:00 [INF] User profile is available. Using 'C:\Users\lkelmendi.PC-PR05\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-29 08:51:01.647 +02:00 [INF] Now listening on: https://localhost:7126
2024-08-29 08:51:01.649 +02:00 [INF] Now listening on: http://localhost:5019
2024-08-29 08:51:01.660 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-29 08:51:01.661 +02:00 [INF] Hosting environment: Development
2024-08-29 08:51:01.662 +02:00 [INF] Content root path: C:\Users\lkelmendi.PC-PR05\Desktop\BookInventory\BookInventory
2024-08-29 08:51:04.960 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/swagger/index.html - null null
2024-08-29 08:51:05.469 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/swagger/index.html - 200 null text/html;charset=utf-8 521.4051ms
2024-08-29 08:51:05.480 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/_vs/browserLink - null null
2024-08-29 08:51:05.480 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/swagger/index.js - null null
2024-08-29 08:51:05.480 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/_framework/aspnetcore-browser-refresh.js - null null
2024-08-29 08:51:05.520 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/swagger/index.js - 200 null application/javascript;charset=utf-8 39.5251ms
2024-08-29 08:51:05.534 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 54.0008ms
2024-08-29 08:51:05.647 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/_vs/browserLink - 200 null text/javascript; charset=UTF-8 166.3912ms
2024-08-29 08:51:05.790 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/swagger/v1/swagger.json - null null
2024-08-29 08:51:06.031 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 240.829ms
2024-08-29 08:51:34.360 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7126/api/Auths/login - application/json-patch+json 61
2024-08-29 08:51:34.505 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory)'
2024-08-29 08:51:34.538 +02:00 [INF] Route matched with {action = "Login", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BookInventory.DataAccessLayer.Entities.ServiceResponse`1[System.Int32]]] Login(BookInventory.BusinessLogicAcessLayer.Models.AccountModels.UserLoginModel) on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 08:51:37.126 +02:00 [INF] Executed DbCommand (152ms) [Parameters=[@__ToLower_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[PasswordHash], [t].[PasswordResetToken], [t].[PasswordSalt], [t].[ResetTokenExpires], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username]
    FROM [Users] AS [u]
    WHERE LOWER([u].[Username]) = @__ToLower_0
) AS [t]
LEFT JOIN (
    SELECT [r].[UserId], [r].[RoleId], [r0].[Id], [r0].[Name]
    FROM [RoleUsers] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2024-08-29 08:51:37.347 +02:00 [INF] Executed DbCommand (45ms) [Parameters=[@__roleIds_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoleId], [r].[PermissionId], [p].[Id], [p].[Name]
FROM [RolePermissions] AS [r]
INNER JOIN [Permissions] AS [p] ON [r].[PermissionId] = [p].[Id]
WHERE [r].[RoleId] IN (
    SELECT [r0].[value]
    FROM OPENJSON(@__roleIds_0) WITH ([value] int '$') AS [r0]
)
2024-08-29 08:51:37.408 +02:00 [INF] Executing OkObjectResult, writing value of type 'BookInventory.DataAccessLayer.Entities.ServiceResponse`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-29 08:51:37.452 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory) in 2906.1483ms
2024-08-29 08:51:37.454 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory)'
2024-08-29 08:51:37.463 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7126/api/Auths/login - 200 290 application/json; charset=utf-8 3135.7148ms
2024-08-29 08:52:37.155 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/api/Books/getAllBooks - null null
2024-08-29 08:52:37.254 +02:00 [INF] Authorization failed. These requirements were not met:
ClaimsAuthorizationRequirement:Claim.Type=permissions and Claim.Value is one of the following values: (Book_Read)
2024-08-29 08:52:37.260 +02:00 [INF] AuthenticationScheme: Bearer was forbidden.
2024-08-29 08:52:37.261 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/api/Books/getAllBooks - 403 0 null 106.8542ms
2024-08-29 08:59:13.083 +02:00 [INF] User profile is available. Using 'C:\Users\lkelmendi.PC-PR05\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-29 08:59:13.550 +02:00 [INF] Now listening on: https://localhost:7126
2024-08-29 08:59:13.552 +02:00 [INF] Now listening on: http://localhost:5019
2024-08-29 08:59:13.554 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-29 08:59:13.555 +02:00 [INF] Hosting environment: Development
2024-08-29 08:59:13.556 +02:00 [INF] Content root path: C:\Users\lkelmendi.PC-PR05\Desktop\BookInventory\BookInventory
2024-08-29 08:59:14.063 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/swagger/index.html - null null
2024-08-29 08:59:14.422 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/swagger/index.html - 200 null text/html;charset=utf-8 370.0649ms
2024-08-29 08:59:14.508 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/swagger/index.js - null null
2024-08-29 08:59:14.508 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/_framework/aspnetcore-browser-refresh.js - null null
2024-08-29 08:59:14.508 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/_vs/browserLink - null null
2024-08-29 08:59:14.525 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/swagger/index.js - 200 null application/javascript;charset=utf-8 17.9728ms
2024-08-29 08:59:14.535 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 26.9983ms
2024-08-29 08:59:14.612 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/_vs/browserLink - 200 null text/javascript; charset=UTF-8 103.4779ms
2024-08-29 08:59:14.674 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/swagger/v1/swagger.json - null null
2024-08-29 08:59:14.869 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 194.7613ms
2024-08-29 08:59:29.906 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7126/api/Auths/login - application/json-patch+json 61
2024-08-29 08:59:30.027 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory)'
2024-08-29 08:59:30.065 +02:00 [INF] Route matched with {action = "Login", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BookInventory.DataAccessLayer.Entities.ServiceResponse`1[System.Int32]]] Login(BookInventory.BusinessLogicAcessLayer.Models.AccountModels.UserLoginModel) on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 08:59:32.739 +02:00 [INF] Executed DbCommand (131ms) [Parameters=[@__ToLower_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[PasswordHash], [t].[PasswordResetToken], [t].[PasswordSalt], [t].[ResetTokenExpires], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username]
    FROM [Users] AS [u]
    WHERE LOWER([u].[Username]) = @__ToLower_0
) AS [t]
LEFT JOIN (
    SELECT [r].[UserId], [r].[RoleId], [r0].[Id], [r0].[Name]
    FROM [RoleUsers] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2024-08-29 08:59:32.959 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@__roleIds_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoleId], [r].[PermissionId], [p].[Id], [p].[Name]
FROM [RolePermissions] AS [r]
INNER JOIN [Permissions] AS [p] ON [r].[PermissionId] = [p].[Id]
WHERE [r].[RoleId] IN (
    SELECT [r0].[value]
    FROM OPENJSON(@__roleIds_0) WITH ([value] int '$') AS [r0]
)
2024-08-29 08:59:33.021 +02:00 [INF] Executing OkObjectResult, writing value of type 'BookInventory.DataAccessLayer.Entities.ServiceResponse`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-29 08:59:33.067 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory) in 2995.0276ms
2024-08-29 08:59:33.070 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory)'
2024-08-29 08:59:33.087 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7126/api/Auths/login - 200 290 application/json; charset=utf-8 3182.707ms
2024-08-29 09:01:39.620 +02:00 [INF] User profile is available. Using 'C:\Users\lkelmendi.PC-PR05\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-29 09:01:39.911 +02:00 [INF] Now listening on: https://localhost:7126
2024-08-29 09:01:39.913 +02:00 [INF] Now listening on: http://localhost:5019
2024-08-29 09:01:39.915 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-29 09:01:39.918 +02:00 [INF] Hosting environment: Development
2024-08-29 09:01:39.919 +02:00 [INF] Content root path: C:\Users\lkelmendi.PC-PR05\Desktop\BookInventory\BookInventory
2024-08-29 09:01:40.664 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/swagger/index.html - null null
2024-08-29 09:01:41.013 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/swagger/index.html - 200 null text/html;charset=utf-8 354.5411ms
2024-08-29 09:01:41.047 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/_vs/browserLink - null null
2024-08-29 09:01:41.047 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/_framework/aspnetcore-browser-refresh.js - null null
2024-08-29 09:01:41.047 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/swagger/index.js - null null
2024-08-29 09:01:41.072 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/swagger/index.js - 200 null application/javascript;charset=utf-8 25.3873ms
2024-08-29 09:01:41.077 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 30.4814ms
2024-08-29 09:01:41.109 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/_vs/browserLink - 200 null text/javascript; charset=UTF-8 62.2704ms
2024-08-29 09:01:41.203 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/swagger/v1/swagger.json - null null
2024-08-29 09:01:41.430 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 227.0542ms
2024-08-29 09:01:59.743 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7126/api/Auths/login - application/json-patch+json 61
2024-08-29 09:01:59.875 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory)'
2024-08-29 09:01:59.910 +02:00 [INF] Route matched with {action = "Login", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BookInventory.DataAccessLayer.Entities.ServiceResponse`1[System.Int32]]] Login(BookInventory.BusinessLogicAcessLayer.Models.AccountModels.UserLoginModel) on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 09:02:02.067 +02:00 [INF] Executed DbCommand (72ms) [Parameters=[@__ToLower_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[PasswordHash], [t].[PasswordResetToken], [t].[PasswordSalt], [t].[ResetTokenExpires], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username]
    FROM [Users] AS [u]
    WHERE LOWER([u].[Username]) = @__ToLower_0
) AS [t]
LEFT JOIN (
    SELECT [r].[UserId], [r].[RoleId], [r0].[Id], [r0].[Name]
    FROM [RoleUsers] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2024-08-29 09:02:02.254 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__roleIds_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoleId], [r].[PermissionId], [p].[Id], [p].[Name]
FROM [RolePermissions] AS [r]
INNER JOIN [Permissions] AS [p] ON [r].[PermissionId] = [p].[Id]
WHERE [r].[RoleId] IN (
    SELECT [r0].[value]
    FROM OPENJSON(@__roleIds_0) WITH ([value] int '$') AS [r0]
)
2024-08-29 09:02:02.295 +02:00 [INF] Executing OkObjectResult, writing value of type 'BookInventory.DataAccessLayer.Entities.ServiceResponse`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-29 09:02:02.327 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory) in 2410.7507ms
2024-08-29 09:02:02.329 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory)'
2024-08-29 09:02:02.339 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7126/api/Auths/login - 200 290 application/json; charset=utf-8 2603.2914ms
2024-08-29 09:02:38.357 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/api/Authors/getAllAuthors - null null
2024-08-29 09:02:38.429 +02:00 [INF] Authorization failed. These requirements were not met:
ClaimsAuthorizationRequirement:Claim.Type=permissions and Claim.Value is one of the following values: (Author_Read)
2024-08-29 09:02:38.435 +02:00 [INF] AuthenticationScheme: Bearer was forbidden.
2024-08-29 09:02:38.436 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/api/Authors/getAllAuthors - 403 0 null 79.224ms
2024-08-29 09:03:46.454 +02:00 [INF] User profile is available. Using 'C:\Users\lkelmendi.PC-PR05\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-29 09:03:46.772 +02:00 [INF] Now listening on: https://localhost:7126
2024-08-29 09:03:46.773 +02:00 [INF] Now listening on: http://localhost:5019
2024-08-29 09:03:46.776 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-29 09:03:46.777 +02:00 [INF] Hosting environment: Development
2024-08-29 09:03:46.778 +02:00 [INF] Content root path: C:\Users\lkelmendi.PC-PR05\Desktop\BookInventory\BookInventory
2024-08-29 09:03:47.578 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/swagger/index.html - null null
2024-08-29 09:03:47.891 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/swagger/index.html - 200 null text/html;charset=utf-8 316.1956ms
2024-08-29 09:03:47.928 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/_framework/aspnetcore-browser-refresh.js - null null
2024-08-29 09:03:47.928 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/swagger/index.js - null null
2024-08-29 09:03:47.928 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/_vs/browserLink - null null
2024-08-29 09:03:47.936 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/swagger/index.js - 200 null application/javascript;charset=utf-8 8.8575ms
2024-08-29 09:03:47.985 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 56.8504ms
2024-08-29 09:03:48.035 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/_vs/browserLink - 200 null text/javascript; charset=UTF-8 107.265ms
2024-08-29 09:03:48.128 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/swagger/v1/swagger.json - null null
2024-08-29 09:03:48.341 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 213.101ms
2024-08-29 09:03:52.581 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/api/Auths/users - null null
2024-08-29 09:03:52.682 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.GetUsers (BookInventory)'
2024-08-29 09:03:52.706 +02:00 [INF] Route matched with {action = "GetUsers", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsers() on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 09:03:54.715 +02:00 [INF] Executed DbCommand (52ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username], [t].[UserId], [t].[RoleId], [t].[Id], [t].[Name]
FROM [Users] AS [u]
LEFT JOIN (
    SELECT [r].[UserId], [r].[RoleId], [r0].[Id], [r0].[Name]
    FROM [RoleUsers] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
) AS [t] ON [u].[Id] = [t].[UserId]
ORDER BY [u].[Id], [t].[UserId], [t].[RoleId]
2024-08-29 09:03:54.864 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookInventory.BusinessLogicAcessLayer.Models.AccountModels.UserGetModel, BookInventory, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 09:03:54.975 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.GetUsers (BookInventory) in 2263.899ms
2024-08-29 09:03:54.977 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.GetUsers (BookInventory)'
2024-08-29 09:03:54.997 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/api/Auths/users - 200 48 application/json; charset=utf-8 2416.4174ms
2024-08-29 09:04:41.008 +02:00 [INF] User profile is available. Using 'C:\Users\lkelmendi.PC-PR05\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-29 09:04:41.303 +02:00 [INF] Now listening on: https://localhost:7126
2024-08-29 09:04:41.304 +02:00 [INF] Now listening on: http://localhost:5019
2024-08-29 09:04:41.306 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-29 09:04:41.307 +02:00 [INF] Hosting environment: Development
2024-08-29 09:04:41.307 +02:00 [INF] Content root path: C:\Users\lkelmendi.PC-PR05\Desktop\BookInventory\BookInventory
2024-08-29 09:04:42.435 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/swagger/index.html - null null
2024-08-29 09:04:42.954 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/swagger/index.html - 200 null text/html;charset=utf-8 525.718ms
2024-08-29 09:04:42.974 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/_framework/aspnetcore-browser-refresh.js - null null
2024-08-29 09:04:42.982 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/swagger/index.js - null null
2024-08-29 09:04:42.982 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/_vs/browserLink - null null
2024-08-29 09:04:42.994 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/swagger/index.js - 200 null application/javascript;charset=utf-8 12.2634ms
2024-08-29 09:04:43.002 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 27.7847ms
2024-08-29 09:04:43.056 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/_vs/browserLink - 200 null text/javascript; charset=UTF-8 74.3519ms
2024-08-29 09:04:43.124 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/swagger/v1/swagger.json - null null
2024-08-29 09:04:43.336 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 211.4882ms
2024-08-29 09:04:48.035 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/api/Permissions/all - null null
2024-08-29 09:04:48.152 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.PermissionsController.GetPermissions (BookInventory)'
2024-08-29 09:04:48.169 +02:00 [INF] Route matched with {action = "GetPermissions", controller = "Permissions"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPermissions() on controller BookInventory.APIAccessLayer.Controllers.PermissionsController (BookInventory).
2024-08-29 09:04:50.068 +02:00 [INF] Executed DbCommand (64ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Name], [t].[RoleId], [t].[PermissionId], [t].[Id], [t].[Name]
FROM [Permissions] AS [p]
LEFT JOIN (
    SELECT [r].[RoleId], [r].[PermissionId], [r0].[Id], [r0].[Name]
    FROM [RolePermissions] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
) AS [t] ON [p].[Id] = [t].[PermissionId]
ORDER BY [p].[Id], [t].[RoleId], [t].[PermissionId]
2024-08-29 09:04:50.238 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookInventory.BusinessLogicAcessLayer.Models.PermissionModels.PermissionGetModel, BookInventory, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 09:04:50.349 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.PermissionsController.GetPermissions (BookInventory) in 2174.8176ms
2024-08-29 09:04:50.353 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.PermissionsController.GetPermissions (BookInventory)'
2024-08-29 09:04:50.364 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/api/Permissions/all - 200 2328 application/json; charset=utf-8 2329.3243ms
2024-08-29 09:05:17.419 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/api/Roles/all - null null
2024-08-29 09:05:17.427 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.GetAll (BookInventory)'
2024-08-29 09:05:17.434 +02:00 [INF] Route matched with {action = "GetAll", controller = "Roles"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller BookInventory.APIAccessLayer.Controllers.RolesController (BookInventory).
2024-08-29 09:05:17.485 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Name], [t].[RoleId], [t].[PermissionId], [t].[Id], [t].[Name]
FROM [Roles] AS [r]
LEFT JOIN (
    SELECT [r0].[RoleId], [r0].[PermissionId], [p].[Id], [p].[Name]
    FROM [RolePermissions] AS [r0]
    INNER JOIN [Permissions] AS [p] ON [r0].[PermissionId] = [p].[Id]
) AS [t] ON [r].[Id] = [t].[RoleId]
ORDER BY [r].[Id], [t].[RoleId], [t].[PermissionId]
2024-08-29 09:05:17.504 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookInventory.BusinessLogicAcessLayer.Models.RoleModel.RoleGetModel, BookInventory, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 09:05:17.506 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.RolesController.GetAll (BookInventory) in 69.4361ms
2024-08-29 09:05:17.510 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.GetAll (BookInventory)'
2024-08-29 09:05:17.513 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/api/Roles/all - 200 1178 application/json; charset=utf-8 94.167ms
2024-08-29 09:06:09.381 +02:00 [INF] User profile is available. Using 'C:\Users\lkelmendi.PC-PR05\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-29 09:06:09.785 +02:00 [INF] Now listening on: https://localhost:7126
2024-08-29 09:06:09.786 +02:00 [INF] Now listening on: http://localhost:5019
2024-08-29 09:06:09.789 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-29 09:06:09.790 +02:00 [INF] Hosting environment: Development
2024-08-29 09:06:09.791 +02:00 [INF] Content root path: C:\Users\lkelmendi.PC-PR05\Desktop\BookInventory\BookInventory
2024-08-29 09:06:10.385 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/swagger/index.html - null null
2024-08-29 09:06:10.723 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/swagger/index.html - 200 null text/html;charset=utf-8 347.3021ms
2024-08-29 09:06:10.758 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/swagger/index.js - null null
2024-08-29 09:06:10.758 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/_framework/aspnetcore-browser-refresh.js - null null
2024-08-29 09:06:10.758 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/_vs/browserLink - null null
2024-08-29 09:06:10.763 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/swagger/index.js - 200 null application/javascript;charset=utf-8 4.7182ms
2024-08-29 09:06:10.778 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 19.7107ms
2024-08-29 09:06:10.824 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/_vs/browserLink - 200 null text/javascript; charset=UTF-8 66.2552ms
2024-08-29 09:06:10.885 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/swagger/v1/swagger.json - null null
2024-08-29 09:06:11.104 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 219.2741ms
2024-08-29 09:06:24.962 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7126/api/Auths/1 - application/json-patch+json 60
2024-08-29 09:06:25.062 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.UpdateUser (BookInventory)'
2024-08-29 09:06:25.087 +02:00 [INF] Route matched with {action = "UpdateUser", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateUser(BookInventory.BusinessLogicAcessLayer.Models.AccountModels.UserUpdateModel, Int32) on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 09:06:27.063 +02:00 [INF] Executed DbCommand (63ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[PasswordHash], [t].[PasswordResetToken], [t].[PasswordSalt], [t].[ResetTokenExpires], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [r].[UserId], [r].[RoleId], [r0].[Id], [r0].[Name]
    FROM [RoleUsers] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2024-08-29 09:06:27.199 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[PasswordHash], [t].[PasswordResetToken], [t].[PasswordSalt], [t].[ResetTokenExpires], [t].[Username], [r].[UserId], [r].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[Id] = @__id_0
) AS [t]
LEFT JOIN [RoleUsers] AS [r] ON [t].[Id] = [r].[UserId]
ORDER BY [t].[Id], [r].[UserId]
2024-08-29 09:06:27.353 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RoleUsers] ([RoleId], [UserId])
VALUES (@p0, @p1);
2024-08-29 09:06:27.369 +02:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2024-08-29 09:06:27.374 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.UpdateUser (BookInventory) in 2281.9678ms
2024-08-29 09:06:27.378 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.UpdateUser (BookInventory)'
2024-08-29 09:06:27.387 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7126/api/Auths/1 - 204 null null 2424.5304ms
2024-08-29 09:06:39.083 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/api/Auths/users - null null
2024-08-29 09:06:39.091 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.GetUsers (BookInventory)'
2024-08-29 09:06:39.102 +02:00 [INF] Route matched with {action = "GetUsers", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsers() on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 09:06:39.164 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username], [t].[UserId], [t].[RoleId], [t].[Id], [t].[Name]
FROM [Users] AS [u]
LEFT JOIN (
    SELECT [r].[UserId], [r].[RoleId], [r0].[Id], [r0].[Name]
    FROM [RoleUsers] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
) AS [t] ON [u].[Id] = [t].[UserId]
ORDER BY [u].[Id], [t].[UserId], [t].[RoleId]
2024-08-29 09:06:39.204 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookInventory.BusinessLogicAcessLayer.Models.AccountModels.UserGetModel, BookInventory, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 09:06:39.279 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.GetUsers (BookInventory) in 173.8976ms
2024-08-29 09:06:39.288 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.GetUsers (BookInventory)'
2024-08-29 09:06:39.294 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/api/Auths/users - 200 103 application/json; charset=utf-8 210.8477ms
2024-08-29 09:06:52.864 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7126/api/Auths/login - application/json-patch+json 61
2024-08-29 09:06:52.870 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory)'
2024-08-29 09:06:52.881 +02:00 [INF] Route matched with {action = "Login", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BookInventory.DataAccessLayer.Entities.ServiceResponse`1[System.Int32]]] Login(BookInventory.BusinessLogicAcessLayer.Models.AccountModels.UserLoginModel) on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 09:06:52.995 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__ToLower_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[PasswordHash], [t].[PasswordResetToken], [t].[PasswordSalt], [t].[ResetTokenExpires], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username]
    FROM [Users] AS [u]
    WHERE LOWER([u].[Username]) = @__ToLower_0
) AS [t]
LEFT JOIN (
    SELECT [r].[UserId], [r].[RoleId], [r0].[Id], [r0].[Name]
    FROM [RoleUsers] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2024-08-29 09:06:53.084 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__roleIds_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoleId], [r].[PermissionId], [p].[Id], [p].[Name]
FROM [RolePermissions] AS [r]
INNER JOIN [Permissions] AS [p] ON [r].[PermissionId] = [p].[Id]
WHERE [r].[RoleId] IN (
    SELECT [r0].[value]
    FROM OPENJSON(@__roleIds_0) WITH ([value] int '$') AS [r0]
)
2024-08-29 09:06:53.142 +02:00 [INF] Executing OkObjectResult, writing value of type 'BookInventory.DataAccessLayer.Entities.ServiceResponse`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-29 09:06:53.148 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory) in 262.6835ms
2024-08-29 09:06:53.151 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory)'
2024-08-29 09:06:53.152 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7126/api/Auths/login - 200 345 application/json; charset=utf-8 288.1563ms
2024-08-29 09:07:06.572 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/api/Books/getAllBooks - null null
2024-08-29 09:07:06.668 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.BooksController.GetAllBooks (BookInventory)'
2024-08-29 09:07:06.672 +02:00 [INF] Route matched with {action = "GetAllBooks", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllBooks() on controller BookInventory.APIAccessLayer.Controllers.BooksController (BookInventory).
2024-08-29 09:07:06.678 +02:00 [INF] API call to get all books started.
2024-08-29 09:07:06.680 +02:00 [INF] Fetching all books from the database.
2024-08-29 09:07:06.702 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[AuthorId], [b].[Edition], [b].[Format], [b].[Genres], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublicationYear], [b].[Stock], [b].[Title], [a].[Id], [a].[DateOfBirth], [a].[EmailAddress], [a].[ImageUrl], [a].[Name], [a].[Nationality]
FROM [Books] AS [b]
INNER JOIN [Authors] AS [a] ON [b].[AuthorId] = [a].[Id]
2024-08-29 09:07:06.749 +02:00 [INF] Exiting GetAllBooks method with 2 books fetched.
2024-08-29 09:07:06.751 +02:00 [INF] API call to get all books completed successfully with 2 books returned.
2024-08-29 09:07:06.752 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookInventory.LogicAcessLayer.Models.BookModels.BookGetModel, BookInventory, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 09:07:06.765 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.BooksController.GetAllBooks (BookInventory) in 88.7874ms
2024-08-29 09:07:06.767 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.BooksController.GetAllBooks (BookInventory)'
2024-08-29 09:07:06.768 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/api/Books/getAllBooks - 200 685 application/json; charset=utf-8 196.5766ms
2024-08-29 09:08:30.799 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/api/Permissions/all - null null
2024-08-29 09:08:30.812 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.PermissionsController.GetPermissions (BookInventory)'
2024-08-29 09:08:30.816 +02:00 [INF] Route matched with {action = "GetPermissions", controller = "Permissions"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPermissions() on controller BookInventory.APIAccessLayer.Controllers.PermissionsController (BookInventory).
2024-08-29 09:08:30.841 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Name], [t].[RoleId], [t].[PermissionId], [t].[Id], [t].[Name]
FROM [Permissions] AS [p]
LEFT JOIN (
    SELECT [r].[RoleId], [r].[PermissionId], [r0].[Id], [r0].[Name]
    FROM [RolePermissions] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
) AS [t] ON [p].[Id] = [t].[PermissionId]
ORDER BY [p].[Id], [t].[RoleId], [t].[PermissionId]
2024-08-29 09:08:30.850 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookInventory.BusinessLogicAcessLayer.Models.PermissionModels.PermissionGetModel, BookInventory, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 09:08:30.853 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.PermissionsController.GetPermissions (BookInventory) in 34.0283ms
2024-08-29 09:08:30.854 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.PermissionsController.GetPermissions (BookInventory)'
2024-08-29 09:08:30.856 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/api/Permissions/all - 200 2328 application/json; charset=utf-8 58.6249ms
2024-08-29 09:09:27.982 +02:00 [INF] User profile is available. Using 'C:\Users\lkelmendi.PC-PR05\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-29 09:09:28.317 +02:00 [INF] Now listening on: https://localhost:7126
2024-08-29 09:09:28.318 +02:00 [INF] Now listening on: http://localhost:5019
2024-08-29 09:09:28.322 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-29 09:09:28.323 +02:00 [INF] Hosting environment: Development
2024-08-29 09:09:28.324 +02:00 [INF] Content root path: C:\Users\lkelmendi.PC-PR05\Desktop\BookInventory\BookInventory
2024-08-29 09:09:28.688 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/swagger/index.html - null null
2024-08-29 09:09:29.030 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/swagger/index.html - 200 null text/html;charset=utf-8 348.1021ms
2024-08-29 09:09:29.066 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/_framework/aspnetcore-browser-refresh.js - null null
2024-08-29 09:09:29.066 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/swagger/index.js - null null
2024-08-29 09:09:29.066 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/_vs/browserLink - null null
2024-08-29 09:09:29.074 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/swagger/index.js - 200 null application/javascript;charset=utf-8 8.4864ms
2024-08-29 09:09:29.090 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 24.1908ms
2024-08-29 09:09:29.141 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/_vs/browserLink - 200 null text/javascript; charset=UTF-8 75.07ms
2024-08-29 09:09:29.201 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/swagger/v1/swagger.json - null null
2024-08-29 09:09:29.419 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 217.7838ms
2024-08-29 09:10:09.642 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/api/Publishers/getAllPublishers - null null
2024-08-29 09:10:09.749 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
ClaimsAuthorizationRequirement:Claim.Type=permissions and Claim.Value is one of the following values: (Publisher_Read)
2024-08-29 09:10:09.764 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-08-29 09:10:09.765 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/api/Publishers/getAllPublishers - 401 0 null 122.6476ms
2024-08-29 09:10:20.112 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/api/Publishers/getAllPublishers - null null
2024-08-29 09:10:20.129 +02:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
ClaimsAuthorizationRequirement:Claim.Type=permissions and Claim.Value is one of the following values: (Publisher_Read)
2024-08-29 09:10:20.133 +02:00 [INF] AuthenticationScheme: Bearer was challenged.
2024-08-29 09:10:20.135 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/api/Publishers/getAllPublishers - 401 0 null 22.5977ms
2024-08-29 09:10:25.463 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/api/Permissions/all - null null
2024-08-29 09:10:25.475 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.PermissionsController.GetPermissions (BookInventory)'
2024-08-29 09:10:25.508 +02:00 [INF] Route matched with {action = "GetPermissions", controller = "Permissions"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPermissions() on controller BookInventory.APIAccessLayer.Controllers.PermissionsController (BookInventory).
2024-08-29 09:10:27.650 +02:00 [INF] Executed DbCommand (48ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Name], [t].[RoleId], [t].[PermissionId], [t].[Id], [t].[Name]
FROM [Permissions] AS [p]
LEFT JOIN (
    SELECT [r].[RoleId], [r].[PermissionId], [r0].[Id], [r0].[Name]
    FROM [RolePermissions] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
) AS [t] ON [p].[Id] = [t].[PermissionId]
ORDER BY [p].[Id], [t].[RoleId], [t].[PermissionId]
2024-08-29 09:10:27.815 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookInventory.BusinessLogicAcessLayer.Models.PermissionModels.PermissionGetModel, BookInventory, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 09:10:27.983 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.PermissionsController.GetPermissions (BookInventory) in 2466.4311ms
2024-08-29 09:10:27.989 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.PermissionsController.GetPermissions (BookInventory)'
2024-08-29 09:10:27.999 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/api/Permissions/all - 200 2328 application/json; charset=utf-8 2535.4325ms
2024-08-29 09:10:38.498 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7126/api/Roles/1 - application/json-patch+json 138
2024-08-29 09:10:38.501 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.Updaterole (BookInventory)'
2024-08-29 09:10:38.518 +02:00 [INF] Route matched with {action = "Updaterole", controller = "Roles"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Updaterole(Int32, BookInventory.BusinessLogicAcessLayer.Models.RoleModel.RoleUpdateModel) on controller BookInventory.APIAccessLayer.Controllers.RolesController (BookInventory).
2024-08-29 09:10:38.691 +02:00 [INF] Executed DbCommand (34ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Name], [r0].[RoleId], [r0].[PermissionId]
FROM (
    SELECT TOP(1) [r].[Id], [r].[Name]
    FROM [Roles] AS [r]
    WHERE [r].[Id] = @__id_0
) AS [t]
LEFT JOIN [RolePermissions] AS [r0] ON [t].[Id] = [r0].[RoleId]
ORDER BY [t].[Id], [r0].[RoleId]
2024-08-29 09:10:38.841 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Roles] SET [Name] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2024-08-29 09:10:38.860 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-08-29 09:10:38.862 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.RolesController.Updaterole (BookInventory) in 336.3719ms
2024-08-29 09:10:38.863 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.Updaterole (BookInventory)'
2024-08-29 09:10:38.865 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7126/api/Roles/1 - 200 null text/plain; charset=utf-8 366.9179ms
2024-08-29 09:11:41.597 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7126/api/Auths/login - application/json-patch+json 61
2024-08-29 09:11:41.610 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory)'
2024-08-29 09:11:41.616 +02:00 [INF] Route matched with {action = "Login", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BookInventory.DataAccessLayer.Entities.ServiceResponse`1[System.Int32]]] Login(BookInventory.BusinessLogicAcessLayer.Models.AccountModels.UserLoginModel) on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 09:11:41.741 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__ToLower_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[PasswordHash], [t].[PasswordResetToken], [t].[PasswordSalt], [t].[ResetTokenExpires], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username]
    FROM [Users] AS [u]
    WHERE LOWER([u].[Username]) = @__ToLower_0
) AS [t]
LEFT JOIN (
    SELECT [r].[UserId], [r].[RoleId], [r0].[Id], [r0].[Name]
    FROM [RoleUsers] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2024-08-29 09:11:41.840 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__roleIds_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoleId], [r].[PermissionId], [p].[Id], [p].[Name]
FROM [RolePermissions] AS [r]
INNER JOIN [Permissions] AS [p] ON [r].[PermissionId] = [p].[Id]
WHERE [r].[RoleId] IN (
    SELECT [r0].[value]
    FROM OPENJSON(@__roleIds_0) WITH ([value] int '$') AS [r0]
)
2024-08-29 09:11:41.875 +02:00 [INF] Executing OkObjectResult, writing value of type 'BookInventory.DataAccessLayer.Entities.ServiceResponse`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-29 09:11:41.878 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory) in 257.6032ms
2024-08-29 09:11:41.880 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory)'
2024-08-29 09:11:41.881 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7126/api/Auths/login - 200 345 application/json; charset=utf-8 284.3146ms
2024-08-29 09:12:04.728 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/api/Books/getAllBooks - null null
2024-08-29 09:12:04.790 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.BooksController.GetAllBooks (BookInventory)'
2024-08-29 09:12:04.794 +02:00 [INF] Route matched with {action = "GetAllBooks", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllBooks() on controller BookInventory.APIAccessLayer.Controllers.BooksController (BookInventory).
2024-08-29 09:12:04.797 +02:00 [INF] API call to get all books started.
2024-08-29 09:12:04.799 +02:00 [INF] Fetching all books from the database.
2024-08-29 09:12:04.814 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[AuthorId], [b].[Edition], [b].[Format], [b].[Genres], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublicationYear], [b].[Stock], [b].[Title], [a].[Id], [a].[DateOfBirth], [a].[EmailAddress], [a].[ImageUrl], [a].[Name], [a].[Nationality]
FROM [Books] AS [b]
INNER JOIN [Authors] AS [a] ON [b].[AuthorId] = [a].[Id]
2024-08-29 09:12:04.870 +02:00 [INF] Exiting GetAllBooks method with 2 books fetched.
2024-08-29 09:12:04.873 +02:00 [INF] API call to get all books completed successfully with 2 books returned.
2024-08-29 09:12:04.874 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookInventory.LogicAcessLayer.Models.BookModels.BookGetModel, BookInventory, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 09:12:04.885 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.BooksController.GetAllBooks (BookInventory) in 89.0936ms
2024-08-29 09:12:04.887 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.BooksController.GetAllBooks (BookInventory)'
2024-08-29 09:12:04.889 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/api/Books/getAllBooks - 200 685 application/json; charset=utf-8 160.8214ms
2024-08-29 09:12:12.272 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/api/Roles/1 - null null
2024-08-29 09:12:12.289 +02:00 [INF] Authorization failed. These requirements were not met:
ClaimsAuthorizationRequirement:Claim.Type=permissions and Claim.Value is one of the following values: (Role_Read)
2024-08-29 09:12:12.294 +02:00 [INF] AuthenticationScheme: Bearer was forbidden.
2024-08-29 09:12:12.298 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/api/Roles/1 - 403 0 null 26.3278ms
2024-08-29 09:12:20.563 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/api/Roles/all - null null
2024-08-29 09:12:20.573 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.GetAll (BookInventory)'
2024-08-29 09:12:20.578 +02:00 [INF] Route matched with {action = "GetAll", controller = "Roles"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller BookInventory.APIAccessLayer.Controllers.RolesController (BookInventory).
2024-08-29 09:12:20.604 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Name], [t].[RoleId], [t].[PermissionId], [t].[Id], [t].[Name]
FROM [Roles] AS [r]
LEFT JOIN (
    SELECT [r0].[RoleId], [r0].[PermissionId], [p].[Id], [p].[Name]
    FROM [RolePermissions] AS [r0]
    INNER JOIN [Permissions] AS [p] ON [r0].[PermissionId] = [p].[Id]
) AS [t] ON [r].[Id] = [t].[RoleId]
ORDER BY [r].[Id], [t].[RoleId], [t].[PermissionId]
2024-08-29 09:12:20.612 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookInventory.BusinessLogicAcessLayer.Models.RoleModel.RoleGetModel, BookInventory, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 09:12:20.614 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.RolesController.GetAll (BookInventory) in 33.5871ms
2024-08-29 09:12:20.617 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.GetAll (BookInventory)'
2024-08-29 09:12:20.619 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/api/Roles/all - 200 1177 application/json; charset=utf-8 56.2117ms
2024-08-29 09:12:56.553 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7126/api/Roles/2 - application/json-patch+json 92
2024-08-29 09:12:56.557 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.Updaterole (BookInventory)'
2024-08-29 09:12:56.560 +02:00 [INF] Route matched with {action = "Updaterole", controller = "Roles"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Updaterole(Int32, BookInventory.BusinessLogicAcessLayer.Models.RoleModel.RoleUpdateModel) on controller BookInventory.APIAccessLayer.Controllers.RolesController (BookInventory).
2024-08-29 09:12:56.578 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Name], [r0].[RoleId], [r0].[PermissionId]
FROM (
    SELECT TOP(1) [r].[Id], [r].[Name]
    FROM [Roles] AS [r]
    WHERE [r].[Id] = @__id_0
) AS [t]
LEFT JOIN [RolePermissions] AS [r0] ON [t].[Id] = [r0].[RoleId]
ORDER BY [t].[Id], [r0].[RoleId]
2024-08-29 09:12:56.644 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p7='?' (DbType = Int32), @p6='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RolePermissions] ([PermissionId], [RoleId])
VALUES (@p0, @p1),
(@p2, @p3),
(@p4, @p5);
UPDATE [Roles] SET [Name] = @p6
OUTPUT 1
WHERE [Id] = @p7;
2024-08-29 09:12:56.659 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-08-29 09:12:56.663 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.RolesController.Updaterole (BookInventory) in 98.7237ms
2024-08-29 09:12:56.673 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.Updaterole (BookInventory)'
2024-08-29 09:12:56.674 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7126/api/Roles/2 - 200 null text/plain; charset=utf-8 121.5876ms
2024-08-29 09:13:02.144 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/api/Roles/all - null null
2024-08-29 09:13:02.156 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.GetAll (BookInventory)'
2024-08-29 09:13:02.157 +02:00 [INF] Route matched with {action = "GetAll", controller = "Roles"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller BookInventory.APIAccessLayer.Controllers.RolesController (BookInventory).
2024-08-29 09:13:02.173 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Name], [t].[RoleId], [t].[PermissionId], [t].[Id], [t].[Name]
FROM [Roles] AS [r]
LEFT JOIN (
    SELECT [r0].[RoleId], [r0].[PermissionId], [p].[Id], [p].[Name]
    FROM [RolePermissions] AS [r0]
    INNER JOIN [Permissions] AS [p] ON [r0].[PermissionId] = [p].[Id]
) AS [t] ON [r].[Id] = [t].[RoleId]
ORDER BY [r].[Id], [t].[RoleId], [t].[PermissionId]
2024-08-29 09:13:02.179 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookInventory.BusinessLogicAcessLayer.Models.RoleModel.RoleGetModel, BookInventory, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 09:13:02.182 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.RolesController.GetAll (BookInventory) in 21.9126ms
2024-08-29 09:13:02.185 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.GetAll (BookInventory)'
2024-08-29 09:13:02.186 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/api/Roles/all - 200 1310 application/json; charset=utf-8 41.6573ms
2024-08-29 09:13:19.312 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7126/api/Auths/login - application/json-patch+json 61
2024-08-29 09:13:19.324 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory)'
2024-08-29 09:13:19.324 +02:00 [INF] Route matched with {action = "Login", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BookInventory.DataAccessLayer.Entities.ServiceResponse`1[System.Int32]]] Login(BookInventory.BusinessLogicAcessLayer.Models.AccountModels.UserLoginModel) on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 09:13:19.342 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__ToLower_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[PasswordHash], [t].[PasswordResetToken], [t].[PasswordSalt], [t].[ResetTokenExpires], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username]
    FROM [Users] AS [u]
    WHERE LOWER([u].[Username]) = @__ToLower_0
) AS [t]
LEFT JOIN (
    SELECT [r].[UserId], [r].[RoleId], [r0].[Id], [r0].[Name]
    FROM [RoleUsers] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2024-08-29 09:13:19.363 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__roleIds_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoleId], [r].[PermissionId], [p].[Id], [p].[Name]
FROM [RolePermissions] AS [r]
INNER JOIN [Permissions] AS [p] ON [r].[PermissionId] = [p].[Id]
WHERE [r].[RoleId] IN (
    SELECT [r0].[value]
    FROM OPENJSON(@__roleIds_0) WITH ([value] int '$') AS [r0]
)
2024-08-29 09:13:19.373 +02:00 [INF] Executing OkObjectResult, writing value of type 'BookInventory.DataAccessLayer.Entities.ServiceResponse`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-29 09:13:19.375 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory) in 49.1779ms
2024-08-29 09:13:19.377 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory)'
2024-08-29 09:13:19.378 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7126/api/Auths/login - 200 409 application/json; charset=utf-8 66.6476ms
2024-08-29 09:13:30.682 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7126/api/Auths/login - application/json-patch+json 61
2024-08-29 09:13:30.697 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory)'
2024-08-29 09:13:30.701 +02:00 [INF] Route matched with {action = "Login", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BookInventory.DataAccessLayer.Entities.ServiceResponse`1[System.Int32]]] Login(BookInventory.BusinessLogicAcessLayer.Models.AccountModels.UserLoginModel) on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 09:13:30.713 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__ToLower_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[PasswordHash], [t].[PasswordResetToken], [t].[PasswordSalt], [t].[ResetTokenExpires], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username]
    FROM [Users] AS [u]
    WHERE LOWER([u].[Username]) = @__ToLower_0
) AS [t]
LEFT JOIN (
    SELECT [r].[UserId], [r].[RoleId], [r0].[Id], [r0].[Name]
    FROM [RoleUsers] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2024-08-29 09:13:30.740 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@__roleIds_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoleId], [r].[PermissionId], [p].[Id], [p].[Name]
FROM [RolePermissions] AS [r]
INNER JOIN [Permissions] AS [p] ON [r].[PermissionId] = [p].[Id]
WHERE [r].[RoleId] IN (
    SELECT [r0].[value]
    FROM OPENJSON(@__roleIds_0) WITH ([value] int '$') AS [r0]
)
2024-08-29 09:13:30.744 +02:00 [INF] Executing OkObjectResult, writing value of type 'BookInventory.DataAccessLayer.Entities.ServiceResponse`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-29 09:13:30.749 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory) in 45.4538ms
2024-08-29 09:13:30.753 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory)'
2024-08-29 09:13:30.756 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7126/api/Auths/login - 200 409 application/json; charset=utf-8 74.0766ms
2024-08-29 09:13:45.943 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/api/Authors/getAllAuthors - null null
2024-08-29 09:13:45.960 +02:00 [INF] Authorization failed. These requirements were not met:
ClaimsAuthorizationRequirement:Claim.Type=permissions and Claim.Value is one of the following values: (Author_Read)
2024-08-29 09:13:45.961 +02:00 [INF] AuthenticationScheme: Bearer was forbidden.
2024-08-29 09:13:45.963 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/api/Authors/getAllAuthors - 403 0 null 19.6242ms
2024-08-29 09:14:24.394 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/api/Auths/users - null null
2024-08-29 09:14:24.398 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.GetUsers (BookInventory)'
2024-08-29 09:14:24.403 +02:00 [INF] Route matched with {action = "GetUsers", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsers() on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 09:14:24.428 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username], [t].[UserId], [t].[RoleId], [t].[Id], [t].[Name]
FROM [Users] AS [u]
LEFT JOIN (
    SELECT [r].[UserId], [r].[RoleId], [r0].[Id], [r0].[Name]
    FROM [RoleUsers] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
) AS [t] ON [u].[Id] = [t].[UserId]
ORDER BY [u].[Id], [t].[UserId], [t].[RoleId]
2024-08-29 09:14:24.437 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookInventory.BusinessLogicAcessLayer.Models.AccountModels.UserGetModel, BookInventory, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 09:14:24.441 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.GetUsers (BookInventory) in 33.0914ms
2024-08-29 09:14:24.442 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.GetUsers (BookInventory)'
2024-08-29 09:14:24.443 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/api/Auths/users - 200 109 application/json; charset=utf-8 71.095ms
2024-08-29 09:14:38.549 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/api/Roles/all - null null
2024-08-29 09:14:38.552 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.GetAll (BookInventory)'
2024-08-29 09:14:38.553 +02:00 [INF] Route matched with {action = "GetAll", controller = "Roles"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller BookInventory.APIAccessLayer.Controllers.RolesController (BookInventory).
2024-08-29 09:14:38.571 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Name], [t].[RoleId], [t].[PermissionId], [t].[Id], [t].[Name]
FROM [Roles] AS [r]
LEFT JOIN (
    SELECT [r0].[RoleId], [r0].[PermissionId], [p].[Id], [p].[Name]
    FROM [RolePermissions] AS [r0]
    INNER JOIN [Permissions] AS [p] ON [r0].[PermissionId] = [p].[Id]
) AS [t] ON [r].[Id] = [t].[RoleId]
ORDER BY [r].[Id], [t].[RoleId], [t].[PermissionId]
2024-08-29 09:14:38.575 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookInventory.BusinessLogicAcessLayer.Models.RoleModel.RoleGetModel, BookInventory, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 09:14:38.578 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.RolesController.GetAll (BookInventory) in 22.2415ms
2024-08-29 09:14:38.582 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.GetAll (BookInventory)'
2024-08-29 09:14:38.583 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/api/Roles/all - 200 1310 application/json; charset=utf-8 34.6274ms
2024-08-29 09:15:03.554 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7126/api/Auths/1 - application/json-patch+json 62
2024-08-29 09:15:03.576 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.UpdateUser (BookInventory)'
2024-08-29 09:15:03.583 +02:00 [INF] Route matched with {action = "UpdateUser", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateUser(BookInventory.BusinessLogicAcessLayer.Models.AccountModels.UserUpdateModel, Int32) on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 09:15:03.610 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[PasswordHash], [t].[PasswordResetToken], [t].[PasswordSalt], [t].[ResetTokenExpires], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [r].[UserId], [r].[RoleId], [r0].[Id], [r0].[Name]
    FROM [RoleUsers] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2024-08-29 09:15:03.632 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[PasswordHash], [t].[PasswordResetToken], [t].[PasswordSalt], [t].[ResetTokenExpires], [t].[Username], [r].[UserId], [r].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[Id] = @__id_0
) AS [t]
LEFT JOIN [RoleUsers] AS [r] ON [t].[Id] = [r].[UserId]
ORDER BY [t].[Id], [r].[UserId]
2024-08-29 09:15:03.649 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RoleUsers] ([RoleId], [UserId])
VALUES (@p0, @p1);
2024-08-29 09:15:03.655 +02:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2024-08-29 09:15:03.656 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.UpdateUser (BookInventory) in 70.7705ms
2024-08-29 09:15:03.658 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.UpdateUser (BookInventory)'
2024-08-29 09:15:03.659 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7126/api/Auths/1 - 204 null null 105.1324ms
2024-08-29 09:16:29.305 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/api/Auths/users - null null
2024-08-29 09:16:29.313 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.GetUsers (BookInventory)'
2024-08-29 09:16:29.315 +02:00 [INF] Route matched with {action = "GetUsers", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsers() on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 09:16:29.325 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username], [t].[UserId], [t].[RoleId], [t].[Id], [t].[Name]
FROM [Users] AS [u]
LEFT JOIN (
    SELECT [r].[UserId], [r].[RoleId], [r0].[Id], [r0].[Name]
    FROM [RoleUsers] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
) AS [t] ON [u].[Id] = [t].[UserId]
ORDER BY [u].[Id], [t].[UserId], [t].[RoleId]
2024-08-29 09:16:29.331 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookInventory.BusinessLogicAcessLayer.Models.AccountModels.UserGetModel, BookInventory, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 09:16:29.333 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.GetUsers (BookInventory) in 15.362ms
2024-08-29 09:16:29.340 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.GetUsers (BookInventory)'
2024-08-29 09:16:29.341 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/api/Auths/users - 200 165 application/json; charset=utf-8 36.1768ms
2024-08-29 09:16:36.343 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7126/api/Auths/login - application/json-patch+json 61
2024-08-29 09:16:36.347 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory)'
2024-08-29 09:16:36.349 +02:00 [INF] Route matched with {action = "Login", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BookInventory.DataAccessLayer.Entities.ServiceResponse`1[System.Int32]]] Login(BookInventory.BusinessLogicAcessLayer.Models.AccountModels.UserLoginModel) on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 09:16:36.365 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__ToLower_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[PasswordHash], [t].[PasswordResetToken], [t].[PasswordSalt], [t].[ResetTokenExpires], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username]
    FROM [Users] AS [u]
    WHERE LOWER([u].[Username]) = @__ToLower_0
) AS [t]
LEFT JOIN (
    SELECT [r].[UserId], [r].[RoleId], [r0].[Id], [r0].[Name]
    FROM [RoleUsers] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2024-08-29 09:16:36.385 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__roleIds_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoleId], [r].[PermissionId], [p].[Id], [p].[Name]
FROM [RolePermissions] AS [r]
INNER JOIN [Permissions] AS [p] ON [r].[PermissionId] = [p].[Id]
WHERE [r].[RoleId] IN (
    SELECT [r0].[value]
    FROM OPENJSON(@__roleIds_0) WITH ([value] int '$') AS [r0]
)
2024-08-29 09:16:36.390 +02:00 [INF] Executing OkObjectResult, writing value of type 'BookInventory.DataAccessLayer.Entities.ServiceResponse`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-29 09:16:36.394 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory) in 42.4677ms
2024-08-29 09:16:36.396 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory)'
2024-08-29 09:16:36.398 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7126/api/Auths/login - 200 798 application/json; charset=utf-8 54.6707ms
2024-08-29 09:16:44.431 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7126/api/Auths/login - application/json-patch+json 61
2024-08-29 09:16:44.434 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory)'
2024-08-29 09:16:44.436 +02:00 [INF] Route matched with {action = "Login", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BookInventory.DataAccessLayer.Entities.ServiceResponse`1[System.Int32]]] Login(BookInventory.BusinessLogicAcessLayer.Models.AccountModels.UserLoginModel) on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 09:16:44.446 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__ToLower_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[PasswordHash], [t].[PasswordResetToken], [t].[PasswordSalt], [t].[ResetTokenExpires], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username]
    FROM [Users] AS [u]
    WHERE LOWER([u].[Username]) = @__ToLower_0
) AS [t]
LEFT JOIN (
    SELECT [r].[UserId], [r].[RoleId], [r0].[Id], [r0].[Name]
    FROM [RoleUsers] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2024-08-29 09:16:44.454 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__roleIds_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoleId], [r].[PermissionId], [p].[Id], [p].[Name]
FROM [RolePermissions] AS [r]
INNER JOIN [Permissions] AS [p] ON [r].[PermissionId] = [p].[Id]
WHERE [r].[RoleId] IN (
    SELECT [r0].[value]
    FROM OPENJSON(@__roleIds_0) WITH ([value] int '$') AS [r0]
)
2024-08-29 09:16:44.459 +02:00 [INF] Executing OkObjectResult, writing value of type 'BookInventory.DataAccessLayer.Entities.ServiceResponse`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-29 09:16:44.462 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory) in 23.0891ms
2024-08-29 09:16:44.464 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory)'
2024-08-29 09:16:44.466 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7126/api/Auths/login - 200 798 application/json; charset=utf-8 35.504ms
2024-08-29 09:16:56.072 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/api/Authors/getAllAuthors - null null
2024-08-29 09:16:56.078 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthorsController.GetAllAuthors (BookInventory)'
2024-08-29 09:16:56.103 +02:00 [INF] Route matched with {action = "GetAllAuthors", controller = "Authors"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllAuthors() on controller BookInventory.APIAccessLayer.Controllers.AuthorsController (BookInventory).
2024-08-29 09:16:56.110 +02:00 [INF] Displaying all authors!
2024-08-29 09:16:56.120 +02:00 [INF] Fetching all authors!
2024-08-29 09:16:56.141 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[DateOfBirth], [a].[EmailAddress], [a].[ImageUrl], [a].[Name], [a].[Nationality], [p].[Id], [p].[Address], [p].[AuthorId], [p].[Name], [p].[Website]
FROM [Authors] AS [a]
LEFT JOIN [Publishers] AS [p] ON [a].[Id] = [p].[AuthorId]
2024-08-29 09:16:56.160 +02:00 [INF] All authors displayed!
2024-08-29 09:16:56.163 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookInventory.LogicAcessLayer.Models.AuthorModels.AuthorGetModel, BookInventory, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 09:16:56.167 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthorsController.GetAllAuthors (BookInventory) in 59.3144ms
2024-08-29 09:16:56.170 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthorsController.GetAllAuthors (BookInventory)'
2024-08-29 09:16:56.172 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/api/Authors/getAllAuthors - 200 1210 application/json; charset=utf-8 100.4277ms
2024-08-29 09:17:05.928 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/api/Publishers/getAllPublishers - null null
2024-08-29 09:17:05.932 +02:00 [INF] Executing endpoint 'PublisherInventory.APIAccessLayer.Controllers.PublishersController.GetAllPublishers (BookInventory)'
2024-08-29 09:17:05.962 +02:00 [INF] Route matched with {action = "GetAllPublishers", controller = "Publishers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllPublishers() on controller PublisherInventory.APIAccessLayer.Controllers.PublishersController (BookInventory).
2024-08-29 09:17:05.986 +02:00 [INF] API call to get all publishers started.
2024-08-29 09:17:06.028 +02:00 [INF] Executed DbCommand (30ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Address], [p].[AuthorId], [p].[Name], [p].[Website], [a].[Id], [a].[DateOfBirth], [a].[EmailAddress], [a].[ImageUrl], [a].[Name], [a].[Nationality]
FROM [Publishers] AS [p]
INNER JOIN [Authors] AS [a] ON [p].[AuthorId] = [a].[Id]
2024-08-29 09:17:06.034 +02:00 [INF] Successfully retrieved all publishers.
2024-08-29 09:17:06.035 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookInventory.BusinessLogicAcessLayer.Models.PulisherModels.PublisherGetModel, BookInventory, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 09:17:06.037 +02:00 [INF] Executed action PublisherInventory.APIAccessLayer.Controllers.PublishersController.GetAllPublishers (BookInventory) in 71.9198ms
2024-08-29 09:17:06.038 +02:00 [INF] Executed endpoint 'PublisherInventory.APIAccessLayer.Controllers.PublishersController.GetAllPublishers (BookInventory)'
2024-08-29 09:17:06.039 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/api/Publishers/getAllPublishers - 200 1049 application/json; charset=utf-8 111.7296ms
2024-08-29 09:17:32.927 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/api/Roles/1 - null null
2024-08-29 09:17:32.962 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.GetRoleById (BookInventory)'
2024-08-29 09:17:32.968 +02:00 [INF] Route matched with {action = "GetRoleById", controller = "Roles"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRoleById(Int32) on controller BookInventory.APIAccessLayer.Controllers.RolesController (BookInventory).
2024-08-29 09:17:32.994 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Name], [t0].[RoleId], [t0].[PermissionId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [r].[Id], [r].[Name]
    FROM [Roles] AS [r]
    WHERE [r].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [r0].[RoleId], [r0].[PermissionId], [p].[Id], [p].[Name]
    FROM [RolePermissions] AS [r0]
    INNER JOIN [Permissions] AS [p] ON [r0].[PermissionId] = [p].[Id]
) AS [t0] ON [t].[Id] = [t0].[RoleId]
ORDER BY [t].[Id], [t0].[RoleId], [t0].[PermissionId]
2024-08-29 09:17:33.002 +02:00 [INF] Executing OkObjectResult, writing value of type 'BookInventory.BusinessLogicAcessLayer.Models.RoleModel.RoleGetModel'.
2024-08-29 09:17:33.004 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.RolesController.GetRoleById (BookInventory) in 31.8373ms
2024-08-29 09:17:33.006 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.GetRoleById (BookInventory)'
2024-08-29 09:17:33.007 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/api/Roles/1 - 200 1081 application/json; charset=utf-8 81.0869ms
2024-08-29 09:18:02.029 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/api/Auths/1 - null null
2024-08-29 09:18:02.040 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.GetUserById (BookInventory)'
2024-08-29 09:18:02.045 +02:00 [INF] Route matched with {action = "GetUserById", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUserById(Int32) on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 09:18:02.056 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[PasswordHash], [t].[PasswordResetToken], [t].[PasswordSalt], [t].[ResetTokenExpires], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [r].[UserId], [r].[RoleId], [r0].[Id], [r0].[Name]
    FROM [RoleUsers] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2024-08-29 09:18:02.064 +02:00 [INF] Executing OkObjectResult, writing value of type 'BookInventory.BusinessLogicAcessLayer.Models.AccountModels.UserGetModel'.
2024-08-29 09:18:02.066 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.GetUserById (BookInventory) in 17.6982ms
2024-08-29 09:18:02.072 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.GetUserById (BookInventory)'
2024-08-29 09:18:02.073 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/api/Auths/1 - 200 163 application/json; charset=utf-8 44.3895ms
2024-08-29 09:19:31.117 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/api/Permissions/all - null null
2024-08-29 09:19:31.127 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.PermissionsController.GetPermissions (BookInventory)'
2024-08-29 09:19:31.130 +02:00 [INF] Route matched with {action = "GetPermissions", controller = "Permissions"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPermissions() on controller BookInventory.APIAccessLayer.Controllers.PermissionsController (BookInventory).
2024-08-29 09:19:31.160 +02:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Name], [t].[RoleId], [t].[PermissionId], [t].[Id], [t].[Name]
FROM [Permissions] AS [p]
LEFT JOIN (
    SELECT [r].[RoleId], [r].[PermissionId], [r0].[Id], [r0].[Name]
    FROM [RolePermissions] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
) AS [t] ON [p].[Id] = [t].[PermissionId]
ORDER BY [p].[Id], [t].[RoleId], [t].[PermissionId]
2024-08-29 09:19:31.164 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookInventory.BusinessLogicAcessLayer.Models.PermissionModels.PermissionGetModel, BookInventory, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 09:19:31.166 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.PermissionsController.GetPermissions (BookInventory) in 34.4432ms
2024-08-29 09:19:31.169 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.PermissionsController.GetPermissions (BookInventory)'
2024-08-29 09:19:31.177 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/api/Permissions/all - 200 2497 application/json; charset=utf-8 60.4515ms
2024-08-29 09:20:12.118 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7126/api/Permissions - application/json-patch+json 54
2024-08-29 09:20:12.175 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.PermissionsController.CreatePermission (BookInventory)'
2024-08-29 09:20:12.186 +02:00 [INF] Route matched with {action = "CreatePermission", controller = "Permissions"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreatePermission(BookInventory.BusinessLogicAcessLayer.Models.PermissionModels.PermissionCreateModel) on controller BookInventory.APIAccessLayer.Controllers.PermissionsController (BookInventory).
2024-08-29 09:20:12.230 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Permissions] ([Name])
OUTPUT INSERTED.[Id]
VALUES (@p0);
2024-08-29 09:20:12.256 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RolePermissions] ([PermissionId], [RoleId])
VALUES (@p0, @p1);
2024-08-29 09:20:12.261 +02:00 [INF] Executing OkObjectResult, writing value of type 'BookInventory.BusinessLogicAcessLayer.Models.PermissionModels.PermissionCreateModel'.
2024-08-29 09:20:12.266 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.PermissionsController.CreatePermission (BookInventory) in 72.7198ms
2024-08-29 09:20:12.274 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.PermissionsController.CreatePermission (BookInventory)'
2024-08-29 09:20:12.275 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7126/api/Permissions - 200 37 application/json; charset=utf-8 158.5492ms
2024-08-29 09:22:38.606 +02:00 [INF] User profile is available. Using 'C:\Users\lkelmendi.PC-PR05\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-29 09:22:38.915 +02:00 [INF] Now listening on: https://localhost:7126
2024-08-29 09:22:38.916 +02:00 [INF] Now listening on: http://localhost:5019
2024-08-29 09:22:38.918 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-29 09:22:38.919 +02:00 [INF] Hosting environment: Development
2024-08-29 09:22:38.920 +02:00 [INF] Content root path: C:\Users\lkelmendi.PC-PR05\Desktop\BookInventory\BookInventory
2024-08-29 09:22:39.612 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/swagger/index.html - null null
2024-08-29 09:22:39.948 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/swagger/index.html - 200 null text/html;charset=utf-8 339.8451ms
2024-08-29 09:22:39.973 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/_framework/aspnetcore-browser-refresh.js - null null
2024-08-29 09:22:39.973 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/swagger/index.js - null null
2024-08-29 09:22:39.973 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/_vs/browserLink - null null
2024-08-29 09:22:39.980 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/swagger/index.js - 200 null application/javascript;charset=utf-8 7.8028ms
2024-08-29 09:22:39.993 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 21.0654ms
2024-08-29 09:22:40.076 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/_vs/browserLink - 200 null text/javascript; charset=UTF-8 103.4879ms
2024-08-29 09:22:40.136 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/swagger/v1/swagger.json - null null
2024-08-29 09:22:40.347 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 211.2523ms
2024-08-29 09:23:04.679 +02:00 [INF] User profile is available. Using 'C:\Users\lkelmendi.PC-PR05\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-29 09:23:05.063 +02:00 [INF] Now listening on: https://localhost:7126
2024-08-29 09:23:05.064 +02:00 [INF] Now listening on: http://localhost:5019
2024-08-29 09:23:05.070 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-29 09:23:05.071 +02:00 [INF] Hosting environment: Development
2024-08-29 09:23:05.073 +02:00 [INF] Content root path: C:\Users\lkelmendi.PC-PR05\Desktop\BookInventory\BookInventory
2024-08-29 09:23:05.729 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/swagger/index.html - null null
2024-08-29 09:23:06.032 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/swagger/index.html - 200 null text/html;charset=utf-8 309.4195ms
2024-08-29 09:23:06.064 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/_framework/aspnetcore-browser-refresh.js - null null
2024-08-29 09:23:06.064 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/swagger/index.js - null null
2024-08-29 09:23:06.073 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/_vs/browserLink - null null
2024-08-29 09:23:06.086 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/swagger/index.js - 200 null application/javascript;charset=utf-8 21.8119ms
2024-08-29 09:23:06.095 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 31.6405ms
2024-08-29 09:23:06.163 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/_vs/browserLink - 200 null text/javascript; charset=UTF-8 91.5828ms
2024-08-29 09:23:06.227 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/swagger/v1/swagger.json - null null
2024-08-29 09:23:06.513 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 285.808ms
2024-08-29 09:23:43.725 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7126/api/Auths/login - application/json-patch+json 61
2024-08-29 09:23:43.829 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory)'
2024-08-29 09:23:43.852 +02:00 [INF] Route matched with {action = "Login", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BookInventory.DataAccessLayer.Entities.ServiceResponse`1[System.Int32]]] Login(BookInventory.BusinessLogicAcessLayer.Models.AccountModels.UserLoginModel) on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 09:23:45.897 +02:00 [INF] Executed DbCommand (78ms) [Parameters=[@__ToLower_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[PasswordHash], [t].[PasswordResetToken], [t].[PasswordSalt], [t].[ResetTokenExpires], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username]
    FROM [Users] AS [u]
    WHERE LOWER([u].[Username]) = @__ToLower_0
) AS [t]
LEFT JOIN (
    SELECT [r].[UserId], [r].[RoleId], [r0].[Id], [r0].[Name]
    FROM [RoleUsers] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2024-08-29 09:23:46.127 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__roleIds_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoleId], [r].[PermissionId], [p].[Id], [p].[Name]
FROM [RolePermissions] AS [r]
INNER JOIN [Permissions] AS [p] ON [r].[PermissionId] = [p].[Id]
WHERE [r].[RoleId] IN (
    SELECT [r0].[value]
    FROM OPENJSON(@__roleIds_0) WITH ([value] int '$') AS [r0]
)
2024-08-29 09:23:46.178 +02:00 [INF] Executing OkObjectResult, writing value of type 'BookInventory.DataAccessLayer.Entities.ServiceResponse`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-29 09:23:46.210 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory) in 2352.0142ms
2024-08-29 09:23:46.213 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory)'
2024-08-29 09:23:46.223 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7126/api/Auths/login - 200 818 application/json; charset=utf-8 2498.8342ms
2024-08-29 09:24:04.369 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/api/Authors/getAllAuthors - null null
2024-08-29 09:24:04.437 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthorsController.GetAllAuthors (BookInventory)'
2024-08-29 09:24:04.444 +02:00 [INF] Route matched with {action = "GetAllAuthors", controller = "Authors"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllAuthors() on controller BookInventory.APIAccessLayer.Controllers.AuthorsController (BookInventory).
2024-08-29 09:24:04.452 +02:00 [INF] Displaying all authors!
2024-08-29 09:24:04.454 +02:00 [INF] Fetching all authors!
2024-08-29 09:24:04.487 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[DateOfBirth], [a].[EmailAddress], [a].[ImageUrl], [a].[Name], [a].[Nationality], [p].[Id], [p].[Address], [p].[AuthorId], [p].[Name], [p].[Website]
FROM [Authors] AS [a]
LEFT JOIN [Publishers] AS [p] ON [a].[Id] = [p].[AuthorId]
2024-08-29 09:24:04.535 +02:00 [INF] All authors displayed!
2024-08-29 09:24:04.538 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookInventory.LogicAcessLayer.Models.AuthorModels.AuthorGetModel, BookInventory, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 09:24:04.553 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthorsController.GetAllAuthors (BookInventory) in 104.0276ms
2024-08-29 09:24:04.562 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthorsController.GetAllAuthors (BookInventory)'
2024-08-29 09:24:04.565 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/api/Authors/getAllAuthors - 200 1210 application/json; charset=utf-8 196.2387ms
2024-08-29 09:24:15.313 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/api/Authors/findById/2 - null null
2024-08-29 09:24:15.324 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthorsController.GetAuthorById (BookInventory)'
2024-08-29 09:24:15.344 +02:00 [INF] Route matched with {action = "GetAuthorById", controller = "Authors"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAuthorById(Int32) on controller BookInventory.APIAccessLayer.Controllers.AuthorsController (BookInventory).
2024-08-29 09:24:15.355 +02:00 [INF] Displaying author with id 2!
2024-08-29 09:24:15.358 +02:00 [INF] Fetching the author with the id: 2
2024-08-29 09:24:15.428 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[DateOfBirth], [a].[EmailAddress], [a].[ImageUrl], [a].[Name], [a].[Nationality], [p].[Id], [p].[Address], [p].[AuthorId], [p].[Name], [p].[Website]
FROM [Authors] AS [a]
LEFT JOIN [Publishers] AS [p] ON [a].[Id] = [p].[AuthorId]
WHERE [a].[Id] = @__id_0
2024-08-29 09:24:15.433 +02:00 [WRN] Author with id 2 not found!
2024-08-29 09:24:15.559 +02:00 [WRN] Author not found!
2024-08-29 09:24:15.562 +02:00 [INF] Executing NotFoundObjectResult, writing value of type 'System.String'.
2024-08-29 09:24:15.565 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthorsController.GetAuthorById (BookInventory) in 212.7554ms
2024-08-29 09:24:15.567 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthorsController.GetAuthorById (BookInventory)'
2024-08-29 09:24:15.568 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/api/Authors/findById/2 - 404 null text/plain; charset=utf-8 255.0141ms
2024-08-29 09:24:21.992 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/api/Authors/findById/1 - null null
2024-08-29 09:24:21.999 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthorsController.GetAuthorById (BookInventory)'
2024-08-29 09:24:22.003 +02:00 [INF] Route matched with {action = "GetAuthorById", controller = "Authors"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAuthorById(Int32) on controller BookInventory.APIAccessLayer.Controllers.AuthorsController (BookInventory).
2024-08-29 09:24:22.010 +02:00 [INF] Displaying author with id 1!
2024-08-29 09:24:22.012 +02:00 [INF] Fetching the author with the id: 1
2024-08-29 09:24:22.028 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [a].[Id], [a].[DateOfBirth], [a].[EmailAddress], [a].[ImageUrl], [a].[Name], [a].[Nationality], [p].[Id], [p].[Address], [p].[AuthorId], [p].[Name], [p].[Website]
FROM [Authors] AS [a]
LEFT JOIN [Publishers] AS [p] ON [a].[Id] = [p].[AuthorId]
WHERE [a].[Id] = @__id_0
2024-08-29 09:24:22.035 +02:00 [INF] Executing OkObjectResult, writing value of type 'BookInventory.LogicAcessLayer.Models.AuthorModels.AuthorGetModel'.
2024-08-29 09:24:22.037 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthorsController.GetAuthorById (BookInventory) in 30.3283ms
2024-08-29 09:24:22.039 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthorsController.GetAuthorById (BookInventory)'
2024-08-29 09:24:22.040 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/api/Authors/findById/1 - 200 147 application/json; charset=utf-8 48.1716ms
2024-08-29 09:30:29.478 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7126/api/Auths/register - application/json-patch+json 59
2024-08-29 09:30:29.485 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Register (BookInventory)'
2024-08-29 09:30:29.492 +02:00 [INF] Route matched with {action = "Register", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BookInventory.DataAccessLayer.Entities.ServiceResponse`1[System.Int32]]] Register(BookInventory.BusinessLogicAcessLayer.Models.AccountModels.UserRegistrationModel) on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 09:30:29.559 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@__ToLower_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE LOWER([u].[Username]) = @__ToLower_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-08-29 09:30:29.680 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@p0='?' (Size = 8000) (DbType = Binary), @p1='?' (Size = 4000), @p2='?' (Size = 8000) (DbType = Binary), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([PasswordHash], [PasswordResetToken], [PasswordSalt], [ResetTokenExpires], [Username])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-08-29 09:30:29.710 +02:00 [INF] Executing OkObjectResult, writing value of type 'BookInventory.DataAccessLayer.Entities.ServiceResponse`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-29 09:30:29.714 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.Register (BookInventory) in 218.6324ms
2024-08-29 09:30:29.715 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Register (BookInventory)'
2024-08-29 09:30:29.716 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7126/api/Auths/register - 200 38 application/json; charset=utf-8 239.5158ms
2024-08-29 09:31:38.952 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7126/api/Auths/login - application/json-patch+json 59
2024-08-29 09:31:38.961 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory)'
2024-08-29 09:31:38.962 +02:00 [INF] Route matched with {action = "Login", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BookInventory.DataAccessLayer.Entities.ServiceResponse`1[System.Int32]]] Login(BookInventory.BusinessLogicAcessLayer.Models.AccountModels.UserLoginModel) on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 09:31:39.004 +02:00 [INF] Executed DbCommand (38ms) [Parameters=[@__ToLower_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[PasswordHash], [t].[PasswordResetToken], [t].[PasswordSalt], [t].[ResetTokenExpires], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username]
    FROM [Users] AS [u]
    WHERE LOWER([u].[Username]) = @__ToLower_0
) AS [t]
LEFT JOIN (
    SELECT [r].[UserId], [r].[RoleId], [r0].[Id], [r0].[Name]
    FROM [RoleUsers] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2024-08-29 09:31:39.021 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__roleIds_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoleId], [r].[PermissionId], [p].[Id], [p].[Name]
FROM [RolePermissions] AS [r]
INNER JOIN [Permissions] AS [p] ON [r].[PermissionId] = [p].[Id]
WHERE [r].[RoleId] IN (
    SELECT [r0].[value]
    FROM OPENJSON(@__roleIds_0) WITH ([value] int '$') AS [r0]
)
2024-08-29 09:31:39.027 +02:00 [INF] Executing OkObjectResult, writing value of type 'BookInventory.DataAccessLayer.Entities.ServiceResponse`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-29 09:31:39.029 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory) in 65.4272ms
2024-08-29 09:31:39.031 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory)'
2024-08-29 09:31:39.032 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7126/api/Auths/login - 200 287 application/json; charset=utf-8 81.5463ms
2024-08-29 09:31:58.201 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/api/Auths/users - null null
2024-08-29 09:31:58.208 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.GetUsers (BookInventory)'
2024-08-29 09:31:58.214 +02:00 [INF] Route matched with {action = "GetUsers", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsers() on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 09:31:58.244 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username], [t].[UserId], [t].[RoleId], [t].[Id], [t].[Name]
FROM [Users] AS [u]
LEFT JOIN (
    SELECT [r].[UserId], [r].[RoleId], [r0].[Id], [r0].[Name]
    FROM [RoleUsers] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
) AS [t] ON [u].[Id] = [t].[UserId]
ORDER BY [u].[Id], [t].[UserId], [t].[RoleId]
2024-08-29 09:31:58.256 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookInventory.BusinessLogicAcessLayer.Models.AccountModels.UserGetModel, BookInventory, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 09:31:58.264 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.GetUsers (BookInventory) in 46.7557ms
2024-08-29 09:31:58.267 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.GetUsers (BookInventory)'
2024-08-29 09:31:58.269 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/api/Auths/users - 200 210 application/json; charset=utf-8 68.5257ms
2024-08-29 09:33:00.246 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7126/api/Auths/2 - application/json-patch+json 58
2024-08-29 09:33:00.271 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.UpdateUser (BookInventory)'
2024-08-29 09:33:00.279 +02:00 [INF] Route matched with {action = "UpdateUser", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateUser(BookInventory.BusinessLogicAcessLayer.Models.AccountModels.UserUpdateModel, Int32) on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 09:33:00.325 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[PasswordHash], [t].[PasswordResetToken], [t].[PasswordSalt], [t].[ResetTokenExpires], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [r].[UserId], [r].[RoleId], [r0].[Id], [r0].[Name]
    FROM [RoleUsers] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2024-08-29 09:33:00.345 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[PasswordHash], [t].[PasswordResetToken], [t].[PasswordSalt], [t].[ResetTokenExpires], [t].[Username], [r].[UserId], [r].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[Id] = @__id_0
) AS [t]
LEFT JOIN [RoleUsers] AS [r] ON [t].[Id] = [r].[UserId]
ORDER BY [t].[Id], [r].[UserId]
2024-08-29 09:33:00.365 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RoleUsers] ([RoleId], [UserId])
VALUES (@p0, @p1);
2024-08-29 09:33:00.373 +02:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2024-08-29 09:33:00.374 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.UpdateUser (BookInventory) in 93.6164ms
2024-08-29 09:33:00.375 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.UpdateUser (BookInventory)'
2024-08-29 09:33:00.377 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7126/api/Auths/2 - 204 null null 131.4363ms
2024-08-29 09:33:07.984 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7126/api/Auths/login - application/json-patch+json 59
2024-08-29 09:33:07.989 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory)'
2024-08-29 09:33:07.992 +02:00 [INF] Route matched with {action = "Login", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BookInventory.DataAccessLayer.Entities.ServiceResponse`1[System.Int32]]] Login(BookInventory.BusinessLogicAcessLayer.Models.AccountModels.UserLoginModel) on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 09:33:08.007 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__ToLower_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[PasswordHash], [t].[PasswordResetToken], [t].[PasswordSalt], [t].[ResetTokenExpires], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username]
    FROM [Users] AS [u]
    WHERE LOWER([u].[Username]) = @__ToLower_0
) AS [t]
LEFT JOIN (
    SELECT [r].[UserId], [r].[RoleId], [r0].[Id], [r0].[Name]
    FROM [RoleUsers] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2024-08-29 09:33:08.029 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@__roleIds_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoleId], [r].[PermissionId], [p].[Id], [p].[Name]
FROM [RolePermissions] AS [r]
INNER JOIN [Permissions] AS [p] ON [r].[PermissionId] = [p].[Id]
WHERE [r].[RoleId] IN (
    SELECT [r0].[value]
    FROM OPENJSON(@__roleIds_0) WITH ([value] int '$') AS [r0]
)
2024-08-29 09:33:08.035 +02:00 [INF] Executing OkObjectResult, writing value of type 'BookInventory.DataAccessLayer.Entities.ServiceResponse`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-29 09:33:08.037 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory) in 40.762ms
2024-08-29 09:33:08.040 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory)'
2024-08-29 09:33:08.041 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7126/api/Auths/login - 200 406 application/json; charset=utf-8 57.2434ms
2024-08-29 09:33:16.624 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7126/api/Auths/login - application/json-patch+json 59
2024-08-29 09:33:16.628 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory)'
2024-08-29 09:33:16.630 +02:00 [INF] Route matched with {action = "Login", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BookInventory.DataAccessLayer.Entities.ServiceResponse`1[System.Int32]]] Login(BookInventory.BusinessLogicAcessLayer.Models.AccountModels.UserLoginModel) on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 09:33:16.641 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__ToLower_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[PasswordHash], [t].[PasswordResetToken], [t].[PasswordSalt], [t].[ResetTokenExpires], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username]
    FROM [Users] AS [u]
    WHERE LOWER([u].[Username]) = @__ToLower_0
) AS [t]
LEFT JOIN (
    SELECT [r].[UserId], [r].[RoleId], [r0].[Id], [r0].[Name]
    FROM [RoleUsers] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2024-08-29 09:33:16.649 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__roleIds_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoleId], [r].[PermissionId], [p].[Id], [p].[Name]
FROM [RolePermissions] AS [r]
INNER JOIN [Permissions] AS [p] ON [r].[PermissionId] = [p].[Id]
WHERE [r].[RoleId] IN (
    SELECT [r0].[value]
    FROM OPENJSON(@__roleIds_0) WITH ([value] int '$') AS [r0]
)
2024-08-29 09:33:16.654 +02:00 [INF] Executing OkObjectResult, writing value of type 'BookInventory.DataAccessLayer.Entities.ServiceResponse`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-29 09:33:16.656 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory) in 21.6063ms
2024-08-29 09:33:16.658 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory)'
2024-08-29 09:33:16.659 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7126/api/Auths/login - 200 406 application/json; charset=utf-8 35.5291ms
2024-08-29 09:33:35.863 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/api/Books/getAllBooks - null null
2024-08-29 09:33:35.875 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.BooksController.GetAllBooks (BookInventory)'
2024-08-29 09:33:35.880 +02:00 [INF] Route matched with {action = "GetAllBooks", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllBooks() on controller BookInventory.APIAccessLayer.Controllers.BooksController (BookInventory).
2024-08-29 09:33:35.888 +02:00 [INF] API call to get all books started.
2024-08-29 09:33:35.892 +02:00 [INF] Fetching all books from the database.
2024-08-29 09:33:35.911 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [b].[Id], [b].[AuthorId], [b].[Edition], [b].[Format], [b].[Genres], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublicationYear], [b].[Stock], [b].[Title], [a].[Id], [a].[DateOfBirth], [a].[EmailAddress], [a].[ImageUrl], [a].[Name], [a].[Nationality]
FROM [Books] AS [b]
INNER JOIN [Authors] AS [a] ON [b].[AuthorId] = [a].[Id]
2024-08-29 09:33:35.951 +02:00 [INF] Exiting GetAllBooks method with 2 books fetched.
2024-08-29 09:33:35.953 +02:00 [INF] API call to get all books completed successfully with 2 books returned.
2024-08-29 09:33:35.955 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookInventory.LogicAcessLayer.Models.BookModels.BookGetModel, BookInventory, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 09:33:35.963 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.BooksController.GetAllBooks (BookInventory) in 76.0721ms
2024-08-29 09:33:35.966 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.BooksController.GetAllBooks (BookInventory)'
2024-08-29 09:33:35.968 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/api/Books/getAllBooks - 200 685 application/json; charset=utf-8 105.3064ms
2024-08-29 09:33:40.943 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/api/Publishers/getAllPublishers - null null
2024-08-29 09:33:40.969 +02:00 [INF] Authorization failed. These requirements were not met:
ClaimsAuthorizationRequirement:Claim.Type=permissions and Claim.Value is one of the following values: (Publisher_Read)
2024-08-29 09:33:40.974 +02:00 [INF] AuthenticationScheme: Bearer was forbidden.
2024-08-29 09:33:40.977 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/api/Publishers/getAllPublishers - 403 0 null 34.1412ms
2024-08-29 09:38:56.464 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7126/api/Auths/change-password - application/json-patch+json 98
2024-08-29 09:38:56.469 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.ChangePasswordd (BookInventory)'
2024-08-29 09:38:56.476 +02:00 [INF] Route matched with {action = "ChangePasswordd", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ChangePasswordd(BookInventory.BusinessLogicAcessLayer.Models.AccountModels.PasswordChangeModel) on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 09:38:56.516 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__ToLower_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username]
FROM [Users] AS [u]
WHERE LOWER([u].[Username]) = @__ToLower_0
2024-08-29 09:38:56.532 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (Size = 8000) (DbType = Binary), @p1='?' (Size = 4000), @p2='?' (Size = 8000) (DbType = Binary), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [PasswordHash] = @p0, [PasswordResetToken] = @p1, [PasswordSalt] = @p2, [ResetTokenExpires] = @p3, [Username] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-08-29 09:38:56.538 +02:00 [INF] Executing OkObjectResult, writing value of type 'BookInventory.DataAccessLayer.Entities.ServiceResponse`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-29 09:38:56.539 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.ChangePasswordd (BookInventory) in 59.0238ms
2024-08-29 09:38:56.551 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.ChangePasswordd (BookInventory)'
2024-08-29 09:38:56.552 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7126/api/Auths/change-password - 200 68 application/json; charset=utf-8 88.7509ms
2024-08-29 09:39:09.909 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7126/api/Auths/forgot-password?username=vedat.aliu2 - null 0
2024-08-29 09:39:09.953 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.ForgotPassword (BookInventory)'
2024-08-29 09:39:09.961 +02:00 [INF] Route matched with {action = "ForgotPassword", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BookInventory.DataAccessLayer.Entities.ServiceResponse`1[System.String]]] ForgotPassword(System.String) on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 09:39:09.988 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__username_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[Username] = @__username_0
2024-08-29 09:39:10.002 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p2='?' (DbType = Int32), @p0='?' (Size = 4000), @p1='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [PasswordResetToken] = @p0, [ResetTokenExpires] = @p1
OUTPUT 1
WHERE [Id] = @p2;
2024-08-29 09:39:10.008 +02:00 [INF] Executing OkObjectResult, writing value of type 'BookInventory.DataAccessLayer.Entities.ServiceResponse`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-29 09:39:10.011 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.ForgotPassword (BookInventory) in 46.1149ms
2024-08-29 09:39:10.014 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.ForgotPassword (BookInventory)'
2024-08-29 09:39:10.016 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7126/api/Auths/forgot-password?username=vedat.aliu2 - 200 290 application/json; charset=utf-8 106.5336ms
2024-08-29 09:39:34.094 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7126/api/Auths/reset-password - application/json-patch+json 287
2024-08-29 09:39:34.108 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.ResetPassword (BookInventory)'
2024-08-29 09:39:34.115 +02:00 [INF] Route matched with {action = "ResetPassword", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BookInventory.DataAccessLayer.Entities.ServiceResponse`1[System.String]]] ResetPassword(BookInventory.BusinessLogicAcessLayer.Models.AccountModels.PasswordResetModel) on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 09:39:34.158 +02:00 [INF] Executed DbCommand (31ms) [Parameters=[@__request_Token_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username]
FROM [Users] AS [u]
WHERE [u].[PasswordResetToken] = @__request_Token_0
2024-08-29 09:39:34.167 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p4='?' (DbType = Int32), @p0='?' (Size = 8000) (DbType = Binary), @p1='?' (Size = 4000), @p2='?' (Size = 8000) (DbType = Binary), @p3='?' (DbType = DateTime2)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [PasswordHash] = @p0, [PasswordResetToken] = @p1, [PasswordSalt] = @p2, [ResetTokenExpires] = @p3
OUTPUT 1
WHERE [Id] = @p4;
2024-08-29 09:39:34.170 +02:00 [INF] Executing OkObjectResult, writing value of type 'BookInventory.DataAccessLayer.Entities.ServiceResponse`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-29 09:39:34.172 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.ResetPassword (BookInventory) in 53.9012ms
2024-08-29 09:39:34.180 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.ResetPassword (BookInventory)'
2024-08-29 09:39:34.181 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7126/api/Auths/reset-password - 200 69 application/json; charset=utf-8 86.4085ms
2024-08-29 09:39:45.896 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7126/api/Auths/login - application/json-patch+json 57
2024-08-29 09:39:45.901 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory)'
2024-08-29 09:39:45.903 +02:00 [INF] Route matched with {action = "Login", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BookInventory.DataAccessLayer.Entities.ServiceResponse`1[System.Int32]]] Login(BookInventory.BusinessLogicAcessLayer.Models.AccountModels.UserLoginModel) on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 09:39:45.939 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__ToLower_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[PasswordHash], [t].[PasswordResetToken], [t].[PasswordSalt], [t].[ResetTokenExpires], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username]
    FROM [Users] AS [u]
    WHERE LOWER([u].[Username]) = @__ToLower_0
) AS [t]
LEFT JOIN (
    SELECT [r].[UserId], [r].[RoleId], [r0].[Id], [r0].[Name]
    FROM [RoleUsers] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2024-08-29 09:39:45.954 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__roleIds_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoleId], [r].[PermissionId], [p].[Id], [p].[Name]
FROM [RolePermissions] AS [r]
INNER JOIN [Permissions] AS [p] ON [r].[PermissionId] = [p].[Id]
WHERE [r].[RoleId] IN (
    SELECT [r0].[value]
    FROM OPENJSON(@__roleIds_0) WITH ([value] int '$') AS [r0]
)
2024-08-29 09:39:45.960 +02:00 [INF] Executing OkObjectResult, writing value of type 'BookInventory.DataAccessLayer.Entities.ServiceResponse`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-29 09:39:45.962 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory) in 31.9824ms
2024-08-29 09:39:45.964 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory)'
2024-08-29 09:39:45.966 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7126/api/Auths/login - 200 406 application/json; charset=utf-8 69.9401ms
2024-08-29 09:39:51.946 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7126/api/Auths/login - application/json-patch+json 58
2024-08-29 09:39:51.950 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory)'
2024-08-29 09:39:51.951 +02:00 [INF] Route matched with {action = "Login", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BookInventory.DataAccessLayer.Entities.ServiceResponse`1[System.Int32]]] Login(BookInventory.BusinessLogicAcessLayer.Models.AccountModels.UserLoginModel) on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 09:39:51.960 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__ToLower_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[PasswordHash], [t].[PasswordResetToken], [t].[PasswordSalt], [t].[ResetTokenExpires], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username]
    FROM [Users] AS [u]
    WHERE LOWER([u].[Username]) = @__ToLower_0
) AS [t]
LEFT JOIN (
    SELECT [r].[UserId], [r].[RoleId], [r0].[Id], [r0].[Name]
    FROM [RoleUsers] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2024-08-29 09:39:51.968 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'BookInventory.DataAccessLayer.Entities.ServiceResponse`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-29 09:39:51.971 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory) in 18.0697ms
2024-08-29 09:39:51.974 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory)'
2024-08-29 09:39:51.976 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7126/api/Auths/login - 400 57 application/json; charset=utf-8 29.8694ms
2024-08-29 09:39:56.369 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7126/api/Auths/login - application/json-patch+json 57
2024-08-29 09:39:56.375 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory)'
2024-08-29 09:39:56.378 +02:00 [INF] Route matched with {action = "Login", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BookInventory.DataAccessLayer.Entities.ServiceResponse`1[System.Int32]]] Login(BookInventory.BusinessLogicAcessLayer.Models.AccountModels.UserLoginModel) on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 09:39:56.387 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__ToLower_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[PasswordHash], [t].[PasswordResetToken], [t].[PasswordSalt], [t].[ResetTokenExpires], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username]
    FROM [Users] AS [u]
    WHERE LOWER([u].[Username]) = @__ToLower_0
) AS [t]
LEFT JOIN (
    SELECT [r].[UserId], [r].[RoleId], [r0].[Id], [r0].[Name]
    FROM [RoleUsers] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2024-08-29 09:39:56.393 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__roleIds_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoleId], [r].[PermissionId], [p].[Id], [p].[Name]
FROM [RolePermissions] AS [r]
INNER JOIN [Permissions] AS [p] ON [r].[PermissionId] = [p].[Id]
WHERE [r].[RoleId] IN (
    SELECT [r0].[value]
    FROM OPENJSON(@__roleIds_0) WITH ([value] int '$') AS [r0]
)
2024-08-29 09:39:56.396 +02:00 [INF] Executing OkObjectResult, writing value of type 'BookInventory.DataAccessLayer.Entities.ServiceResponse`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-29 09:39:56.397 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory) in 14.204ms
2024-08-29 09:39:56.399 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory)'
2024-08-29 09:39:56.400 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7126/api/Auths/login - 200 406 application/json; charset=utf-8 30.7224ms
2024-08-29 09:42:14.317 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7126/api/Auths/login - application/json-patch+json 61
2024-08-29 09:42:14.326 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory)'
2024-08-29 09:42:14.327 +02:00 [INF] Route matched with {action = "Login", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BookInventory.DataAccessLayer.Entities.ServiceResponse`1[System.Int32]]] Login(BookInventory.BusinessLogicAcessLayer.Models.AccountModels.UserLoginModel) on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 09:42:14.366 +02:00 [INF] Executed DbCommand (31ms) [Parameters=[@__ToLower_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[PasswordHash], [t].[PasswordResetToken], [t].[PasswordSalt], [t].[ResetTokenExpires], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username]
    FROM [Users] AS [u]
    WHERE LOWER([u].[Username]) = @__ToLower_0
) AS [t]
LEFT JOIN (
    SELECT [r].[UserId], [r].[RoleId], [r0].[Id], [r0].[Name]
    FROM [RoleUsers] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2024-08-29 09:42:14.386 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__roleIds_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoleId], [r].[PermissionId], [p].[Id], [p].[Name]
FROM [RolePermissions] AS [r]
INNER JOIN [Permissions] AS [p] ON [r].[PermissionId] = [p].[Id]
WHERE [r].[RoleId] IN (
    SELECT [r0].[value]
    FROM OPENJSON(@__roleIds_0) WITH ([value] int '$') AS [r0]
)
2024-08-29 09:42:14.392 +02:00 [INF] Executing OkObjectResult, writing value of type 'BookInventory.DataAccessLayer.Entities.ServiceResponse`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-29 09:42:14.394 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory) in 61.5582ms
2024-08-29 09:42:14.396 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory)'
2024-08-29 09:42:14.398 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7126/api/Auths/login - 200 818 application/json; charset=utf-8 81.2958ms
2024-08-29 09:45:04.840 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7126/api/Roles/1 - application/json-patch+json 143
2024-08-29 09:45:04.855 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.Updaterole (BookInventory)'
2024-08-29 09:45:04.859 +02:00 [INF] Route matched with {action = "Updaterole", controller = "Roles"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Updaterole(Int32, BookInventory.BusinessLogicAcessLayer.Models.RoleModel.RoleUpdateModel) on controller BookInventory.APIAccessLayer.Controllers.RolesController (BookInventory).
2024-08-29 09:45:04.978 +02:00 [INF] Executed DbCommand (99ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Name], [r0].[RoleId], [r0].[PermissionId]
FROM (
    SELECT TOP(1) [r].[Id], [r].[Name]
    FROM [Roles] AS [r]
    WHERE [r].[Id] = @__id_0
) AS [t]
LEFT JOIN [RolePermissions] AS [r0] ON [t].[Id] = [r0].[RoleId]
ORDER BY [t].[Id], [r0].[RoleId]
2024-08-29 09:45:05.058 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p3='?' (DbType = Int32), @p2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [RolePermissions]
OUTPUT 1
WHERE [PermissionId] = @p0 AND [RoleId] = @p1;
UPDATE [Roles] SET [Name] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2024-08-29 09:45:05.076 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-08-29 09:45:05.077 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.RolesController.Updaterole (BookInventory) in 215.6195ms
2024-08-29 09:45:05.079 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.Updaterole (BookInventory)'
2024-08-29 09:45:05.081 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7126/api/Roles/1 - 200 null text/plain; charset=utf-8 242.6425ms
2024-08-29 09:45:11.463 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/api/Roles/all - null null
2024-08-29 09:45:11.469 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.GetAll (BookInventory)'
2024-08-29 09:45:11.475 +02:00 [INF] Route matched with {action = "GetAll", controller = "Roles"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller BookInventory.APIAccessLayer.Controllers.RolesController (BookInventory).
2024-08-29 09:45:11.499 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Name], [t].[RoleId], [t].[PermissionId], [t].[Id], [t].[Name]
FROM [Roles] AS [r]
LEFT JOIN (
    SELECT [r0].[RoleId], [r0].[PermissionId], [p].[Id], [p].[Name]
    FROM [RolePermissions] AS [r0]
    INNER JOIN [Permissions] AS [p] ON [r0].[PermissionId] = [p].[Id]
) AS [t] ON [r].[Id] = [t].[RoleId]
ORDER BY [r].[Id], [t].[RoleId], [t].[PermissionId]
2024-08-29 09:45:11.507 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookInventory.BusinessLogicAcessLayer.Models.RoleModel.RoleGetModel, BookInventory, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 09:45:11.510 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.RolesController.GetAll (BookInventory) in 32.3859ms
2024-08-29 09:45:11.520 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.GetAll (BookInventory)'
2024-08-29 09:45:11.522 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/api/Roles/all - 200 1315 application/json; charset=utf-8 59.6642ms
2024-08-29 09:45:25.037 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7126/api/Roles/1 - application/json-patch+json 143
2024-08-29 09:45:25.043 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.Updaterole (BookInventory)'
2024-08-29 09:45:25.046 +02:00 [INF] Route matched with {action = "Updaterole", controller = "Roles"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Updaterole(Int32, BookInventory.BusinessLogicAcessLayer.Models.RoleModel.RoleUpdateModel) on controller BookInventory.APIAccessLayer.Controllers.RolesController (BookInventory).
2024-08-29 09:45:25.057 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Name], [r0].[RoleId], [r0].[PermissionId]
FROM (
    SELECT TOP(1) [r].[Id], [r].[Name]
    FROM [Roles] AS [r]
    WHERE [r].[Id] = @__id_0
) AS [t]
LEFT JOIN [RolePermissions] AS [r0] ON [t].[Id] = [r0].[RoleId]
ORDER BY [t].[Id], [r0].[RoleId]
2024-08-29 09:45:25.069 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-08-29 09:45:25.071 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.RolesController.Updaterole (BookInventory) in 21.0534ms
2024-08-29 09:45:25.073 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.Updaterole (BookInventory)'
2024-08-29 09:45:25.074 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7126/api/Roles/1 - 200 null text/plain; charset=utf-8 37.2486ms
2024-08-29 09:47:04.656 +02:00 [INF] Request starting HTTP/2 DELETE https://localhost:7126/api/Roles/2 - null null
2024-08-29 09:47:04.687 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.DeleteRole (BookInventory)'
2024-08-29 09:47:04.690 +02:00 [INF] Route matched with {action = "DeleteRole", controller = "Roles"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteRole(Int32) on controller BookInventory.APIAccessLayer.Controllers.RolesController (BookInventory).
2024-08-29 09:47:04.726 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Name]
FROM [Roles] AS [r]
WHERE [r].[Id] = @__p_0
2024-08-29 09:47:04.780 +02:00 [INF] Executed DbCommand (46ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Roles]
OUTPUT 1
WHERE [Id] = @p0;
2024-08-29 09:47:04.840 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'BookInventory.DataAccess.Database.DatabaseContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_RoleUsers_Roles_RoleId". The conflict occurred in database "BookInventory", table "dbo.RoleUsers", column 'RoleId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:2f4970fc-c3bb-4937-bd52-eae05e88cdc6
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_RoleUsers_Roles_RoleId". The conflict occurred in database "BookInventory", table "dbo.RoleUsers", column 'RoleId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:2f4970fc-c3bb-4937-bd52-eae05e88cdc6
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-08-29 09:47:05.006 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.RolesController.DeleteRole (BookInventory) in 311.9554ms
2024-08-29 09:47:05.009 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.DeleteRole (BookInventory)'
2024-08-29 09:47:05.013 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_RoleUsers_Roles_RoleId". The conflict occurred in database "BookInventory", table "dbo.RoleUsers", column 'RoleId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:2f4970fc-c3bb-4937-bd52-eae05e88cdc6
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at BookInventory.BusinessLogicAcessLayer.Services.RoleService.RoleService.DeleteRole(Int32 id) in C:\Users\lkelmendi.PC-PR05\Desktop\BookInventory\BookInventory\BusinessLogicAcessLayer\Services\RoleService\RoleService.cs:line 59
   at BookInventory.APIAccessLayer.Controllers.RolesController.DeleteRole(Int32 id) in C:\Users\lkelmendi.PC-PR05\Desktop\BookInventory\BookInventory\APIAccessLayer\Controllers\RolesController.cs:line 62
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-08-29 09:47:05.082 +02:00 [INF] Request finished HTTP/2 DELETE https://localhost:7126/api/Roles/2 - 500 null text/plain; charset=utf-8 426.4061ms
2024-08-29 09:47:27.679 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7126/api/Roles/2 - application/json-patch+json 81
2024-08-29 09:47:27.713 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.Updaterole (BookInventory)'
2024-08-29 09:47:27.715 +02:00 [INF] Route matched with {action = "Updaterole", controller = "Roles"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Updaterole(Int32, BookInventory.BusinessLogicAcessLayer.Models.RoleModel.RoleUpdateModel) on controller BookInventory.APIAccessLayer.Controllers.RolesController (BookInventory).
2024-08-29 09:47:27.724 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Name], [r0].[RoleId], [r0].[PermissionId]
FROM (
    SELECT TOP(1) [r].[Id], [r].[Name]
    FROM [Roles] AS [r]
    WHERE [r].[Id] = @__id_0
) AS [t]
LEFT JOIN [RolePermissions] AS [r0] ON [t].[Id] = [r0].[RoleId]
ORDER BY [t].[Id], [r0].[RoleId]
2024-08-29 09:47:27.736 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'BookInventory.DataAccess.Database.DatabaseContext'.
System.InvalidOperationException: The value of 'RolePermission.PermissionId' is unknown when attempting to save changes. This is because the property is also part of a foreign key for which the principal entity in the relationship is not known.
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.PrepareToSave()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.GetEntriesToSave(Boolean cascadeChanges)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
System.InvalidOperationException: The value of 'RolePermission.PermissionId' is unknown when attempting to save changes. This is because the property is also part of a foreign key for which the principal entity in the relationship is not known.
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.PrepareToSave()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.GetEntriesToSave(Boolean cascadeChanges)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-08-29 09:47:27.830 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.RolesController.Updaterole (BookInventory) in 111.2394ms
2024-08-29 09:47:27.833 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.Updaterole (BookInventory)'
2024-08-29 09:47:27.835 +02:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: The value of 'RolePermission.PermissionId' is unknown when attempting to save changes. This is because the property is also part of a foreign key for which the principal entity in the relationship is not known.
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.InternalEntityEntry.PrepareToSave()
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.GetEntriesToSave(Boolean cascadeChanges)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at BookInventory.BusinessLogicAcessLayer.Services.RoleService.RoleService.UpdateRole(Int32 id, RoleUpdateModel model) in C:\Users\lkelmendi.PC-PR05\Desktop\BookInventory\BookInventory\BusinessLogicAcessLayer\Services\RoleService\RoleService.cs:line 111
   at BookInventory.APIAccessLayer.Controllers.RolesController.Updaterole(Int32 id, RoleUpdateModel role) in C:\Users\lkelmendi.PC-PR05\Desktop\BookInventory\BookInventory\APIAccessLayer\Controllers\RolesController.cs:line 53
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-08-29 09:47:27.853 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7126/api/Roles/2 - 500 null text/plain; charset=utf-8 174.1495ms
2024-08-29 09:47:43.743 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/api/Publishers/getAllPublishers - null null
2024-08-29 09:47:43.766 +02:00 [INF] Executing endpoint 'PublisherInventory.APIAccessLayer.Controllers.PublishersController.GetAllPublishers (BookInventory)'
2024-08-29 09:47:43.776 +02:00 [INF] Route matched with {action = "GetAllPublishers", controller = "Publishers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllPublishers() on controller PublisherInventory.APIAccessLayer.Controllers.PublishersController (BookInventory).
2024-08-29 09:47:43.784 +02:00 [INF] API call to get all publishers started.
2024-08-29 09:47:43.807 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Address], [p].[AuthorId], [p].[Name], [p].[Website], [a].[Id], [a].[DateOfBirth], [a].[EmailAddress], [a].[ImageUrl], [a].[Name], [a].[Nationality]
FROM [Publishers] AS [p]
INNER JOIN [Authors] AS [a] ON [p].[AuthorId] = [a].[Id]
2024-08-29 09:47:43.814 +02:00 [INF] Successfully retrieved all publishers.
2024-08-29 09:47:43.816 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookInventory.BusinessLogicAcessLayer.Models.PulisherModels.PublisherGetModel, BookInventory, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 09:47:43.819 +02:00 [INF] Executed action PublisherInventory.APIAccessLayer.Controllers.PublishersController.GetAllPublishers (BookInventory) in 37.1391ms
2024-08-29 09:47:43.821 +02:00 [INF] Executed endpoint 'PublisherInventory.APIAccessLayer.Controllers.PublishersController.GetAllPublishers (BookInventory)'
2024-08-29 09:47:43.823 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/api/Publishers/getAllPublishers - 200 1049 application/json; charset=utf-8 80.3477ms
2024-08-29 09:47:48.289 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/api/Permissions/all - null null
2024-08-29 09:47:48.317 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.PermissionsController.GetPermissions (BookInventory)'
2024-08-29 09:47:48.322 +02:00 [INF] Route matched with {action = "GetPermissions", controller = "Permissions"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPermissions() on controller BookInventory.APIAccessLayer.Controllers.PermissionsController (BookInventory).
2024-08-29 09:47:48.352 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Name], [t].[RoleId], [t].[PermissionId], [t].[Id], [t].[Name]
FROM [Permissions] AS [p]
LEFT JOIN (
    SELECT [r].[RoleId], [r].[PermissionId], [r0].[Id], [r0].[Name]
    FROM [RolePermissions] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
) AS [t] ON [p].[Id] = [t].[PermissionId]
ORDER BY [p].[Id], [t].[RoleId], [t].[PermissionId]
2024-08-29 09:47:48.362 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookInventory.BusinessLogicAcessLayer.Models.PermissionModels.PermissionGetModel, BookInventory, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 09:47:48.364 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.PermissionsController.GetPermissions (BookInventory) in 40.0776ms
2024-08-29 09:47:48.365 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.PermissionsController.GetPermissions (BookInventory)'
2024-08-29 09:47:48.366 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/api/Permissions/all - 200 2655 application/json; charset=utf-8 77.1816ms
2024-08-29 09:48:50.368 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7126/api/Permissions/24 - application/json-patch+json 57
2024-08-29 09:48:50.378 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.PermissionsController.UpdatePermission (BookInventory)'
2024-08-29 09:48:50.385 +02:00 [INF] Route matched with {action = "UpdatePermission", controller = "Permissions"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdatePermission(BookInventory.BusinessLogicAcessLayer.Models.PermissionModels.PermissionUpdateModel, Int32) on controller BookInventory.APIAccessLayer.Controllers.PermissionsController (BookInventory).
2024-08-29 09:48:50.410 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Name], [r].[RoleId], [r].[PermissionId]
FROM (
    SELECT TOP(1) [p].[Id], [p].[Name]
    FROM [Permissions] AS [p]
    WHERE [p].[Id] = @__id_0
) AS [t]
LEFT JOIN [RolePermissions] AS [r] ON [t].[Id] = [r].[PermissionId]
ORDER BY [t].[Id], [r].[RoleId]
2024-08-29 09:48:50.432 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
UPDATE [Permissions] SET [Name] = @p0
OUTPUT 1
WHERE [Id] = @p1;
INSERT INTO [RolePermissions] ([PermissionId], [RoleId])
VALUES (@p2, @p3),
(@p4, @p5);
2024-08-29 09:48:50.437 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-08-29 09:48:50.438 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.PermissionsController.UpdatePermission (BookInventory) in 50.247ms
2024-08-29 09:48:50.448 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.PermissionsController.UpdatePermission (BookInventory)'
2024-08-29 09:48:50.451 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7126/api/Permissions/24 - 200 null text/plain; charset=utf-8 85.217ms
2024-08-29 09:48:54.469 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/api/Permissions/all - null null
2024-08-29 09:48:54.473 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.PermissionsController.GetPermissions (BookInventory)'
2024-08-29 09:48:54.474 +02:00 [INF] Route matched with {action = "GetPermissions", controller = "Permissions"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPermissions() on controller BookInventory.APIAccessLayer.Controllers.PermissionsController (BookInventory).
2024-08-29 09:48:54.488 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Name], [t].[RoleId], [t].[PermissionId], [t].[Id], [t].[Name]
FROM [Permissions] AS [p]
LEFT JOIN (
    SELECT [r].[RoleId], [r].[PermissionId], [r0].[Id], [r0].[Name]
    FROM [RolePermissions] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
) AS [t] ON [p].[Id] = [t].[PermissionId]
ORDER BY [p].[Id], [t].[RoleId], [t].[PermissionId]
2024-08-29 09:48:54.496 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookInventory.BusinessLogicAcessLayer.Models.PermissionModels.PermissionGetModel, BookInventory, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 09:48:54.500 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.PermissionsController.GetPermissions (BookInventory) in 24.1959ms
2024-08-29 09:48:54.502 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.PermissionsController.GetPermissions (BookInventory)'
2024-08-29 09:48:54.504 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/api/Permissions/all - 200 2778 application/json; charset=utf-8 34.9816ms
2024-08-29 09:50:34.433 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7126/api/Roles/2 - application/json-patch+json 114
2024-08-29 09:50:34.438 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.Updaterole (BookInventory)'
2024-08-29 09:50:34.440 +02:00 [INF] Route matched with {action = "Updaterole", controller = "Roles"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Updaterole(Int32, BookInventory.BusinessLogicAcessLayer.Models.RoleModel.RoleUpdateModel) on controller BookInventory.APIAccessLayer.Controllers.RolesController (BookInventory).
2024-08-29 09:50:34.471 +02:00 [INF] Executed DbCommand (25ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Name], [r0].[RoleId], [r0].[PermissionId]
FROM (
    SELECT TOP(1) [r].[Id], [r].[Name]
    FROM [Roles] AS [r]
    WHERE [r].[Id] = @__id_0
) AS [t]
LEFT JOIN [RolePermissions] AS [r0] ON [t].[Id] = [r0].[RoleId]
ORDER BY [t].[Id], [r0].[RoleId]
2024-08-29 09:50:34.486 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (DbType = Int32), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = Int32), @p21='?' (DbType = Int32), @p20='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RolePermissions] ([PermissionId], [RoleId])
VALUES (@p0, @p1),
(@p2, @p3),
(@p4, @p5),
(@p6, @p7),
(@p8, @p9),
(@p10, @p11),
(@p12, @p13),
(@p14, @p15),
(@p16, @p17),
(@p18, @p19);
UPDATE [Roles] SET [Name] = @p20
OUTPUT 1
WHERE [Id] = @p21;
2024-08-29 09:50:34.492 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-08-29 09:50:34.494 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.RolesController.Updaterole (BookInventory) in 49.4287ms
2024-08-29 09:50:34.502 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.Updaterole (BookInventory)'
2024-08-29 09:50:34.503 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7126/api/Roles/2 - 200 null text/plain; charset=utf-8 70.323ms
2024-08-29 09:50:37.793 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/api/Roles/all - null null
2024-08-29 09:50:37.799 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.GetAll (BookInventory)'
2024-08-29 09:50:37.801 +02:00 [INF] Route matched with {action = "GetAll", controller = "Roles"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller BookInventory.APIAccessLayer.Controllers.RolesController (BookInventory).
2024-08-29 09:50:37.815 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Name], [t].[RoleId], [t].[PermissionId], [t].[Id], [t].[Name]
FROM [Roles] AS [r]
LEFT JOIN (
    SELECT [r0].[RoleId], [r0].[PermissionId], [p].[Id], [p].[Name]
    FROM [RolePermissions] AS [r0]
    INNER JOIN [Permissions] AS [p] ON [r0].[PermissionId] = [p].[Id]
) AS [t] ON [r].[Id] = [t].[RoleId]
ORDER BY [r].[Id], [t].[RoleId], [t].[PermissionId]
2024-08-29 09:50:37.819 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookInventory.BusinessLogicAcessLayer.Models.RoleModel.RoleGetModel, BookInventory, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 09:50:37.820 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.RolesController.GetAll (BookInventory) in 13.1106ms
2024-08-29 09:50:37.823 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.GetAll (BookInventory)'
2024-08-29 09:50:37.825 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/api/Roles/all - 200 1850 application/json; charset=utf-8 31.8799ms
2024-08-29 09:51:33.568 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7126/api/Auths/register - application/json-patch+json 63
2024-08-29 09:51:33.577 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Register (BookInventory)'
2024-08-29 09:51:33.579 +02:00 [INF] Route matched with {action = "Register", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BookInventory.DataAccessLayer.Entities.ServiceResponse`1[System.Int32]]] Register(BookInventory.BusinessLogicAcessLayer.Models.AccountModels.UserRegistrationModel) on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 09:51:33.604 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@__ToLower_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE LOWER([u].[Username]) = @__ToLower_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-08-29 09:51:33.612 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 8000) (DbType = Binary), @p1='?' (Size = 4000), @p2='?' (Size = 8000) (DbType = Binary), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([PasswordHash], [PasswordResetToken], [PasswordSalt], [ResetTokenExpires], [Username])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-08-29 09:51:33.615 +02:00 [INF] Executing OkObjectResult, writing value of type 'BookInventory.DataAccessLayer.Entities.ServiceResponse`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-29 09:51:33.616 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.Register (BookInventory) in 33.5379ms
2024-08-29 09:51:33.628 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Register (BookInventory)'
2024-08-29 09:51:33.630 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7126/api/Auths/register - 200 38 application/json; charset=utf-8 63.9942ms
2024-08-29 09:51:45.653 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7126/api/Auths/login - application/json-patch+json 63
2024-08-29 09:51:45.658 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory)'
2024-08-29 09:51:45.677 +02:00 [INF] Route matched with {action = "Login", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BookInventory.DataAccessLayer.Entities.ServiceResponse`1[System.Int32]]] Login(BookInventory.BusinessLogicAcessLayer.Models.AccountModels.UserLoginModel) on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 09:51:45.699 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__ToLower_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[PasswordHash], [t].[PasswordResetToken], [t].[PasswordSalt], [t].[ResetTokenExpires], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username]
    FROM [Users] AS [u]
    WHERE LOWER([u].[Username]) = @__ToLower_0
) AS [t]
LEFT JOIN (
    SELECT [r].[UserId], [r].[RoleId], [r0].[Id], [r0].[Name]
    FROM [RoleUsers] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2024-08-29 09:51:45.713 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__roleIds_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoleId], [r].[PermissionId], [p].[Id], [p].[Name]
FROM [RolePermissions] AS [r]
INNER JOIN [Permissions] AS [p] ON [r].[PermissionId] = [p].[Id]
WHERE [r].[RoleId] IN (
    SELECT [r0].[value]
    FROM OPENJSON(@__roleIds_0) WITH ([value] int '$') AS [r0]
)
2024-08-29 09:51:45.717 +02:00 [INF] Executing OkObjectResult, writing value of type 'BookInventory.DataAccessLayer.Entities.ServiceResponse`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-29 09:51:45.718 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory) in 31.219ms
2024-08-29 09:51:45.720 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory)'
2024-08-29 09:51:45.722 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7126/api/Auths/login - 200 293 application/json; charset=utf-8 70.5949ms
2024-08-29 09:52:17.013 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7126/api/Auths/register - application/json-patch+json 59
2024-08-29 09:52:17.026 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Register (BookInventory)'
2024-08-29 09:52:17.027 +02:00 [INF] Route matched with {action = "Register", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BookInventory.DataAccessLayer.Entities.ServiceResponse`1[System.Int32]]] Register(BookInventory.BusinessLogicAcessLayer.Models.AccountModels.UserRegistrationModel) on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 09:52:17.040 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__ToLower_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE LOWER([u].[Username]) = @__ToLower_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-08-29 09:52:17.052 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@p0='?' (Size = 8000) (DbType = Binary), @p1='?' (Size = 4000), @p2='?' (Size = 8000) (DbType = Binary), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([PasswordHash], [PasswordResetToken], [PasswordSalt], [ResetTokenExpires], [Username])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-08-29 09:52:17.057 +02:00 [INF] Executing OkObjectResult, writing value of type 'BookInventory.DataAccessLayer.Entities.ServiceResponse`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-29 09:52:17.058 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.Register (BookInventory) in 25.6389ms
2024-08-29 09:52:17.059 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Register (BookInventory)'
2024-08-29 09:52:17.060 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7126/api/Auths/register - 200 38 application/json; charset=utf-8 47.8029ms
2024-08-29 09:52:24.256 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7126/api/Auths/login - application/json-patch+json 59
2024-08-29 09:52:24.259 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory)'
2024-08-29 09:52:24.259 +02:00 [INF] Route matched with {action = "Login", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BookInventory.DataAccessLayer.Entities.ServiceResponse`1[System.Int32]]] Login(BookInventory.BusinessLogicAcessLayer.Models.AccountModels.UserLoginModel) on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 09:52:24.280 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@__ToLower_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[PasswordHash], [t].[PasswordResetToken], [t].[PasswordSalt], [t].[ResetTokenExpires], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username]
    FROM [Users] AS [u]
    WHERE LOWER([u].[Username]) = @__ToLower_0
) AS [t]
LEFT JOIN (
    SELECT [r].[UserId], [r].[RoleId], [r0].[Id], [r0].[Name]
    FROM [RoleUsers] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2024-08-29 09:52:24.292 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__roleIds_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoleId], [r].[PermissionId], [p].[Id], [p].[Name]
FROM [RolePermissions] AS [r]
INNER JOIN [Permissions] AS [p] ON [r].[PermissionId] = [p].[Id]
WHERE [r].[RoleId] IN (
    SELECT [r0].[value]
    FROM OPENJSON(@__roleIds_0) WITH ([value] int '$') AS [r0]
)
2024-08-29 09:52:24.296 +02:00 [INF] Executing OkObjectResult, writing value of type 'BookInventory.DataAccessLayer.Entities.ServiceResponse`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-29 09:52:24.297 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory) in 36.0886ms
2024-08-29 09:52:24.299 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory)'
2024-08-29 09:52:24.300 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7126/api/Auths/login - 200 289 application/json; charset=utf-8 43.9641ms
2024-08-29 09:52:43.122 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7126/api/Auths/register - application/json-patch+json 60
2024-08-29 09:52:43.127 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Register (BookInventory)'
2024-08-29 09:52:43.129 +02:00 [INF] Route matched with {action = "Register", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BookInventory.DataAccessLayer.Entities.ServiceResponse`1[System.Int32]]] Register(BookInventory.BusinessLogicAcessLayer.Models.AccountModels.UserRegistrationModel) on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 09:52:43.140 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__ToLower_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE LOWER([u].[Username]) = @__ToLower_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-08-29 09:52:43.148 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 8000) (DbType = Binary), @p1='?' (Size = 4000), @p2='?' (Size = 8000) (DbType = Binary), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([PasswordHash], [PasswordResetToken], [PasswordSalt], [ResetTokenExpires], [Username])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-08-29 09:52:43.150 +02:00 [INF] Executing OkObjectResult, writing value of type 'BookInventory.DataAccessLayer.Entities.ServiceResponse`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-29 09:52:43.153 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.Register (BookInventory) in 19.3206ms
2024-08-29 09:52:43.155 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Register (BookInventory)'
2024-08-29 09:52:43.156 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7126/api/Auths/register - 200 38 application/json; charset=utf-8 34.0361ms
2024-08-29 09:52:55.298 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7126/api/Auths/login - application/json-patch+json 60
2024-08-29 09:52:55.303 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory)'
2024-08-29 09:52:55.304 +02:00 [INF] Route matched with {action = "Login", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BookInventory.DataAccessLayer.Entities.ServiceResponse`1[System.Int32]]] Login(BookInventory.BusinessLogicAcessLayer.Models.AccountModels.UserLoginModel) on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 09:52:55.336 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__ToLower_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[PasswordHash], [t].[PasswordResetToken], [t].[PasswordSalt], [t].[ResetTokenExpires], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username]
    FROM [Users] AS [u]
    WHERE LOWER([u].[Username]) = @__ToLower_0
) AS [t]
LEFT JOIN (
    SELECT [r].[UserId], [r].[RoleId], [r0].[Id], [r0].[Name]
    FROM [RoleUsers] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2024-08-29 09:52:55.343 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__roleIds_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoleId], [r].[PermissionId], [p].[Id], [p].[Name]
FROM [RolePermissions] AS [r]
INNER JOIN [Permissions] AS [p] ON [r].[PermissionId] = [p].[Id]
WHERE [r].[RoleId] IN (
    SELECT [r0].[value]
    FROM OPENJSON(@__roleIds_0) WITH ([value] int '$') AS [r0]
)
2024-08-29 09:52:55.348 +02:00 [INF] Executing OkObjectResult, writing value of type 'BookInventory.DataAccessLayer.Entities.ServiceResponse`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-29 09:52:55.349 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory) in 22.8971ms
2024-08-29 09:52:55.351 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory)'
2024-08-29 09:52:55.353 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7126/api/Auths/login - 200 289 application/json; charset=utf-8 55.3177ms
2024-08-29 09:54:29.363 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7126/api/Auths/register - application/json-patch+json 61
2024-08-29 09:54:29.374 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Register (BookInventory)'
2024-08-29 09:54:29.376 +02:00 [INF] Route matched with {action = "Register", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BookInventory.DataAccessLayer.Entities.ServiceResponse`1[System.Int32]]] Register(BookInventory.BusinessLogicAcessLayer.Models.AccountModels.UserRegistrationModel) on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 09:54:29.395 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@__ToLower_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE LOWER([u].[Username]) = @__ToLower_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-08-29 09:54:29.406 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@p0='?' (Size = 8000) (DbType = Binary), @p1='?' (Size = 4000), @p2='?' (Size = 8000) (DbType = Binary), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([PasswordHash], [PasswordResetToken], [PasswordSalt], [ResetTokenExpires], [Username])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-08-29 09:54:29.409 +02:00 [INF] Executing OkObjectResult, writing value of type 'BookInventory.DataAccessLayer.Entities.ServiceResponse`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-29 09:54:29.413 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.Register (BookInventory) in 33.0596ms
2024-08-29 09:54:29.425 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Register (BookInventory)'
2024-08-29 09:54:29.426 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7126/api/Auths/register - 200 38 application/json; charset=utf-8 63.6063ms
2024-08-29 09:54:56.460 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7126/api/Auths/register - application/json-patch+json 64
2024-08-29 09:54:56.464 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Register (BookInventory)'
2024-08-29 09:54:56.484 +02:00 [INF] Route matched with {action = "Register", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BookInventory.DataAccessLayer.Entities.ServiceResponse`1[System.Int32]]] Register(BookInventory.BusinessLogicAcessLayer.Models.AccountModels.UserRegistrationModel) on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 09:54:56.501 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__ToLower_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE LOWER([u].[Username]) = @__ToLower_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-08-29 09:54:56.518 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@p0='?' (Size = 8000) (DbType = Binary), @p1='?' (Size = 4000), @p2='?' (Size = 8000) (DbType = Binary), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([PasswordHash], [PasswordResetToken], [PasswordSalt], [ResetTokenExpires], [Username])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-08-29 09:54:56.522 +02:00 [INF] Executing OkObjectResult, writing value of type 'BookInventory.DataAccessLayer.Entities.ServiceResponse`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-29 09:54:56.523 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.Register (BookInventory) in 28.8866ms
2024-08-29 09:54:56.530 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Register (BookInventory)'
2024-08-29 09:54:56.532 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7126/api/Auths/register - 200 38 application/json; charset=utf-8 72.6157ms
2024-08-29 09:55:06.696 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7126/api/Auths/login - application/json-patch+json 67
2024-08-29 09:55:06.702 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory)'
2024-08-29 09:55:06.703 +02:00 [INF] Route matched with {action = "Login", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BookInventory.DataAccessLayer.Entities.ServiceResponse`1[System.Int32]]] Login(BookInventory.BusinessLogicAcessLayer.Models.AccountModels.UserLoginModel) on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 09:55:06.720 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__ToLower_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[PasswordHash], [t].[PasswordResetToken], [t].[PasswordSalt], [t].[ResetTokenExpires], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username]
    FROM [Users] AS [u]
    WHERE LOWER([u].[Username]) = @__ToLower_0
) AS [t]
LEFT JOIN (
    SELECT [r].[UserId], [r].[RoleId], [r0].[Id], [r0].[Name]
    FROM [RoleUsers] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2024-08-29 09:55:06.725 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'BookInventory.DataAccessLayer.Entities.ServiceResponse`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-29 09:55:06.727 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory) in 20.2639ms
2024-08-29 09:55:06.729 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory)'
2024-08-29 09:55:06.730 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7126/api/Auths/login - 400 57 application/json; charset=utf-8 34.1264ms
2024-08-29 09:55:14.177 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7126/api/Auths/login - application/json-patch+json 64
2024-08-29 09:55:14.181 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory)'
2024-08-29 09:55:14.182 +02:00 [INF] Route matched with {action = "Login", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BookInventory.DataAccessLayer.Entities.ServiceResponse`1[System.Int32]]] Login(BookInventory.BusinessLogicAcessLayer.Models.AccountModels.UserLoginModel) on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 09:55:14.213 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__ToLower_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[PasswordHash], [t].[PasswordResetToken], [t].[PasswordSalt], [t].[ResetTokenExpires], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username]
    FROM [Users] AS [u]
    WHERE LOWER([u].[Username]) = @__ToLower_0
) AS [t]
LEFT JOIN (
    SELECT [r].[UserId], [r].[RoleId], [r0].[Id], [r0].[Name]
    FROM [RoleUsers] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2024-08-29 09:55:14.226 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__roleIds_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoleId], [r].[PermissionId], [p].[Id], [p].[Name]
FROM [RolePermissions] AS [r]
INNER JOIN [Permissions] AS [p] ON [r].[PermissionId] = [p].[Id]
WHERE [r].[RoleId] IN (
    SELECT [r0].[value]
    FROM OPENJSON(@__roleIds_0) WITH ([value] int '$') AS [r0]
)
2024-08-29 09:55:14.232 +02:00 [INF] Executing OkObjectResult, writing value of type 'BookInventory.DataAccessLayer.Entities.ServiceResponse`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-29 09:55:14.235 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory) in 30.5463ms
2024-08-29 09:55:14.238 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory)'
2024-08-29 09:55:14.239 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7126/api/Auths/login - 200 298 application/json; charset=utf-8 62.0999ms
2024-08-29 09:55:47.484 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7126/api/Auths/change-password - application/json-patch+json 102
2024-08-29 09:55:47.496 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.ChangePasswordd (BookInventory)'
2024-08-29 09:55:47.500 +02:00 [INF] Route matched with {action = "ChangePasswordd", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ChangePasswordd(BookInventory.BusinessLogicAcessLayer.Models.AccountModels.PasswordChangeModel) on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 09:55:47.510 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__ToLower_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username]
FROM [Users] AS [u]
WHERE LOWER([u].[Username]) = @__ToLower_0
2024-08-29 09:55:47.520 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p5='?' (DbType = Int32), @p0='?' (Size = 8000) (DbType = Binary), @p1='?' (Size = 4000), @p2='?' (Size = 8000) (DbType = Binary), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [PasswordHash] = @p0, [PasswordResetToken] = @p1, [PasswordSalt] = @p2, [ResetTokenExpires] = @p3, [Username] = @p4
OUTPUT 1
WHERE [Id] = @p5;
2024-08-29 09:55:47.523 +02:00 [INF] Executing OkObjectResult, writing value of type 'BookInventory.DataAccessLayer.Entities.ServiceResponse`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-29 09:55:47.525 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.ChangePasswordd (BookInventory) in 22.7986ms
2024-08-29 09:55:47.527 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.ChangePasswordd (BookInventory)'
2024-08-29 09:55:47.528 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7126/api/Auths/change-password - 200 68 application/json; charset=utf-8 44.8877ms
2024-08-29 09:56:45.769 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7126/api/Auths/register - application/json-patch+json 59
2024-08-29 09:56:45.778 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Register (BookInventory)'
2024-08-29 09:56:45.783 +02:00 [INF] Route matched with {action = "Register", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BookInventory.DataAccessLayer.Entities.ServiceResponse`1[System.Int32]]] Register(BookInventory.BusinessLogicAcessLayer.Models.AccountModels.UserRegistrationModel) on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 09:56:45.797 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__ToLower_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE LOWER([u].[Username]) = @__ToLower_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-08-29 09:56:45.804 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 8000) (DbType = Binary), @p1='?' (Size = 4000), @p2='?' (Size = 8000) (DbType = Binary), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([PasswordHash], [PasswordResetToken], [PasswordSalt], [ResetTokenExpires], [Username])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-08-29 09:56:45.808 +02:00 [INF] Executing OkObjectResult, writing value of type 'BookInventory.DataAccessLayer.Entities.ServiceResponse`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-29 09:56:45.809 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.Register (BookInventory) in 20.5542ms
2024-08-29 09:56:45.818 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Register (BookInventory)'
2024-08-29 09:56:45.819 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7126/api/Auths/register - 200 38 application/json; charset=utf-8 50.4037ms
2024-08-29 09:56:51.885 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7126/api/Auths/login - application/json-patch+json 59
2024-08-29 09:56:51.901 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory)'
2024-08-29 09:56:51.904 +02:00 [INF] Route matched with {action = "Login", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BookInventory.DataAccessLayer.Entities.ServiceResponse`1[System.Int32]]] Login(BookInventory.BusinessLogicAcessLayer.Models.AccountModels.UserLoginModel) on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 09:56:51.948 +02:00 [INF] Executed DbCommand (29ms) [Parameters=[@__ToLower_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[PasswordHash], [t].[PasswordResetToken], [t].[PasswordSalt], [t].[ResetTokenExpires], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username]
    FROM [Users] AS [u]
    WHERE LOWER([u].[Username]) = @__ToLower_0
) AS [t]
LEFT JOIN (
    SELECT [r].[UserId], [r].[RoleId], [r0].[Id], [r0].[Name]
    FROM [RoleUsers] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2024-08-29 09:56:51.972 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[@__roleIds_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoleId], [r].[PermissionId], [p].[Id], [p].[Name]
FROM [RolePermissions] AS [r]
INNER JOIN [Permissions] AS [p] ON [r].[PermissionId] = [p].[Id]
WHERE [r].[RoleId] IN (
    SELECT [r0].[value]
    FROM OPENJSON(@__roleIds_0) WITH ([value] int '$') AS [r0]
)
2024-08-29 09:56:51.981 +02:00 [INF] Executing OkObjectResult, writing value of type 'BookInventory.DataAccessLayer.Entities.ServiceResponse`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-29 09:56:51.983 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory) in 65.8318ms
2024-08-29 09:56:51.985 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory)'
2024-08-29 09:56:51.986 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7126/api/Auths/login - 200 289 application/json; charset=utf-8 101.0657ms
2024-08-29 09:57:27.449 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7126/api/Auths/register - application/json-patch+json 63
2024-08-29 09:57:27.460 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Register (BookInventory)'
2024-08-29 09:57:27.462 +02:00 [INF] Route matched with {action = "Register", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BookInventory.DataAccessLayer.Entities.ServiceResponse`1[System.Int32]]] Register(BookInventory.BusinessLogicAcessLayer.Models.AccountModels.UserRegistrationModel) on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 09:57:27.473 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__ToLower_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE LOWER([u].[Username]) = @__ToLower_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-08-29 09:57:27.479 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 8000) (DbType = Binary), @p1='?' (Size = 4000), @p2='?' (Size = 8000) (DbType = Binary), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([PasswordHash], [PasswordResetToken], [PasswordSalt], [ResetTokenExpires], [Username])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-08-29 09:57:27.483 +02:00 [INF] Executing OkObjectResult, writing value of type 'BookInventory.DataAccessLayer.Entities.ServiceResponse`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-29 09:57:27.485 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.Register (BookInventory) in 17.2616ms
2024-08-29 09:57:27.488 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Register (BookInventory)'
2024-08-29 09:57:27.490 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7126/api/Auths/register - 200 38 application/json; charset=utf-8 41.3028ms
2024-08-29 09:57:32.127 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7126/api/Auths/login - application/json-patch+json 63
2024-08-29 09:57:32.131 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory)'
2024-08-29 09:57:32.133 +02:00 [INF] Route matched with {action = "Login", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BookInventory.DataAccessLayer.Entities.ServiceResponse`1[System.Int32]]] Login(BookInventory.BusinessLogicAcessLayer.Models.AccountModels.UserLoginModel) on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 09:57:32.169 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__ToLower_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[PasswordHash], [t].[PasswordResetToken], [t].[PasswordSalt], [t].[ResetTokenExpires], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username]
    FROM [Users] AS [u]
    WHERE LOWER([u].[Username]) = @__ToLower_0
) AS [t]
LEFT JOIN (
    SELECT [r].[UserId], [r].[RoleId], [r0].[Id], [r0].[Name]
    FROM [RoleUsers] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2024-08-29 09:57:32.173 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@__roleIds_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoleId], [r].[PermissionId], [p].[Id], [p].[Name]
FROM [RolePermissions] AS [r]
INNER JOIN [Permissions] AS [p] ON [r].[PermissionId] = [p].[Id]
WHERE [r].[RoleId] IN (
    SELECT [r0].[value]
    FROM OPENJSON(@__roleIds_0) WITH ([value] int '$') AS [r0]
)
2024-08-29 09:57:32.176 +02:00 [INF] Executing OkObjectResult, writing value of type 'BookInventory.DataAccessLayer.Entities.ServiceResponse`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-29 09:57:32.179 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory) in 23.048ms
2024-08-29 09:57:32.181 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory)'
2024-08-29 09:57:32.182 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7126/api/Auths/login - 200 290 application/json; charset=utf-8 55.0169ms
2024-08-29 09:57:51.207 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7126/api/Auths/register - application/json-patch+json 67
2024-08-29 09:57:51.212 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Register (BookInventory)'
2024-08-29 09:57:51.213 +02:00 [INF] Route matched with {action = "Register", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BookInventory.DataAccessLayer.Entities.ServiceResponse`1[System.Int32]]] Register(BookInventory.BusinessLogicAcessLayer.Models.AccountModels.UserRegistrationModel) on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 09:57:51.223 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__ToLower_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT CASE
    WHEN EXISTS (
        SELECT 1
        FROM [Users] AS [u]
        WHERE LOWER([u].[Username]) = @__ToLower_0) THEN CAST(1 AS bit)
    ELSE CAST(0 AS bit)
END
2024-08-29 09:57:51.234 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 8000) (DbType = Binary), @p1='?' (Size = 4000), @p2='?' (Size = 8000) (DbType = Binary), @p3='?' (DbType = DateTime2), @p4='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Users] ([PasswordHash], [PasswordResetToken], [PasswordSalt], [ResetTokenExpires], [Username])
OUTPUT INSERTED.[Id]
VALUES (@p0, @p1, @p2, @p3, @p4);
2024-08-29 09:57:51.238 +02:00 [INF] Executing OkObjectResult, writing value of type 'BookInventory.DataAccessLayer.Entities.ServiceResponse`1[[System.Int32, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-29 09:57:51.239 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.Register (BookInventory) in 22.0784ms
2024-08-29 09:57:51.240 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Register (BookInventory)'
2024-08-29 09:57:51.242 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7126/api/Auths/register - 200 39 application/json; charset=utf-8 34.6ms
2024-08-29 09:58:00.066 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7126/api/Auths/login - application/json-patch+json 67
2024-08-29 09:58:00.070 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory)'
2024-08-29 09:58:00.072 +02:00 [INF] Route matched with {action = "Login", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BookInventory.DataAccessLayer.Entities.ServiceResponse`1[System.Int32]]] Login(BookInventory.BusinessLogicAcessLayer.Models.AccountModels.UserLoginModel) on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 09:58:00.096 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__ToLower_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[PasswordHash], [t].[PasswordResetToken], [t].[PasswordSalt], [t].[ResetTokenExpires], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username]
    FROM [Users] AS [u]
    WHERE LOWER([u].[Username]) = @__ToLower_0
) AS [t]
LEFT JOIN (
    SELECT [r].[UserId], [r].[RoleId], [r0].[Id], [r0].[Name]
    FROM [RoleUsers] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2024-08-29 09:58:00.109 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__roleIds_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoleId], [r].[PermissionId], [p].[Id], [p].[Name]
FROM [RolePermissions] AS [r]
INNER JOIN [Permissions] AS [p] ON [r].[PermissionId] = [p].[Id]
WHERE [r].[RoleId] IN (
    SELECT [r0].[value]
    FROM OPENJSON(@__roleIds_0) WITH ([value] int '$') AS [r0]
)
2024-08-29 09:58:00.115 +02:00 [INF] Executing OkObjectResult, writing value of type 'BookInventory.DataAccessLayer.Entities.ServiceResponse`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-29 09:58:00.117 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory) in 37.4399ms
2024-08-29 09:58:00.118 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory)'
2024-08-29 09:58:00.119 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7126/api/Auths/login - 200 297 application/json; charset=utf-8 53.8307ms
2024-08-29 09:58:10.900 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/api/Auths/users - null null
2024-08-29 09:58:10.904 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.GetUsers (BookInventory)'
2024-08-29 09:58:10.907 +02:00 [INF] Route matched with {action = "GetUsers", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsers() on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 09:58:10.920 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username], [t].[UserId], [t].[RoleId], [t].[Id], [t].[Name]
FROM [Users] AS [u]
LEFT JOIN (
    SELECT [r].[UserId], [r].[RoleId], [r0].[Id], [r0].[Name]
    FROM [RoleUsers] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
) AS [t] ON [u].[Id] = [t].[UserId]
ORDER BY [u].[Id], [t].[UserId], [t].[RoleId]
2024-08-29 09:58:10.925 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookInventory.BusinessLogicAcessLayer.Models.AccountModels.UserGetModel, BookInventory, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 09:58:10.930 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.GetUsers (BookInventory) in 19.4029ms
2024-08-29 09:58:10.933 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.GetUsers (BookInventory)'
2024-08-29 09:58:10.934 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/api/Auths/users - 200 650 application/json; charset=utf-8 34.4043ms
2024-08-29 10:00:40.786 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/api/Permissions/all - null null
2024-08-29 10:00:40.827 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.PermissionsController.GetPermissions (BookInventory)'
2024-08-29 10:00:40.832 +02:00 [INF] Route matched with {action = "GetPermissions", controller = "Permissions"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPermissions() on controller BookInventory.APIAccessLayer.Controllers.PermissionsController (BookInventory).
2024-08-29 10:00:40.851 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Name], [t].[RoleId], [t].[PermissionId], [t].[Id], [t].[Name]
FROM [Permissions] AS [p]
LEFT JOIN (
    SELECT [r].[RoleId], [r].[PermissionId], [r0].[Id], [r0].[Name]
    FROM [RolePermissions] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
) AS [t] ON [p].[Id] = [t].[PermissionId]
ORDER BY [p].[Id], [t].[RoleId], [t].[PermissionId]
2024-08-29 10:00:40.857 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookInventory.BusinessLogicAcessLayer.Models.PermissionModels.PermissionGetModel, BookInventory, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 10:00:40.862 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.PermissionsController.GetPermissions (BookInventory) in 26.1378ms
2024-08-29 10:00:40.871 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.PermissionsController.GetPermissions (BookInventory)'
2024-08-29 10:00:40.873 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/api/Permissions/all - 200 3308 application/json; charset=utf-8 87.2291ms
2024-08-29 10:05:49.709 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7126/api/Roles - application/json-patch+json 172
2024-08-29 10:05:49.712 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.CreateRole (BookInventory)'
2024-08-29 10:05:49.718 +02:00 [INF] Route matched with {action = "CreateRole", controller = "Roles"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateRole(BookInventory.BusinessLogicAcessLayer.Models.RoleModel.RoleCreateModel) on controller BookInventory.APIAccessLayer.Controllers.RolesController (BookInventory).
2024-08-29 10:05:49.759 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Roles] ([Name])
OUTPUT INSERTED.[Id]
VALUES (@p0);
2024-08-29 10:05:49.777 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (DbType = Int32), @p15='?' (DbType = Int32), @p16='?' (DbType = Int32), @p17='?' (DbType = Int32), @p18='?' (DbType = Int32), @p19='?' (DbType = Int32), @p20='?' (DbType = Int32), @p21='?' (DbType = Int32), @p22='?' (DbType = Int32), @p23='?' (DbType = Int32), @p24='?' (DbType = Int32), @p25='?' (DbType = Int32), @p26='?' (DbType = Int32), @p27='?' (DbType = Int32), @p28='?' (DbType = Int32), @p29='?' (DbType = Int32), @p30='?' (DbType = Int32), @p31='?' (DbType = Int32), @p32='?' (DbType = Int32), @p33='?' (DbType = Int32), @p34='?' (DbType = Int32), @p35='?' (DbType = Int32), @p36='?' (DbType = Int32), @p37='?' (DbType = Int32), @p38='?' (DbType = Int32), @p39='?' (DbType = Int32), @p40='?' (DbType = Int32), @p41='?' (DbType = Int32), @p42='?' (DbType = Int32), @p43='?' (DbType = Int32), @p44='?' (DbType = Int32), @p45='?' (DbType = Int32), @p46='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RolePermissions] ([PermissionId], [RoleId])
VALUES (@p1, @p2),
(@p3, @p4),
(@p5, @p6),
(@p7, @p8),
(@p9, @p10),
(@p11, @p12),
(@p13, @p14),
(@p15, @p16),
(@p17, @p18),
(@p19, @p20),
(@p21, @p22),
(@p23, @p24),
(@p25, @p26),
(@p27, @p28),
(@p29, @p30),
(@p31, @p32),
(@p33, @p34),
(@p35, @p36),
(@p37, @p38),
(@p39, @p40),
(@p41, @p42),
(@p43, @p44),
(@p45, @p46);
2024-08-29 10:05:49.786 +02:00 [INF] Executing OkObjectResult, writing value of type 'BookInventory.BusinessLogicAcessLayer.Models.RoleModel.RoleCreateModel'.
2024-08-29 10:05:49.788 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.RolesController.CreateRole (BookInventory) in 67.9361ms
2024-08-29 10:05:49.790 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.CreateRole (BookInventory)'
2024-08-29 10:05:49.791 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7126/api/Roles - 200 121 application/json; charset=utf-8 82.9079ms
2024-08-29 10:06:42.064 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7126/api/Roles - application/json-patch+json 87
2024-08-29 10:06:42.076 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.CreateRole (BookInventory)'
2024-08-29 10:06:42.077 +02:00 [INF] Route matched with {action = "CreateRole", controller = "Roles"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateRole(BookInventory.BusinessLogicAcessLayer.Models.RoleModel.RoleCreateModel) on controller BookInventory.APIAccessLayer.Controllers.RolesController (BookInventory).
2024-08-29 10:06:42.100 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'Microsoft.AspNetCore.Mvc.ValidationProblemDetails'.
2024-08-29 10:06:42.123 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.RolesController.CreateRole (BookInventory) in 42.6284ms
2024-08-29 10:06:42.134 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.CreateRole (BookInventory)'
2024-08-29 10:06:42.135 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7126/api/Roles - 400 388 application/problem+json; charset=utf-8 71.8779ms
2024-08-29 10:07:03.441 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7126/api/Roles - application/json-patch+json 89
2024-08-29 10:07:03.451 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.CreateRole (BookInventory)'
2024-08-29 10:07:03.453 +02:00 [INF] Route matched with {action = "CreateRole", controller = "Roles"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateRole(BookInventory.BusinessLogicAcessLayer.Models.RoleModel.RoleCreateModel) on controller BookInventory.APIAccessLayer.Controllers.RolesController (BookInventory).
2024-08-29 10:07:03.464 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Roles] ([Name])
OUTPUT INSERTED.[Id]
VALUES (@p0);
2024-08-29 10:07:03.479 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RolePermissions] ([PermissionId], [RoleId])
VALUES (@p1, @p2),
(@p3, @p4),
(@p5, @p6),
(@p7, @p8);
2024-08-29 10:07:03.484 +02:00 [INF] Executing OkObjectResult, writing value of type 'BookInventory.BusinessLogicAcessLayer.Models.RoleModel.RoleCreateModel'.
2024-08-29 10:07:03.485 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.RolesController.CreateRole (BookInventory) in 29.3852ms
2024-08-29 10:07:03.487 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.CreateRole (BookInventory)'
2024-08-29 10:07:03.488 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7126/api/Roles - 200 64 application/json; charset=utf-8 48.3037ms
2024-08-29 10:09:30.844 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7126/api/Roles - application/json-patch+json 98
2024-08-29 10:09:30.854 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.CreateRole (BookInventory)'
2024-08-29 10:09:30.855 +02:00 [INF] Route matched with {action = "CreateRole", controller = "Roles"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateRole(BookInventory.BusinessLogicAcessLayer.Models.RoleModel.RoleCreateModel) on controller BookInventory.APIAccessLayer.Controllers.RolesController (BookInventory).
2024-08-29 10:09:30.863 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Roles] ([Name])
OUTPUT INSERTED.[Id]
VALUES (@p0);
2024-08-29 10:09:30.869 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RolePermissions] ([PermissionId], [RoleId])
VALUES (@p1, @p2),
(@p3, @p4),
(@p5, @p6),
(@p7, @p8);
2024-08-29 10:09:30.873 +02:00 [INF] Executing OkObjectResult, writing value of type 'BookInventory.BusinessLogicAcessLayer.Models.RoleModel.RoleCreateModel'.
2024-08-29 10:09:30.874 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.RolesController.CreateRole (BookInventory) in 16.4189ms
2024-08-29 10:09:30.876 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.CreateRole (BookInventory)'
2024-08-29 10:09:30.877 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7126/api/Roles - 200 74 application/json; charset=utf-8 36.9555ms
2024-08-29 10:09:48.617 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7126/api/Roles - application/json-patch+json 97
2024-08-29 10:09:48.621 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.CreateRole (BookInventory)'
2024-08-29 10:09:48.622 +02:00 [INF] Route matched with {action = "CreateRole", controller = "Roles"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateRole(BookInventory.BusinessLogicAcessLayer.Models.RoleModel.RoleCreateModel) on controller BookInventory.APIAccessLayer.Controllers.RolesController (BookInventory).
2024-08-29 10:09:48.630 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Roles] ([Name])
OUTPUT INSERTED.[Id]
VALUES (@p0);
2024-08-29 10:09:48.636 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[@p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RolePermissions] ([PermissionId], [RoleId])
VALUES (@p1, @p2),
(@p3, @p4),
(@p5, @p6),
(@p7, @p8);
2024-08-29 10:09:48.641 +02:00 [INF] Executing OkObjectResult, writing value of type 'BookInventory.BusinessLogicAcessLayer.Models.RoleModel.RoleCreateModel'.
2024-08-29 10:09:48.644 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.RolesController.CreateRole (BookInventory) in 18.9387ms
2024-08-29 10:09:48.645 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.CreateRole (BookInventory)'
2024-08-29 10:09:48.646 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7126/api/Roles - 200 73 application/json; charset=utf-8 29.7673ms
2024-08-29 10:10:15.434 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/api/Roles/all - null null
2024-08-29 10:10:15.448 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.GetAll (BookInventory)'
2024-08-29 10:10:15.450 +02:00 [INF] Route matched with {action = "GetAll", controller = "Roles"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller BookInventory.APIAccessLayer.Controllers.RolesController (BookInventory).
2024-08-29 10:10:15.466 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Name], [t].[RoleId], [t].[PermissionId], [t].[Id], [t].[Name]
FROM [Roles] AS [r]
LEFT JOIN (
    SELECT [r0].[RoleId], [r0].[PermissionId], [p].[Id], [p].[Name]
    FROM [RolePermissions] AS [r0]
    INNER JOIN [Permissions] AS [p] ON [r0].[PermissionId] = [p].[Id]
) AS [t] ON [r].[Id] = [t].[RoleId]
ORDER BY [r].[Id], [t].[RoleId], [t].[PermissionId]
2024-08-29 10:10:15.470 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookInventory.BusinessLogicAcessLayer.Models.RoleModel.RoleGetModel, BookInventory, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 10:10:15.471 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.RolesController.GetAll (BookInventory) in 18.6962ms
2024-08-29 10:10:15.473 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.GetAll (BookInventory)'
2024-08-29 10:10:15.477 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/api/Roles/all - 200 3666 application/json; charset=utf-8 76.2411ms
2024-08-29 10:10:42.698 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7126/api/Roles - application/json-patch+json 82
2024-08-29 10:10:42.730 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.CreateRole (BookInventory)'
2024-08-29 10:10:42.731 +02:00 [INF] Route matched with {action = "CreateRole", controller = "Roles"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateRole(BookInventory.BusinessLogicAcessLayer.Models.RoleModel.RoleCreateModel) on controller BookInventory.APIAccessLayer.Controllers.RolesController (BookInventory).
2024-08-29 10:10:42.741 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Roles] ([Name])
OUTPUT INSERTED.[Id]
VALUES (@p0);
2024-08-29 10:10:42.764 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RolePermissions] ([PermissionId], [RoleId])
VALUES (@p1, @p2),
(@p3, @p4),
(@p5, @p6);
2024-08-29 10:10:42.769 +02:00 [INF] Executing OkObjectResult, writing value of type 'BookInventory.BusinessLogicAcessLayer.Models.RoleModel.RoleCreateModel'.
2024-08-29 10:10:42.770 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.RolesController.CreateRole (BookInventory) in 34.4921ms
2024-08-29 10:10:42.772 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.CreateRole (BookInventory)'
2024-08-29 10:10:42.773 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7126/api/Roles - 200 59 application/json; charset=utf-8 75.4452ms
2024-08-29 10:10:48.845 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/api/Roles/all - null null
2024-08-29 10:10:48.849 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.GetAll (BookInventory)'
2024-08-29 10:10:48.851 +02:00 [INF] Route matched with {action = "GetAll", controller = "Roles"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller BookInventory.APIAccessLayer.Controllers.RolesController (BookInventory).
2024-08-29 10:10:48.887 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Name], [t].[RoleId], [t].[PermissionId], [t].[Id], [t].[Name]
FROM [Roles] AS [r]
LEFT JOIN (
    SELECT [r0].[RoleId], [r0].[PermissionId], [p].[Id], [p].[Name]
    FROM [RolePermissions] AS [r0]
    INNER JOIN [Permissions] AS [p] ON [r0].[PermissionId] = [p].[Id]
) AS [t] ON [r].[Id] = [t].[RoleId]
ORDER BY [r].[Id], [t].[RoleId], [t].[PermissionId]
2024-08-29 10:10:48.892 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookInventory.BusinessLogicAcessLayer.Models.RoleModel.RoleGetModel, BookInventory, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 10:10:48.895 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.RolesController.GetAll (BookInventory) in 11.6581ms
2024-08-29 10:10:48.899 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.GetAll (BookInventory)'
2024-08-29 10:10:48.900 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/api/Roles/all - 200 3848 application/json; charset=utf-8 55.9986ms
2024-08-29 10:18:38.553 +02:00 [INF] Request starting HTTP/2 DELETE https://localhost:7126/api/Roles/2 - null null
2024-08-29 10:18:38.559 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.DeleteRole (BookInventory)'
2024-08-29 10:18:38.560 +02:00 [INF] Route matched with {action = "DeleteRole", controller = "Roles"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteRole(Int32) on controller BookInventory.APIAccessLayer.Controllers.RolesController (BookInventory).
2024-08-29 10:18:38.606 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Name]
FROM [Roles] AS [r]
WHERE [r].[Id] = @__p_0
2024-08-29 10:18:38.620 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Roles]
OUTPUT 1
WHERE [Id] = @p0;
2024-08-29 10:18:38.631 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'BookInventory.DataAccess.Database.DatabaseContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_RoleUsers_Roles_RoleId". The conflict occurred in database "BookInventory", table "dbo.RoleUsers", column 'RoleId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:d37a80e4-fc18-41b8-81e0-30ba548d6468
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_RoleUsers_Roles_RoleId". The conflict occurred in database "BookInventory", table "dbo.RoleUsers", column 'RoleId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:d37a80e4-fc18-41b8-81e0-30ba548d6468
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-08-29 10:18:38.765 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.RolesController.DeleteRole (BookInventory) in 201.359ms
2024-08-29 10:18:38.768 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.DeleteRole (BookInventory)'
2024-08-29 10:18:38.771 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_RoleUsers_Roles_RoleId". The conflict occurred in database "BookInventory", table "dbo.RoleUsers", column 'RoleId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:d37a80e4-fc18-41b8-81e0-30ba548d6468
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at BookInventory.BusinessLogicAcessLayer.Services.RoleService.RoleService.DeleteRole(Int32 id) in C:\Users\lkelmendi.PC-PR05\Desktop\BookInventory\BookInventory\BusinessLogicAcessLayer\Services\RoleService\RoleService.cs:line 59
   at BookInventory.APIAccessLayer.Controllers.RolesController.DeleteRole(Int32 id) in C:\Users\lkelmendi.PC-PR05\Desktop\BookInventory\BookInventory\APIAccessLayer\Controllers\RolesController.cs:line 62
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-08-29 10:18:38.805 +02:00 [INF] Request finished HTTP/2 DELETE https://localhost:7126/api/Roles/2 - 500 null text/plain; charset=utf-8 251.3095ms
2024-08-29 10:18:40.441 +02:00 [INF] Request starting HTTP/2 DELETE https://localhost:7126/api/Roles/2 - null null
2024-08-29 10:18:40.445 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.DeleteRole (BookInventory)'
2024-08-29 10:18:40.447 +02:00 [INF] Route matched with {action = "DeleteRole", controller = "Roles"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteRole(Int32) on controller BookInventory.APIAccessLayer.Controllers.RolesController (BookInventory).
2024-08-29 10:18:40.454 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Name]
FROM [Roles] AS [r]
WHERE [r].[Id] = @__p_0
2024-08-29 10:18:40.464 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Roles]
OUTPUT 1
WHERE [Id] = @p0;
2024-08-29 10:18:40.471 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'BookInventory.DataAccess.Database.DatabaseContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_RoleUsers_Roles_RoleId". The conflict occurred in database "BookInventory", table "dbo.RoleUsers", column 'RoleId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:d37a80e4-fc18-41b8-81e0-30ba548d6468
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_RoleUsers_Roles_RoleId". The conflict occurred in database "BookInventory", table "dbo.RoleUsers", column 'RoleId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:d37a80e4-fc18-41b8-81e0-30ba548d6468
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-08-29 10:18:40.582 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.RolesController.DeleteRole (BookInventory) in 131.7849ms
2024-08-29 10:18:40.583 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.DeleteRole (BookInventory)'
2024-08-29 10:18:40.585 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_RoleUsers_Roles_RoleId". The conflict occurred in database "BookInventory", table "dbo.RoleUsers", column 'RoleId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:d37a80e4-fc18-41b8-81e0-30ba548d6468
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at BookInventory.BusinessLogicAcessLayer.Services.RoleService.RoleService.DeleteRole(Int32 id) in C:\Users\lkelmendi.PC-PR05\Desktop\BookInventory\BookInventory\BusinessLogicAcessLayer\Services\RoleService\RoleService.cs:line 59
   at BookInventory.APIAccessLayer.Controllers.RolesController.DeleteRole(Int32 id) in C:\Users\lkelmendi.PC-PR05\Desktop\BookInventory\BookInventory\APIAccessLayer\Controllers\RolesController.cs:line 62
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-08-29 10:18:40.610 +02:00 [INF] Request finished HTTP/2 DELETE https://localhost:7126/api/Roles/2 - 500 null text/plain; charset=utf-8 168.8814ms
2024-08-29 10:18:41.242 +02:00 [INF] Request starting HTTP/2 DELETE https://localhost:7126/api/Roles/2 - null null
2024-08-29 10:18:41.251 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.DeleteRole (BookInventory)'
2024-08-29 10:18:41.252 +02:00 [INF] Route matched with {action = "DeleteRole", controller = "Roles"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteRole(Int32) on controller BookInventory.APIAccessLayer.Controllers.RolesController (BookInventory).
2024-08-29 10:18:41.259 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Name]
FROM [Roles] AS [r]
WHERE [r].[Id] = @__p_0
2024-08-29 10:18:41.272 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Roles]
OUTPUT 1
WHERE [Id] = @p0;
2024-08-29 10:18:41.281 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'BookInventory.DataAccess.Database.DatabaseContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_RoleUsers_Roles_RoleId". The conflict occurred in database "BookInventory", table "dbo.RoleUsers", column 'RoleId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:d37a80e4-fc18-41b8-81e0-30ba548d6468
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_RoleUsers_Roles_RoleId". The conflict occurred in database "BookInventory", table "dbo.RoleUsers", column 'RoleId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:d37a80e4-fc18-41b8-81e0-30ba548d6468
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-08-29 10:18:41.411 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.RolesController.DeleteRole (BookInventory) in 156.5793ms
2024-08-29 10:18:41.414 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.DeleteRole (BookInventory)'
2024-08-29 10:18:41.417 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_RoleUsers_Roles_RoleId". The conflict occurred in database "BookInventory", table "dbo.RoleUsers", column 'RoleId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:d37a80e4-fc18-41b8-81e0-30ba548d6468
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at BookInventory.BusinessLogicAcessLayer.Services.RoleService.RoleService.DeleteRole(Int32 id) in C:\Users\lkelmendi.PC-PR05\Desktop\BookInventory\BookInventory\BusinessLogicAcessLayer\Services\RoleService\RoleService.cs:line 59
   at BookInventory.APIAccessLayer.Controllers.RolesController.DeleteRole(Int32 id) in C:\Users\lkelmendi.PC-PR05\Desktop\BookInventory\BookInventory\APIAccessLayer\Controllers\RolesController.cs:line 62
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-08-29 10:18:41.446 +02:00 [INF] Request finished HTTP/2 DELETE https://localhost:7126/api/Roles/2 - 500 null text/plain; charset=utf-8 204.7005ms
2024-08-29 10:18:41.606 +02:00 [INF] Request starting HTTP/2 DELETE https://localhost:7126/api/Roles/2 - null null
2024-08-29 10:18:41.611 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.DeleteRole (BookInventory)'
2024-08-29 10:18:41.615 +02:00 [INF] Route matched with {action = "DeleteRole", controller = "Roles"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteRole(Int32) on controller BookInventory.APIAccessLayer.Controllers.RolesController (BookInventory).
2024-08-29 10:18:41.622 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Name]
FROM [Roles] AS [r]
WHERE [r].[Id] = @__p_0
2024-08-29 10:18:41.633 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Roles]
OUTPUT 1
WHERE [Id] = @p0;
2024-08-29 10:18:41.639 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'BookInventory.DataAccess.Database.DatabaseContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_RoleUsers_Roles_RoleId". The conflict occurred in database "BookInventory", table "dbo.RoleUsers", column 'RoleId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:d37a80e4-fc18-41b8-81e0-30ba548d6468
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_RoleUsers_Roles_RoleId". The conflict occurred in database "BookInventory", table "dbo.RoleUsers", column 'RoleId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:d37a80e4-fc18-41b8-81e0-30ba548d6468
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-08-29 10:18:41.768 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.RolesController.DeleteRole (BookInventory) in 149.1171ms
2024-08-29 10:18:41.769 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.DeleteRole (BookInventory)'
2024-08-29 10:18:41.770 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_RoleUsers_Roles_RoleId". The conflict occurred in database "BookInventory", table "dbo.RoleUsers", column 'RoleId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:d37a80e4-fc18-41b8-81e0-30ba548d6468
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at BookInventory.BusinessLogicAcessLayer.Services.RoleService.RoleService.DeleteRole(Int32 id) in C:\Users\lkelmendi.PC-PR05\Desktop\BookInventory\BookInventory\BusinessLogicAcessLayer\Services\RoleService\RoleService.cs:line 59
   at BookInventory.APIAccessLayer.Controllers.RolesController.DeleteRole(Int32 id) in C:\Users\lkelmendi.PC-PR05\Desktop\BookInventory\BookInventory\APIAccessLayer\Controllers\RolesController.cs:line 62
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-08-29 10:18:41.793 +02:00 [INF] Request finished HTTP/2 DELETE https://localhost:7126/api/Roles/2 - 500 null text/plain; charset=utf-8 186.5083ms
2024-08-29 10:18:42.037 +02:00 [INF] Request starting HTTP/2 DELETE https://localhost:7126/api/Roles/2 - null null
2024-08-29 10:18:42.041 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.DeleteRole (BookInventory)'
2024-08-29 10:18:42.042 +02:00 [INF] Route matched with {action = "DeleteRole", controller = "Roles"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteRole(Int32) on controller BookInventory.APIAccessLayer.Controllers.RolesController (BookInventory).
2024-08-29 10:18:42.067 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Name]
FROM [Roles] AS [r]
WHERE [r].[Id] = @__p_0
2024-08-29 10:18:42.074 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Roles]
OUTPUT 1
WHERE [Id] = @p0;
2024-08-29 10:18:42.080 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'BookInventory.DataAccess.Database.DatabaseContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_RoleUsers_Roles_RoleId". The conflict occurred in database "BookInventory", table "dbo.RoleUsers", column 'RoleId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:d37a80e4-fc18-41b8-81e0-30ba548d6468
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_RoleUsers_Roles_RoleId". The conflict occurred in database "BookInventory", table "dbo.RoleUsers", column 'RoleId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:d37a80e4-fc18-41b8-81e0-30ba548d6468
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-08-29 10:18:42.207 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.RolesController.DeleteRole (BookInventory) in 148.1293ms
2024-08-29 10:18:42.209 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.DeleteRole (BookInventory)'
2024-08-29 10:18:42.211 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_RoleUsers_Roles_RoleId". The conflict occurred in database "BookInventory", table "dbo.RoleUsers", column 'RoleId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:d37a80e4-fc18-41b8-81e0-30ba548d6468
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at BookInventory.BusinessLogicAcessLayer.Services.RoleService.RoleService.DeleteRole(Int32 id) in C:\Users\lkelmendi.PC-PR05\Desktop\BookInventory\BookInventory\BusinessLogicAcessLayer\Services\RoleService\RoleService.cs:line 59
   at BookInventory.APIAccessLayer.Controllers.RolesController.DeleteRole(Int32 id) in C:\Users\lkelmendi.PC-PR05\Desktop\BookInventory\BookInventory\APIAccessLayer\Controllers\RolesController.cs:line 62
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-08-29 10:18:42.236 +02:00 [INF] Request finished HTTP/2 DELETE https://localhost:7126/api/Roles/2 - 500 null text/plain; charset=utf-8 199.6904ms
2024-08-29 10:26:21.845 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-08-29 10:26:21.903 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-08-29 10:26:21.906 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-08-29 10:26:21.907 +02:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-08-29 10:26:21.926 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-08-29 10:26:21.939 +02:00 [INF] Applying migration '20240829082602_UpdateTables'.
2024-08-29 10:26:22.036 +02:00 [INF] Executed DbCommand (51ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [RolePermissions] DROP CONSTRAINT [FK_RolePermissions_Permissions_PermissionId];
2024-08-29 10:26:22.040 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [RolePermissions] DROP CONSTRAINT [FK_RolePermissions_Roles_RoleId];
2024-08-29 10:26:22.073 +02:00 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [RolePermissions] ADD CONSTRAINT [FK_RolePermissions_Permissions_PermissionId] FOREIGN KEY ([PermissionId]) REFERENCES [Permissions] ([Id]) ON DELETE NO ACTION;
2024-08-29 10:26:22.083 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [RolePermissions] ADD CONSTRAINT [FK_RolePermissions_Roles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [Roles] ([Id]) ON DELETE NO ACTION;
2024-08-29 10:26:22.089 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20240829082602_UpdateTables', N'8.0.8');
2024-08-29 10:26:34.799 +02:00 [INF] User profile is available. Using 'C:\Users\lkelmendi.PC-PR05\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-29 10:26:35.259 +02:00 [INF] Now listening on: https://localhost:7126
2024-08-29 10:26:35.260 +02:00 [INF] Now listening on: http://localhost:5019
2024-08-29 10:26:35.262 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-29 10:26:35.263 +02:00 [INF] Hosting environment: Development
2024-08-29 10:26:35.265 +02:00 [INF] Content root path: C:\Users\lkelmendi.PC-PR05\Desktop\BookInventory\BookInventory
2024-08-29 10:26:36.162 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/swagger/index.html - null null
2024-08-29 10:26:36.770 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/swagger/index.html - 200 null text/html;charset=utf-8 614.2975ms
2024-08-29 10:26:36.892 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/_framework/aspnetcore-browser-refresh.js - null null
2024-08-29 10:26:36.893 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/swagger/index.js - null null
2024-08-29 10:26:36.893 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/_vs/browserLink - null null
2024-08-29 10:26:36.908 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/swagger/index.js - 200 null application/javascript;charset=utf-8 15.2528ms
2024-08-29 10:26:36.913 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 20.8039ms
2024-08-29 10:26:37.004 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/_vs/browserLink - 200 null text/javascript; charset=UTF-8 110.2133ms
2024-08-29 10:26:37.057 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/swagger/v1/swagger.json - null null
2024-08-29 10:26:37.318 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 261.0037ms
2024-08-29 10:26:54.552 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7126/api/Auths/login - application/json-patch+json 61
2024-08-29 10:26:54.687 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory)'
2024-08-29 10:26:54.729 +02:00 [INF] Route matched with {action = "Login", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BookInventory.DataAccessLayer.Entities.ServiceResponse`1[System.Int32]]] Login(BookInventory.BusinessLogicAcessLayer.Models.AccountModels.UserLoginModel) on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 10:26:57.060 +02:00 [INF] Executed DbCommand (79ms) [Parameters=[@__ToLower_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[PasswordHash], [t].[PasswordResetToken], [t].[PasswordSalt], [t].[ResetTokenExpires], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username]
    FROM [Users] AS [u]
    WHERE LOWER([u].[Username]) = @__ToLower_0
) AS [t]
LEFT JOIN (
    SELECT [r].[UserId], [r].[RoleId], [r0].[Id], [r0].[Name]
    FROM [RoleUsers] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2024-08-29 10:26:57.306 +02:00 [INF] Executed DbCommand (47ms) [Parameters=[@__roleIds_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoleId], [r].[PermissionId], [p].[Id], [p].[Name]
FROM [RolePermissions] AS [r]
INNER JOIN [Permissions] AS [p] ON [r].[PermissionId] = [p].[Id]
WHERE [r].[RoleId] IN (
    SELECT [r0].[value]
    FROM OPENJSON(@__roleIds_0) WITH ([value] int '$') AS [r0]
)
2024-08-29 10:26:57.375 +02:00 [INF] Executing OkObjectResult, writing value of type 'BookInventory.DataAccessLayer.Entities.ServiceResponse`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-29 10:26:57.415 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory) in 2678.6459ms
2024-08-29 10:26:57.418 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory)'
2024-08-29 10:26:57.427 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7126/api/Auths/login - 200 818 application/json; charset=utf-8 2875.9351ms
2024-08-29 10:27:59.804 +02:00 [INF] Request starting HTTP/2 DELETE https://localhost:7126/api/Roles/2 - null null
2024-08-29 10:27:59.889 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.DeleteRole (BookInventory)'
2024-08-29 10:27:59.899 +02:00 [INF] Route matched with {action = "DeleteRole", controller = "Roles"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteRole(Int32) on controller BookInventory.APIAccessLayer.Controllers.RolesController (BookInventory).
2024-08-29 10:27:59.963 +02:00 [INF] Executed DbCommand (16ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Name]
FROM [Roles] AS [r]
WHERE [r].[Id] = @__p_0
2024-08-29 10:28:00.117 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Roles]
OUTPUT 1
WHERE [Id] = @p0;
2024-08-29 10:28:00.199 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'BookInventory.DataAccess.Database.DatabaseContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_RoleUsers_Roles_RoleId". The conflict occurred in database "BookInventory", table "dbo.RoleUsers", column 'RoleId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:10900d36-b399-4d3e-9ea2-4d9058def25d
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_RoleUsers_Roles_RoleId". The conflict occurred in database "BookInventory", table "dbo.RoleUsers", column 'RoleId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:10900d36-b399-4d3e-9ea2-4d9058def25d
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-08-29 10:28:00.413 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.RolesController.DeleteRole (BookInventory) in 509.6498ms
2024-08-29 10:28:00.416 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.DeleteRole (BookInventory)'
2024-08-29 10:28:00.422 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The DELETE statement conflicted with the REFERENCE constraint "FK_RoleUsers_Roles_RoleId". The conflict occurred in database "BookInventory", table "dbo.RoleUsers", column 'RoleId'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryReadInternal(Boolean setTimeout, Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.ReadAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeResultSetWithRowsAffectedOnlyAsync(Int32 commandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:10900d36-b399-4d3e-9ea2-4d9058def25d
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at BookInventory.BusinessLogicAcessLayer.Services.RoleService.RoleService.DeleteRole(Int32 id) in C:\Users\lkelmendi.PC-PR05\Desktop\BookInventory\BookInventory\BusinessLogicAcessLayer\Services\RoleService\RoleService.cs:line 59
   at BookInventory.APIAccessLayer.Controllers.RolesController.DeleteRole(Int32 id) in C:\Users\lkelmendi.PC-PR05\Desktop\BookInventory\BookInventory\APIAccessLayer\Controllers\RolesController.cs:line 62
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-08-29 10:28:00.485 +02:00 [INF] Request finished HTTP/2 DELETE https://localhost:7126/api/Roles/2 - 500 null text/plain; charset=utf-8 681.3924ms
2024-08-29 10:29:27.768 +02:00 [INF] User profile is available. Using 'C:\Users\lkelmendi.PC-PR05\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-29 10:29:28.056 +02:00 [INF] Now listening on: https://localhost:7126
2024-08-29 10:29:28.057 +02:00 [INF] Now listening on: http://localhost:5019
2024-08-29 10:29:28.060 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-29 10:29:28.061 +02:00 [INF] Hosting environment: Development
2024-08-29 10:29:28.062 +02:00 [INF] Content root path: C:\Users\lkelmendi.PC-PR05\Desktop\BookInventory\BookInventory
2024-08-29 10:29:28.753 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/swagger/index.html - null null
2024-08-29 10:29:29.120 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/swagger/index.html - 200 null text/html;charset=utf-8 376.5881ms
2024-08-29 10:29:29.152 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/swagger/index.js - null null
2024-08-29 10:29:29.152 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/_vs/browserLink - null null
2024-08-29 10:29:29.152 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/_framework/aspnetcore-browser-refresh.js - null null
2024-08-29 10:29:29.159 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/swagger/index.js - 200 null application/javascript;charset=utf-8 7.4401ms
2024-08-29 10:29:29.176 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 23.7485ms
2024-08-29 10:29:29.200 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/_vs/browserLink - 200 null text/javascript; charset=UTF-8 48.5085ms
2024-08-29 10:29:29.269 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/swagger/v1/swagger.json - null null
2024-08-29 10:29:29.471 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 201.5875ms
2024-08-29 10:29:48.462 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-08-29 10:29:48.538 +02:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-08-29 10:29:48.541 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1
2024-08-29 10:29:48.542 +02:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT OBJECT_ID(N'[__EFMigrationsHistory]');
2024-08-29 10:29:48.564 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [MigrationId], [ProductVersion]
FROM [__EFMigrationsHistory]
ORDER BY [MigrationId];
2024-08-29 10:29:48.578 +02:00 [INF] Applying migration '20240829082941_UpdateTablesss'.
2024-08-29 10:29:48.636 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [RolePermissions] DROP CONSTRAINT [FK_RolePermissions_Permissions_PermissionId];
2024-08-29 10:29:48.639 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [RolePermissions] DROP CONSTRAINT [FK_RolePermissions_Roles_RoleId];
2024-08-29 10:29:48.645 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [RoleUsers] DROP CONSTRAINT [FK_RoleUsers_Roles_RoleId];
2024-08-29 10:29:48.648 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [RoleUsers] DROP CONSTRAINT [FK_RoleUsers_Users_UserId];
2024-08-29 10:29:48.660 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [RolePermissions] ADD CONSTRAINT [FK_RolePermissions_Permissions_PermissionId] FOREIGN KEY ([PermissionId]) REFERENCES [Permissions] ([Id]) ON DELETE CASCADE;
2024-08-29 10:29:48.667 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [RolePermissions] ADD CONSTRAINT [FK_RolePermissions_Roles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [Roles] ([Id]) ON DELETE CASCADE;
2024-08-29 10:29:48.676 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [RoleUsers] ADD CONSTRAINT [FK_RoleUsers_Roles_RoleId] FOREIGN KEY ([RoleId]) REFERENCES [Roles] ([Id]) ON DELETE CASCADE;
2024-08-29 10:29:48.685 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE [RoleUsers] ADD CONSTRAINT [FK_RoleUsers_Users_UserId] FOREIGN KEY ([UserId]) REFERENCES [Users] ([Id]) ON DELETE CASCADE;
2024-08-29 10:29:48.688 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO [__EFMigrationsHistory] ([MigrationId], [ProductVersion])
VALUES (N'20240829082941_UpdateTablesss', N'8.0.8');
2024-08-29 10:29:56.064 +02:00 [INF] User profile is available. Using 'C:\Users\lkelmendi.PC-PR05\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-29 10:29:56.426 +02:00 [INF] Now listening on: https://localhost:7126
2024-08-29 10:29:56.428 +02:00 [INF] Now listening on: http://localhost:5019
2024-08-29 10:29:56.430 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-29 10:29:56.431 +02:00 [INF] Hosting environment: Development
2024-08-29 10:29:56.432 +02:00 [INF] Content root path: C:\Users\lkelmendi.PC-PR05\Desktop\BookInventory\BookInventory
2024-08-29 10:29:56.834 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/swagger/index.html - null null
2024-08-29 10:29:57.224 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/swagger/index.html - 200 null text/html;charset=utf-8 399.8712ms
2024-08-29 10:29:57.253 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/_framework/aspnetcore-browser-refresh.js - null null
2024-08-29 10:29:57.254 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/_vs/browserLink - null null
2024-08-29 10:29:57.254 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/swagger/index.js - null null
2024-08-29 10:29:57.265 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/swagger/index.js - 200 null application/javascript;charset=utf-8 10.0373ms
2024-08-29 10:29:57.288 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 34.2728ms
2024-08-29 10:29:57.325 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/_vs/browserLink - 200 null text/javascript; charset=UTF-8 70.8093ms
2024-08-29 10:29:57.387 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/swagger/v1/swagger.json - null null
2024-08-29 10:29:57.635 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 248.4002ms
2024-08-29 10:30:10.575 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7126/api/Auths/login - application/json-patch+json 61
2024-08-29 10:30:10.678 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory)'
2024-08-29 10:30:10.737 +02:00 [INF] Route matched with {action = "Login", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BookInventory.DataAccessLayer.Entities.ServiceResponse`1[System.Int32]]] Login(BookInventory.BusinessLogicAcessLayer.Models.AccountModels.UserLoginModel) on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 10:30:12.937 +02:00 [INF] Executed DbCommand (83ms) [Parameters=[@__ToLower_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[PasswordHash], [t].[PasswordResetToken], [t].[PasswordSalt], [t].[ResetTokenExpires], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username]
    FROM [Users] AS [u]
    WHERE LOWER([u].[Username]) = @__ToLower_0
) AS [t]
LEFT JOIN (
    SELECT [r].[UserId], [r].[RoleId], [r0].[Id], [r0].[Name]
    FROM [RoleUsers] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2024-08-29 10:30:13.190 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@__roleIds_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoleId], [r].[PermissionId], [p].[Id], [p].[Name]
FROM [RolePermissions] AS [r]
INNER JOIN [Permissions] AS [p] ON [r].[PermissionId] = [p].[Id]
WHERE [r].[RoleId] IN (
    SELECT [r0].[value]
    FROM OPENJSON(@__roleIds_0) WITH ([value] int '$') AS [r0]
)
2024-08-29 10:30:13.271 +02:00 [INF] Executing OkObjectResult, writing value of type 'BookInventory.DataAccessLayer.Entities.ServiceResponse`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-29 10:30:13.314 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory) in 2570.671ms
2024-08-29 10:30:13.319 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory)'
2024-08-29 10:30:13.330 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7126/api/Auths/login - 200 818 application/json; charset=utf-8 2755.0735ms
2024-08-29 10:30:29.305 +02:00 [INF] Request starting HTTP/2 DELETE https://localhost:7126/api/Roles/2 - null null
2024-08-29 10:30:29.395 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.DeleteRole (BookInventory)'
2024-08-29 10:30:29.402 +02:00 [INF] Route matched with {action = "DeleteRole", controller = "Roles"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteRole(Int32) on controller BookInventory.APIAccessLayer.Controllers.RolesController (BookInventory).
2024-08-29 10:30:29.446 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Name]
FROM [Roles] AS [r]
WHERE [r].[Id] = @__p_0
2024-08-29 10:30:29.533 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Roles]
OUTPUT 1
WHERE [Id] = @p0;
2024-08-29 10:30:29.548 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-08-29 10:30:29.551 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.RolesController.DeleteRole (BookInventory) in 145.8104ms
2024-08-29 10:30:29.553 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.DeleteRole (BookInventory)'
2024-08-29 10:30:29.555 +02:00 [INF] Request finished HTTP/2 DELETE https://localhost:7126/api/Roles/2 - 200 null text/plain; charset=utf-8 251.0142ms
2024-08-29 10:30:32.934 +02:00 [INF] Request starting HTTP/2 DELETE https://localhost:7126/api/Roles/3 - null null
2024-08-29 10:30:32.948 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.DeleteRole (BookInventory)'
2024-08-29 10:30:32.951 +02:00 [INF] Route matched with {action = "DeleteRole", controller = "Roles"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteRole(Int32) on controller BookInventory.APIAccessLayer.Controllers.RolesController (BookInventory).
2024-08-29 10:30:33.030 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Name]
FROM [Roles] AS [r]
WHERE [r].[Id] = @__p_0
2024-08-29 10:30:33.040 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Roles]
OUTPUT 1
WHERE [Id] = @p0;
2024-08-29 10:30:33.044 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-08-29 10:30:33.046 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.RolesController.DeleteRole (BookInventory) in 93.7239ms
2024-08-29 10:30:33.048 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.DeleteRole (BookInventory)'
2024-08-29 10:30:33.049 +02:00 [INF] Request finished HTTP/2 DELETE https://localhost:7126/api/Roles/3 - 200 null text/plain; charset=utf-8 115.4608ms
2024-08-29 10:30:35.353 +02:00 [INF] Request starting HTTP/2 DELETE https://localhost:7126/api/Roles/4 - null null
2024-08-29 10:30:35.370 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.DeleteRole (BookInventory)'
2024-08-29 10:30:35.373 +02:00 [INF] Route matched with {action = "DeleteRole", controller = "Roles"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteRole(Int32) on controller BookInventory.APIAccessLayer.Controllers.RolesController (BookInventory).
2024-08-29 10:30:35.385 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Name]
FROM [Roles] AS [r]
WHERE [r].[Id] = @__p_0
2024-08-29 10:30:35.397 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Roles]
OUTPUT 1
WHERE [Id] = @p0;
2024-08-29 10:30:35.402 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-08-29 10:30:35.406 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.RolesController.DeleteRole (BookInventory) in 27.0294ms
2024-08-29 10:30:35.407 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.DeleteRole (BookInventory)'
2024-08-29 10:30:35.411 +02:00 [INF] Request finished HTTP/2 DELETE https://localhost:7126/api/Roles/4 - 200 null text/plain; charset=utf-8 58.1317ms
2024-08-29 10:30:37.572 +02:00 [INF] Request starting HTTP/2 DELETE https://localhost:7126/api/Roles/5 - null null
2024-08-29 10:30:37.581 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.DeleteRole (BookInventory)'
2024-08-29 10:30:37.583 +02:00 [INF] Route matched with {action = "DeleteRole", controller = "Roles"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteRole(Int32) on controller BookInventory.APIAccessLayer.Controllers.RolesController (BookInventory).
2024-08-29 10:30:37.591 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Name]
FROM [Roles] AS [r]
WHERE [r].[Id] = @__p_0
2024-08-29 10:30:37.605 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Roles]
OUTPUT 1
WHERE [Id] = @p0;
2024-08-29 10:30:37.612 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-08-29 10:30:37.616 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.RolesController.DeleteRole (BookInventory) in 28.6584ms
2024-08-29 10:30:37.617 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.DeleteRole (BookInventory)'
2024-08-29 10:30:37.619 +02:00 [INF] Request finished HTTP/2 DELETE https://localhost:7126/api/Roles/5 - 200 null text/plain; charset=utf-8 47.4342ms
2024-08-29 10:30:41.114 +02:00 [INF] Request starting HTTP/2 DELETE https://localhost:7126/api/Roles/6 - null null
2024-08-29 10:30:41.122 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.DeleteRole (BookInventory)'
2024-08-29 10:30:41.124 +02:00 [INF] Route matched with {action = "DeleteRole", controller = "Roles"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteRole(Int32) on controller BookInventory.APIAccessLayer.Controllers.RolesController (BookInventory).
2024-08-29 10:30:41.137 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Name]
FROM [Roles] AS [r]
WHERE [r].[Id] = @__p_0
2024-08-29 10:30:41.149 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Roles]
OUTPUT 1
WHERE [Id] = @p0;
2024-08-29 10:30:41.153 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-08-29 10:30:41.155 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.RolesController.DeleteRole (BookInventory) in 26.3441ms
2024-08-29 10:30:41.157 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.DeleteRole (BookInventory)'
2024-08-29 10:30:41.159 +02:00 [INF] Request finished HTTP/2 DELETE https://localhost:7126/api/Roles/6 - 200 null text/plain; charset=utf-8 45.6745ms
2024-08-29 10:30:45.199 +02:00 [INF] Request starting HTTP/2 DELETE https://localhost:7126/api/Roles/7 - null null
2024-08-29 10:30:45.202 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.DeleteRole (BookInventory)'
2024-08-29 10:30:45.204 +02:00 [INF] Route matched with {action = "DeleteRole", controller = "Roles"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] DeleteRole(Int32) on controller BookInventory.APIAccessLayer.Controllers.RolesController (BookInventory).
2024-08-29 10:30:45.215 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [r].[Id], [r].[Name]
FROM [Roles] AS [r]
WHERE [r].[Id] = @__p_0
2024-08-29 10:30:45.223 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
DELETE FROM [Roles]
OUTPUT 1
WHERE [Id] = @p0;
2024-08-29 10:30:45.226 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-08-29 10:30:45.229 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.RolesController.DeleteRole (BookInventory) in 22.0885ms
2024-08-29 10:30:45.232 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.DeleteRole (BookInventory)'
2024-08-29 10:30:45.233 +02:00 [INF] Request finished HTTP/2 DELETE https://localhost:7126/api/Roles/7 - 200 null text/plain; charset=utf-8 33.9454ms
2024-08-29 10:32:01.944 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/api/Publishers/getAllPublishers - null null
2024-08-29 10:32:01.953 +02:00 [INF] Executing endpoint 'PublisherInventory.APIAccessLayer.Controllers.PublishersController.GetAllPublishers (BookInventory)'
2024-08-29 10:32:01.958 +02:00 [INF] Route matched with {action = "GetAllPublishers", controller = "Publishers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllPublishers() on controller PublisherInventory.APIAccessLayer.Controllers.PublishersController (BookInventory).
2024-08-29 10:32:01.963 +02:00 [INF] API call to get all publishers started.
2024-08-29 10:32:01.983 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Address], [p].[AuthorId], [p].[Name], [p].[Website], [a].[Id], [a].[DateOfBirth], [a].[EmailAddress], [a].[ImageUrl], [a].[Name], [a].[Nationality]
FROM [Publishers] AS [p]
INNER JOIN [Authors] AS [a] ON [p].[AuthorId] = [a].[Id]
2024-08-29 10:32:02.051 +02:00 [INF] Successfully retrieved all publishers.
2024-08-29 10:32:02.053 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookInventory.BusinessLogicAcessLayer.Models.PulisherModels.PublisherGetModel, BookInventory, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 10:32:02.073 +02:00 [INF] Executed action PublisherInventory.APIAccessLayer.Controllers.PublishersController.GetAllPublishers (BookInventory) in 111.3174ms
2024-08-29 10:32:02.078 +02:00 [INF] Executed endpoint 'PublisherInventory.APIAccessLayer.Controllers.PublishersController.GetAllPublishers (BookInventory)'
2024-08-29 10:32:02.081 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/api/Publishers/getAllPublishers - 200 1049 application/json; charset=utf-8 137.8633ms
2024-08-29 10:32:07.939 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/api/Permissions/all - null null
2024-08-29 10:32:07.965 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.PermissionsController.GetPermissions (BookInventory)'
2024-08-29 10:32:07.970 +02:00 [INF] Route matched with {action = "GetPermissions", controller = "Permissions"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPermissions() on controller BookInventory.APIAccessLayer.Controllers.PermissionsController (BookInventory).
2024-08-29 10:32:08.003 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Name], [t].[RoleId], [t].[PermissionId], [t].[Id], [t].[Name]
FROM [Permissions] AS [p]
LEFT JOIN (
    SELECT [r].[RoleId], [r].[PermissionId], [r0].[Id], [r0].[Name]
    FROM [RolePermissions] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
) AS [t] ON [p].[Id] = [t].[PermissionId]
ORDER BY [p].[Id], [t].[RoleId], [t].[PermissionId]
2024-08-29 10:32:08.016 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookInventory.BusinessLogicAcessLayer.Models.PermissionModels.PermissionGetModel, BookInventory, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 10:32:08.023 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.PermissionsController.GetPermissions (BookInventory) in 47.1784ms
2024-08-29 10:32:08.025 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.PermissionsController.GetPermissions (BookInventory)'
2024-08-29 10:32:08.027 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/api/Permissions/all - 200 2468 application/json; charset=utf-8 87.9052ms
2024-08-29 10:33:14.036 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7126/api/Roles - application/json-patch+json 98
2024-08-29 10:33:14.078 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.CreateRole (BookInventory)'
2024-08-29 10:33:14.081 +02:00 [INF] Route matched with {action = "CreateRole", controller = "Roles"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateRole(BookInventory.BusinessLogicAcessLayer.Models.RoleModel.RoleCreateModel) on controller BookInventory.APIAccessLayer.Controllers.RolesController (BookInventory).
2024-08-29 10:33:14.176 +02:00 [INF] Executed DbCommand (14ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Roles] ([Name])
OUTPUT INSERTED.[Id]
VALUES (@p0);
2024-08-29 10:33:14.215 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32), @p6='?' (DbType = Int32), @p7='?' (DbType = Int32), @p8='?' (DbType = Int32), @p9='?' (DbType = Int32), @p10='?' (DbType = Int32), @p11='?' (DbType = Int32), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RolePermissions] ([PermissionId], [RoleId])
VALUES (@p1, @p2),
(@p3, @p4),
(@p5, @p6),
(@p7, @p8),
(@p9, @p10),
(@p11, @p12),
(@p13, @p14);
2024-08-29 10:33:14.233 +02:00 [INF] Executing OkObjectResult, writing value of type 'BookInventory.BusinessLogicAcessLayer.Models.RoleModel.RoleCreateModel'.
2024-08-29 10:33:14.235 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.RolesController.CreateRole (BookInventory) in 151.1107ms
2024-08-29 10:33:14.237 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.CreateRole (BookInventory)'
2024-08-29 10:33:14.238 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7126/api/Roles - 200 69 application/json; charset=utf-8 202.4483ms
2024-08-29 10:34:01.976 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7126/api/Roles - application/json-patch+json 88
2024-08-29 10:34:01.981 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.CreateRole (BookInventory)'
2024-08-29 10:34:01.982 +02:00 [INF] Route matched with {action = "CreateRole", controller = "Roles"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateRole(BookInventory.BusinessLogicAcessLayer.Models.RoleModel.RoleCreateModel) on controller BookInventory.APIAccessLayer.Controllers.RolesController (BookInventory).
2024-08-29 10:34:02.000 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [Roles] ([Name])
OUTPUT INSERTED.[Id]
VALUES (@p0);
2024-08-29 10:34:02.012 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@p1='?' (DbType = Int32), @p2='?' (DbType = Int32), @p3='?' (DbType = Int32), @p4='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RolePermissions] ([PermissionId], [RoleId])
VALUES (@p1, @p2),
(@p3, @p4);
2024-08-29 10:34:02.016 +02:00 [INF] Executing OkObjectResult, writing value of type 'BookInventory.BusinessLogicAcessLayer.Models.RoleModel.RoleCreateModel'.
2024-08-29 10:34:02.017 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.RolesController.CreateRole (BookInventory) in 33.7523ms
2024-08-29 10:34:02.019 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.CreateRole (BookInventory)'
2024-08-29 10:34:02.021 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7126/api/Roles - 200 59 application/json; charset=utf-8 45.0648ms
2024-08-29 10:34:06.941 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/api/Roles/all - null null
2024-08-29 10:34:06.947 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.GetAll (BookInventory)'
2024-08-29 10:34:06.955 +02:00 [INF] Route matched with {action = "GetAll", controller = "Roles"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller BookInventory.APIAccessLayer.Controllers.RolesController (BookInventory).
2024-08-29 10:34:06.989 +02:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Name], [t].[RoleId], [t].[PermissionId], [t].[Id], [t].[Name]
FROM [Roles] AS [r]
LEFT JOIN (
    SELECT [r0].[RoleId], [r0].[PermissionId], [p].[Id], [p].[Name]
    FROM [RolePermissions] AS [r0]
    INNER JOIN [Permissions] AS [p] ON [r0].[PermissionId] = [p].[Id]
) AS [t] ON [r].[Id] = [t].[RoleId]
ORDER BY [r].[Id], [t].[RoleId], [t].[PermissionId]
2024-08-29 10:34:06.998 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookInventory.BusinessLogicAcessLayer.Models.RoleModel.RoleGetModel, BookInventory, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 10:34:07.004 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.RolesController.GetAll (BookInventory) in 44.6284ms
2024-08-29 10:34:07.008 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.GetAll (BookInventory)'
2024-08-29 10:34:07.009 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/api/Roles/all - 200 1624 application/json; charset=utf-8 68.8606ms
2024-08-29 10:34:18.029 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/api/Roles/5 - null null
2024-08-29 10:34:18.034 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.GetRoleById (BookInventory)'
2024-08-29 10:34:18.041 +02:00 [INF] Route matched with {action = "GetRoleById", controller = "Roles"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRoleById(Int32) on controller BookInventory.APIAccessLayer.Controllers.RolesController (BookInventory).
2024-08-29 10:34:18.066 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Name], [t0].[RoleId], [t0].[PermissionId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [r].[Id], [r].[Name]
    FROM [Roles] AS [r]
    WHERE [r].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [r0].[RoleId], [r0].[PermissionId], [p].[Id], [p].[Name]
    FROM [RolePermissions] AS [r0]
    INNER JOIN [Permissions] AS [p] ON [r0].[PermissionId] = [p].[Id]
) AS [t0] ON [t].[Id] = [t0].[RoleId]
ORDER BY [t].[Id], [t0].[RoleId], [t0].[PermissionId]
2024-08-29 10:34:18.072 +02:00 [INF] Executing NotFoundObjectResult, writing value of type 'System.String'.
2024-08-29 10:34:18.074 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.RolesController.GetRoleById (BookInventory) in 28.8516ms
2024-08-29 10:34:18.076 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.GetRoleById (BookInventory)'
2024-08-29 10:34:18.077 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/api/Roles/5 - 404 null text/plain; charset=utf-8 47.7811ms
2024-08-29 10:34:20.793 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/api/Roles/all - null null
2024-08-29 10:34:20.805 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.GetAll (BookInventory)'
2024-08-29 10:34:20.812 +02:00 [INF] Route matched with {action = "GetAll", controller = "Roles"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller BookInventory.APIAccessLayer.Controllers.RolesController (BookInventory).
2024-08-29 10:34:20.842 +02:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Name], [t].[RoleId], [t].[PermissionId], [t].[Id], [t].[Name]
FROM [Roles] AS [r]
LEFT JOIN (
    SELECT [r0].[RoleId], [r0].[PermissionId], [p].[Id], [p].[Name]
    FROM [RolePermissions] AS [r0]
    INNER JOIN [Permissions] AS [p] ON [r0].[PermissionId] = [p].[Id]
) AS [t] ON [r].[Id] = [t].[RoleId]
ORDER BY [r].[Id], [t].[RoleId], [t].[PermissionId]
2024-08-29 10:34:20.846 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookInventory.BusinessLogicAcessLayer.Models.RoleModel.RoleGetModel, BookInventory, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 10:34:20.848 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.RolesController.GetAll (BookInventory) in 30.3577ms
2024-08-29 10:34:20.850 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.GetAll (BookInventory)'
2024-08-29 10:34:20.851 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/api/Roles/all - 200 1624 application/json; charset=utf-8 58.1561ms
2024-08-29 10:34:29.799 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/api/Roles/9 - null null
2024-08-29 10:34:29.810 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.GetRoleById (BookInventory)'
2024-08-29 10:34:29.812 +02:00 [INF] Route matched with {action = "GetRoleById", controller = "Roles"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetRoleById(Int32) on controller BookInventory.APIAccessLayer.Controllers.RolesController (BookInventory).
2024-08-29 10:34:29.821 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Name], [t0].[RoleId], [t0].[PermissionId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [r].[Id], [r].[Name]
    FROM [Roles] AS [r]
    WHERE [r].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [r0].[RoleId], [r0].[PermissionId], [p].[Id], [p].[Name]
    FROM [RolePermissions] AS [r0]
    INNER JOIN [Permissions] AS [p] ON [r0].[PermissionId] = [p].[Id]
) AS [t0] ON [t].[Id] = [t0].[RoleId]
ORDER BY [t].[Id], [t0].[RoleId], [t0].[PermissionId]
2024-08-29 10:34:29.827 +02:00 [INF] Executing OkObjectResult, writing value of type 'BookInventory.BusinessLogicAcessLayer.Models.RoleModel.RoleGetModel'.
2024-08-29 10:34:29.828 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.RolesController.GetRoleById (BookInventory) in 14.5672ms
2024-08-29 10:34:29.829 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.GetRoleById (BookInventory)'
2024-08-29 10:34:29.830 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/api/Roles/9 - 200 135 application/json; charset=utf-8 31.6791ms
2024-08-29 10:35:37.031 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7126/api/Roles/1 - application/json-patch+json 145
2024-08-29 10:35:37.043 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.Updaterole (BookInventory)'
2024-08-29 10:35:37.047 +02:00 [INF] Route matched with {action = "Updaterole", controller = "Roles"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Updaterole(Int32, BookInventory.BusinessLogicAcessLayer.Models.RoleModel.RoleUpdateModel) on controller BookInventory.APIAccessLayer.Controllers.RolesController (BookInventory).
2024-08-29 10:35:37.072 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Name], [r0].[RoleId], [r0].[PermissionId]
FROM (
    SELECT TOP(1) [r].[Id], [r].[Name]
    FROM [Roles] AS [r]
    WHERE [r].[Id] = @__id_0
) AS [t]
LEFT JOIN [RolePermissions] AS [r0] ON [t].[Id] = [r0].[RoleId]
ORDER BY [t].[Id], [r0].[RoleId]
2024-08-29 10:35:37.091 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Roles] SET [Name] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2024-08-29 10:35:37.095 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.String'.
2024-08-29 10:35:37.096 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.RolesController.Updaterole (BookInventory) in 42.8735ms
2024-08-29 10:35:37.098 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.Updaterole (BookInventory)'
2024-08-29 10:35:37.099 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7126/api/Roles/1 - 200 null text/plain; charset=utf-8 68.381ms
2024-08-29 10:35:55.341 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/api/Roles/all - null null
2024-08-29 10:35:55.362 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.GetAll (BookInventory)'
2024-08-29 10:35:55.364 +02:00 [INF] Route matched with {action = "GetAll", controller = "Roles"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll() on controller BookInventory.APIAccessLayer.Controllers.RolesController (BookInventory).
2024-08-29 10:35:55.393 +02:00 [INF] Executed DbCommand (27ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[Id], [r].[Name], [t].[RoleId], [t].[PermissionId], [t].[Id], [t].[Name]
FROM [Roles] AS [r]
LEFT JOIN (
    SELECT [r0].[RoleId], [r0].[PermissionId], [p].[Id], [p].[Name]
    FROM [RolePermissions] AS [r0]
    INNER JOIN [Permissions] AS [p] ON [r0].[PermissionId] = [p].[Id]
) AS [t] ON [r].[Id] = [t].[RoleId]
ORDER BY [r].[Id], [t].[RoleId], [t].[PermissionId]
2024-08-29 10:35:55.398 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookInventory.BusinessLogicAcessLayer.Models.RoleModel.RoleGetModel, BookInventory, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 10:35:55.400 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.RolesController.GetAll (BookInventory) in 34.5932ms
2024-08-29 10:35:55.402 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.GetAll (BookInventory)'
2024-08-29 10:35:55.404 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/api/Roles/all - 200 1619 application/json; charset=utf-8 80.5383ms
2024-08-29 10:36:37.222 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/api/Auths/users - null null
2024-08-29 10:36:37.229 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.GetUsers (BookInventory)'
2024-08-29 10:36:37.235 +02:00 [INF] Route matched with {action = "GetUsers", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsers() on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 10:36:37.282 +02:00 [INF] Executed DbCommand (32ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username], [t].[UserId], [t].[RoleId], [t].[Id], [t].[Name]
FROM [Users] AS [u]
LEFT JOIN (
    SELECT [r].[UserId], [r].[RoleId], [r0].[Id], [r0].[Name]
    FROM [RoleUsers] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
) AS [t] ON [u].[Id] = [t].[UserId]
ORDER BY [u].[Id], [t].[UserId], [t].[RoleId]
2024-08-29 10:36:37.294 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookInventory.BusinessLogicAcessLayer.Models.AccountModels.UserGetModel, BookInventory, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 10:36:37.297 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.GetUsers (BookInventory) in 59.8092ms
2024-08-29 10:36:37.300 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.GetUsers (BookInventory)'
2024-08-29 10:36:37.301 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/api/Auths/users - 200 534 application/json; charset=utf-8 79.4608ms
2024-08-29 10:36:52.624 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7126/api/Auths/2 - application/json-patch+json 57
2024-08-29 10:36:52.645 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.UpdateUser (BookInventory)'
2024-08-29 10:36:52.658 +02:00 [INF] Route matched with {action = "UpdateUser", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateUser(BookInventory.BusinessLogicAcessLayer.Models.AccountModels.UserUpdateModel, Int32) on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 10:36:52.696 +02:00 [INF] Executed DbCommand (18ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[PasswordHash], [t].[PasswordResetToken], [t].[PasswordSalt], [t].[ResetTokenExpires], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [r].[UserId], [r].[RoleId], [r0].[Id], [r0].[Name]
    FROM [RoleUsers] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2024-08-29 10:36:52.714 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[PasswordHash], [t].[PasswordResetToken], [t].[PasswordSalt], [t].[ResetTokenExpires], [t].[Username], [r].[UserId], [r].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[Id] = @__id_0
) AS [t]
LEFT JOIN [RoleUsers] AS [r] ON [t].[Id] = [r].[UserId]
ORDER BY [t].[Id], [r].[UserId]
2024-08-29 10:36:52.735 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p3='?' (DbType = Int32), @p2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RoleUsers] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [Users] SET [Username] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2024-08-29 10:36:52.743 +02:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2024-08-29 10:36:52.744 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.UpdateUser (BookInventory) in 83.9981ms
2024-08-29 10:36:52.746 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.UpdateUser (BookInventory)'
2024-08-29 10:36:52.747 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7126/api/Auths/2 - 204 null null 123.2747ms
2024-08-29 10:37:09.202 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7126/api/Auths/3 - application/json-patch+json 61
2024-08-29 10:37:09.206 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.UpdateUser (BookInventory)'
2024-08-29 10:37:09.207 +02:00 [INF] Route matched with {action = "UpdateUser", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateUser(BookInventory.BusinessLogicAcessLayer.Models.AccountModels.UserUpdateModel, Int32) on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 10:37:09.242 +02:00 [INF] Executed DbCommand (31ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[PasswordHash], [t].[PasswordResetToken], [t].[PasswordSalt], [t].[ResetTokenExpires], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [r].[UserId], [r].[RoleId], [r0].[Id], [r0].[Name]
    FROM [RoleUsers] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2024-08-29 10:37:09.254 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[PasswordHash], [t].[PasswordResetToken], [t].[PasswordSalt], [t].[ResetTokenExpires], [t].[Username], [r].[UserId], [r].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[Id] = @__id_0
) AS [t]
LEFT JOIN [RoleUsers] AS [r] ON [t].[Id] = [r].[UserId]
ORDER BY [t].[Id], [r].[UserId]
2024-08-29 10:37:09.261 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p3='?' (DbType = Int32), @p2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RoleUsers] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [Users] SET [Username] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2024-08-29 10:37:09.264 +02:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2024-08-29 10:37:09.265 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.UpdateUser (BookInventory) in 56.1021ms
2024-08-29 10:37:09.267 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.UpdateUser (BookInventory)'
2024-08-29 10:37:09.268 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7126/api/Auths/3 - 204 null null 66.2529ms
2024-08-29 10:37:22.468 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7126/api/Auths/3 - application/json-patch+json 59
2024-08-29 10:37:22.476 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.UpdateUser (BookInventory)'
2024-08-29 10:37:22.478 +02:00 [INF] Route matched with {action = "UpdateUser", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateUser(BookInventory.BusinessLogicAcessLayer.Models.AccountModels.UserUpdateModel, Int32) on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 10:37:22.501 +02:00 [INF] Executed DbCommand (15ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[PasswordHash], [t].[PasswordResetToken], [t].[PasswordSalt], [t].[ResetTokenExpires], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [r].[UserId], [r].[RoleId], [r0].[Id], [r0].[Name]
    FROM [RoleUsers] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2024-08-29 10:37:22.510 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[PasswordHash], [t].[PasswordResetToken], [t].[PasswordSalt], [t].[ResetTokenExpires], [t].[Username], [r].[UserId], [r].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[Id] = @__id_0
) AS [t]
LEFT JOIN [RoleUsers] AS [r] ON [t].[Id] = [r].[UserId]
ORDER BY [t].[Id], [r].[UserId]
2024-08-29 10:37:22.527 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p3='?' (DbType = Int32), @p2='?' (Size = 4000), @p4='?' (DbType = Int32), @p5='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
DELETE FROM [RoleUsers]
OUTPUT 1
WHERE [RoleId] = @p0 AND [UserId] = @p1;
UPDATE [Users] SET [Username] = @p2
OUTPUT 1
WHERE [Id] = @p3;
INSERT INTO [RoleUsers] ([RoleId], [UserId])
VALUES (@p4, @p5);
2024-08-29 10:37:22.591 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'BookInventory.DataAccess.Database.DatabaseContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_RoleUsers_Roles_RoleId". The conflict occurred in database "BookInventory", table "dbo.Roles", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreResults(Boolean& moreResults)
   at Microsoft.Data.SqlClient.SqlDataReader.TryNextResult(Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.NextResultAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:680a683c-ad35-4497-8ed5-f2714d709b8a
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_RoleUsers_Roles_RoleId". The conflict occurred in database "BookInventory", table "dbo.Roles", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreResults(Boolean& moreResults)
   at Microsoft.Data.SqlClient.SqlDataReader.TryNextResult(Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.NextResultAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:680a683c-ad35-4497-8ed5-f2714d709b8a
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-08-29 10:37:22.856 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.UpdateUser (BookInventory) in 373.151ms
2024-08-29 10:37:22.858 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.UpdateUser (BookInventory)'
2024-08-29 10:37:22.862 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_RoleUsers_Roles_RoleId". The conflict occurred in database "BookInventory", table "dbo.Roles", column 'Id'.
   at Microsoft.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)
   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, Boolean callerHasConnectionLock, Boolean asyncClose)
   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreRows(Boolean& moreRows)
   at Microsoft.Data.SqlClient.SqlDataReader.TryHasMoreResults(Boolean& moreResults)
   at Microsoft.Data.SqlClient.SqlDataReader.TryNextResult(Boolean& more)
   at Microsoft.Data.SqlClient.SqlDataReader.NextResultAsyncExecute(Task task, Object state)
   at Microsoft.Data.SqlClient.SqlDataReader.InvokeAsyncCall[T](SqlDataReaderBaseAsyncCallContext`1 context)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
ClientConnectionId:680a683c-ad35-4497-8ed5-f2714d709b8a
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at BookInventory.BusinessLogicAcessLayer.Services.AuthService.AuthServicee.UpdateUser(UserUpdateModel user, Int32 id) in C:\Users\lkelmendi.PC-PR05\Desktop\BookInventory\BookInventory\BusinessLogicAcessLayer\Services\AuthService\AuthServicee.cs:line 228
   at BookInventory.APIAccessLayer.Controllers.AuthsController.UpdateUser(UserUpdateModel user, Int32 id) in C:\Users\lkelmendi.PC-PR05\Desktop\BookInventory\BookInventory\APIAccessLayer\Controllers\AuthsController.cs:line 124
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-08-29 10:37:22.934 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7126/api/Auths/3 - 500 null text/plain; charset=utf-8 466.48ms
2024-08-29 10:37:30.486 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7126/api/Auths/4 - application/json-patch+json 59
2024-08-29 10:37:30.497 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.UpdateUser (BookInventory)'
2024-08-29 10:37:30.503 +02:00 [INF] Route matched with {action = "UpdateUser", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateUser(BookInventory.BusinessLogicAcessLayer.Models.AccountModels.UserUpdateModel, Int32) on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 10:37:30.513 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[PasswordHash], [t].[PasswordResetToken], [t].[PasswordSalt], [t].[ResetTokenExpires], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [r].[UserId], [r].[RoleId], [r0].[Id], [r0].[Name]
    FROM [RoleUsers] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2024-08-29 10:37:30.536 +02:00 [INF] Executed DbCommand (17ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[PasswordHash], [t].[PasswordResetToken], [t].[PasswordSalt], [t].[ResetTokenExpires], [t].[Username], [r].[UserId], [r].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[Id] = @__id_0
) AS [t]
LEFT JOIN [RoleUsers] AS [r] ON [t].[Id] = [r].[UserId]
ORDER BY [t].[Id], [r].[UserId]
2024-08-29 10:37:30.554 +02:00 [ERR] Failed executing DbCommand (8ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RoleUsers] ([RoleId], [UserId])
VALUES (@p0, @p1);
2024-08-29 10:37:30.561 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'BookInventory.DataAccess.Database.DatabaseContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_RoleUsers_Roles_RoleId". The conflict occurred in database "BookInventory", table "dbo.Roles", column 'Id'.
The statement has been terminated.
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:680a683c-ad35-4497-8ed5-f2714d709b8a
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_RoleUsers_Roles_RoleId". The conflict occurred in database "BookInventory", table "dbo.Roles", column 'Id'.
The statement has been terminated.
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:680a683c-ad35-4497-8ed5-f2714d709b8a
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-08-29 10:37:30.683 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.UpdateUser (BookInventory) in 177.0839ms
2024-08-29 10:37:30.685 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.UpdateUser (BookInventory)'
2024-08-29 10:37:30.687 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_RoleUsers_Roles_RoleId". The conflict occurred in database "BookInventory", table "dbo.Roles", column 'Id'.
The statement has been terminated.
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:680a683c-ad35-4497-8ed5-f2714d709b8a
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at BookInventory.BusinessLogicAcessLayer.Services.AuthService.AuthServicee.UpdateUser(UserUpdateModel user, Int32 id) in C:\Users\lkelmendi.PC-PR05\Desktop\BookInventory\BookInventory\BusinessLogicAcessLayer\Services\AuthService\AuthServicee.cs:line 228
   at BookInventory.APIAccessLayer.Controllers.AuthsController.UpdateUser(UserUpdateModel user, Int32 id) in C:\Users\lkelmendi.PC-PR05\Desktop\BookInventory\BookInventory\APIAccessLayer\Controllers\AuthsController.cs:line 124
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-08-29 10:37:30.716 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7126/api/Auths/4 - 500 null text/plain; charset=utf-8 230.5948ms
2024-08-29 10:37:35.342 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7126/api/Auths/4 - application/json-patch+json 59
2024-08-29 10:37:35.345 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.UpdateUser (BookInventory)'
2024-08-29 10:37:35.347 +02:00 [INF] Route matched with {action = "UpdateUser", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateUser(BookInventory.BusinessLogicAcessLayer.Models.AccountModels.UserUpdateModel, Int32) on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 10:37:35.359 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[PasswordHash], [t].[PasswordResetToken], [t].[PasswordSalt], [t].[ResetTokenExpires], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [r].[UserId], [r].[RoleId], [r0].[Id], [r0].[Name]
    FROM [RoleUsers] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2024-08-29 10:37:35.370 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[PasswordHash], [t].[PasswordResetToken], [t].[PasswordSalt], [t].[ResetTokenExpires], [t].[Username], [r].[UserId], [r].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[Id] = @__id_0
) AS [t]
LEFT JOIN [RoleUsers] AS [r] ON [t].[Id] = [r].[UserId]
ORDER BY [t].[Id], [r].[UserId]
2024-08-29 10:37:35.379 +02:00 [ERR] Failed executing DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RoleUsers] ([RoleId], [UserId])
VALUES (@p0, @p1);
2024-08-29 10:37:35.387 +02:00 [ERR] An exception occurred in the database while saving changes for context type 'BookInventory.DataAccess.Database.DatabaseContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_RoleUsers_Roles_RoleId". The conflict occurred in database "BookInventory", table "dbo.Roles", column 'Id'.
The statement has been terminated.
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:680a683c-ad35-4497-8ed5-f2714d709b8a
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_RoleUsers_Roles_RoleId". The conflict occurred in database "BookInventory", table "dbo.Roles", column 'Id'.
The statement has been terminated.
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:680a683c-ad35-4497-8ed5-f2714d709b8a
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-08-29 10:37:35.505 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.UpdateUser (BookInventory) in 154.7304ms
2024-08-29 10:37:35.508 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.UpdateUser (BookInventory)'
2024-08-29 10:37:35.509 +02:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): The INSERT statement conflicted with the FOREIGN KEY constraint "FK_RoleUsers_Roles_RoleId". The conflict occurred in database "BookInventory", table "dbo.Roles", column 'Id'.
The statement has been terminated.
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:680a683c-ad35-4497-8ed5-f2714d709b8a
Error Number:547,State:0,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at BookInventory.BusinessLogicAcessLayer.Services.AuthService.AuthServicee.UpdateUser(UserUpdateModel user, Int32 id) in C:\Users\lkelmendi.PC-PR05\Desktop\BookInventory\BookInventory\BusinessLogicAcessLayer\Services\AuthService\AuthServicee.cs:line 228
   at BookInventory.APIAccessLayer.Controllers.AuthsController.UpdateUser(UserUpdateModel user, Int32 id) in C:\Users\lkelmendi.PC-PR05\Desktop\BookInventory\BookInventory\APIAccessLayer\Controllers\AuthsController.cs:line 124
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Logged|17_1(ResourceInvoker invoker)
   at Microsoft.AspNetCore.Routing.EndpointMiddleware.<Invoke>g__AwaitRequestTask|7_0(Endpoint endpoint, Task requestTask, ILogger logger)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-08-29 10:37:35.534 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7126/api/Auths/4 - 500 null text/plain; charset=utf-8 191.5889ms
2024-08-29 10:37:44.984 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7126/api/Auths/4 - application/json-patch+json 59
2024-08-29 10:37:44.988 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.UpdateUser (BookInventory)'
2024-08-29 10:37:44.991 +02:00 [INF] Route matched with {action = "UpdateUser", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateUser(BookInventory.BusinessLogicAcessLayer.Models.AccountModels.UserUpdateModel, Int32) on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 10:37:45.007 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[PasswordHash], [t].[PasswordResetToken], [t].[PasswordSalt], [t].[ResetTokenExpires], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [r].[UserId], [r].[RoleId], [r0].[Id], [r0].[Name]
    FROM [RoleUsers] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2024-08-29 10:37:45.021 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[PasswordHash], [t].[PasswordResetToken], [t].[PasswordSalt], [t].[ResetTokenExpires], [t].[Username], [r].[UserId], [r].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[Id] = @__id_0
) AS [t]
LEFT JOIN [RoleUsers] AS [r] ON [t].[Id] = [r].[UserId]
ORDER BY [t].[Id], [r].[UserId]
2024-08-29 10:37:45.034 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RoleUsers] ([RoleId], [UserId])
VALUES (@p0, @p1);
2024-08-29 10:37:45.039 +02:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2024-08-29 10:37:45.040 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.UpdateUser (BookInventory) in 44.7398ms
2024-08-29 10:37:45.042 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.UpdateUser (BookInventory)'
2024-08-29 10:37:45.043 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7126/api/Auths/4 - 204 null null 59.5616ms
2024-08-29 10:37:59.084 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7126/api/Auths/5 - application/json-patch+json 61
2024-08-29 10:37:59.087 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.UpdateUser (BookInventory)'
2024-08-29 10:37:59.088 +02:00 [INF] Route matched with {action = "UpdateUser", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateUser(BookInventory.BusinessLogicAcessLayer.Models.AccountModels.UserUpdateModel, Int32) on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 10:37:59.104 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[PasswordHash], [t].[PasswordResetToken], [t].[PasswordSalt], [t].[ResetTokenExpires], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [r].[UserId], [r].[RoleId], [r0].[Id], [r0].[Name]
    FROM [RoleUsers] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2024-08-29 10:37:59.118 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[PasswordHash], [t].[PasswordResetToken], [t].[PasswordSalt], [t].[ResetTokenExpires], [t].[Username], [r].[UserId], [r].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[Id] = @__id_0
) AS [t]
LEFT JOIN [RoleUsers] AS [r] ON [t].[Id] = [r].[UserId]
ORDER BY [t].[Id], [r].[UserId]
2024-08-29 10:37:59.136 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32), @p3='?' (DbType = Int32), @p2='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET NOCOUNT ON;
INSERT INTO [RoleUsers] ([RoleId], [UserId])
VALUES (@p0, @p1);
UPDATE [Users] SET [Username] = @p2
OUTPUT 1
WHERE [Id] = @p3;
2024-08-29 10:37:59.141 +02:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2024-08-29 10:37:59.141 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.UpdateUser (BookInventory) in 50.8243ms
2024-08-29 10:37:59.143 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.UpdateUser (BookInventory)'
2024-08-29 10:37:59.144 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7126/api/Auths/5 - 204 null null 59.6746ms
2024-08-29 10:38:12.978 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7126/api/Auths/6 - application/json-patch+json 60
2024-08-29 10:38:12.983 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.UpdateUser (BookInventory)'
2024-08-29 10:38:12.985 +02:00 [INF] Route matched with {action = "UpdateUser", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateUser(BookInventory.BusinessLogicAcessLayer.Models.AccountModels.UserUpdateModel, Int32) on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 10:38:13.000 +02:00 [INF] Executed DbCommand (9ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[PasswordHash], [t].[PasswordResetToken], [t].[PasswordSalt], [t].[ResetTokenExpires], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [r].[UserId], [r].[RoleId], [r0].[Id], [r0].[Name]
    FROM [RoleUsers] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2024-08-29 10:38:13.009 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[PasswordHash], [t].[PasswordResetToken], [t].[PasswordSalt], [t].[ResetTokenExpires], [t].[Username], [r].[UserId], [r].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[Id] = @__id_0
) AS [t]
LEFT JOIN [RoleUsers] AS [r] ON [t].[Id] = [r].[UserId]
ORDER BY [t].[Id], [r].[UserId]
2024-08-29 10:38:13.022 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RoleUsers] ([RoleId], [UserId])
VALUES (@p0, @p1);
2024-08-29 10:38:13.026 +02:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2024-08-29 10:38:13.028 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.UpdateUser (BookInventory) in 38.7309ms
2024-08-29 10:38:13.033 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.UpdateUser (BookInventory)'
2024-08-29 10:38:13.036 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7126/api/Auths/6 - 204 null null 57.1826ms
2024-08-29 10:38:32.455 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7126/api/Auths/7 - application/json-patch+json 66
2024-08-29 10:38:32.458 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.UpdateUser (BookInventory)'
2024-08-29 10:38:32.460 +02:00 [INF] Route matched with {action = "UpdateUser", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateUser(BookInventory.BusinessLogicAcessLayer.Models.AccountModels.UserUpdateModel, Int32) on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 10:38:32.473 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[PasswordHash], [t].[PasswordResetToken], [t].[PasswordSalt], [t].[ResetTokenExpires], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [r].[UserId], [r].[RoleId], [r0].[Id], [r0].[Name]
    FROM [RoleUsers] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2024-08-29 10:38:32.488 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[PasswordHash], [t].[PasswordResetToken], [t].[PasswordSalt], [t].[ResetTokenExpires], [t].[Username], [r].[UserId], [r].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[Id] = @__id_0
) AS [t]
LEFT JOIN [RoleUsers] AS [r] ON [t].[Id] = [r].[UserId]
ORDER BY [t].[Id], [r].[UserId]
2024-08-29 10:38:32.501 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RoleUsers] ([RoleId], [UserId])
VALUES (@p0, @p1);
2024-08-29 10:38:32.505 +02:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2024-08-29 10:38:32.507 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.UpdateUser (BookInventory) in 44.9025ms
2024-08-29 10:38:32.509 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.UpdateUser (BookInventory)'
2024-08-29 10:38:32.510 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7126/api/Auths/7 - 204 null null 55.2059ms
2024-08-29 10:39:18.990 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7126/api/Auths/8 - application/json-patch+json 59
2024-08-29 10:39:18.998 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.UpdateUser (BookInventory)'
2024-08-29 10:39:19.001 +02:00 [INF] Route matched with {action = "UpdateUser", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateUser(BookInventory.BusinessLogicAcessLayer.Models.AccountModels.UserUpdateModel, Int32) on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 10:39:19.011 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[PasswordHash], [t].[PasswordResetToken], [t].[PasswordSalt], [t].[ResetTokenExpires], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [r].[UserId], [r].[RoleId], [r0].[Id], [r0].[Name]
    FROM [RoleUsers] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2024-08-29 10:39:19.019 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[PasswordHash], [t].[PasswordResetToken], [t].[PasswordSalt], [t].[ResetTokenExpires], [t].[Username], [r].[UserId], [r].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[Id] = @__id_0
) AS [t]
LEFT JOIN [RoleUsers] AS [r] ON [t].[Id] = [r].[UserId]
ORDER BY [t].[Id], [r].[UserId]
2024-08-29 10:39:19.026 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RoleUsers] ([RoleId], [UserId])
VALUES (@p0, @p1);
2024-08-29 10:39:19.029 +02:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2024-08-29 10:39:19.030 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.UpdateUser (BookInventory) in 25.7226ms
2024-08-29 10:39:19.031 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.UpdateUser (BookInventory)'
2024-08-29 10:39:19.032 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7126/api/Auths/8 - 204 null null 41.6064ms
2024-08-29 10:39:28.325 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7126/api/Auths/8 - application/json-patch+json 60
2024-08-29 10:39:28.339 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.UpdateUser (BookInventory)'
2024-08-29 10:39:28.342 +02:00 [INF] Route matched with {action = "UpdateUser", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateUser(BookInventory.BusinessLogicAcessLayer.Models.AccountModels.UserUpdateModel, Int32) on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 10:39:28.358 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[PasswordHash], [t].[PasswordResetToken], [t].[PasswordSalt], [t].[ResetTokenExpires], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [r].[UserId], [r].[RoleId], [r0].[Id], [r0].[Name]
    FROM [RoleUsers] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2024-08-29 10:39:28.382 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[PasswordHash], [t].[PasswordResetToken], [t].[PasswordSalt], [t].[ResetTokenExpires], [t].[Username], [r].[UserId], [r].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[Id] = @__id_0
) AS [t]
LEFT JOIN [RoleUsers] AS [r] ON [t].[Id] = [r].[UserId]
ORDER BY [t].[Id], [r].[UserId]
2024-08-29 10:39:28.399 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [Username] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2024-08-29 10:39:28.404 +02:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2024-08-29 10:39:28.405 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.UpdateUser (BookInventory) in 54.1033ms
2024-08-29 10:39:28.407 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.UpdateUser (BookInventory)'
2024-08-29 10:39:28.409 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7126/api/Auths/8 - 204 null null 84.2732ms
2024-08-29 10:39:33.560 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7126/api/Auths/9 - application/json-patch+json 60
2024-08-29 10:39:33.566 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.UpdateUser (BookInventory)'
2024-08-29 10:39:33.568 +02:00 [INF] Route matched with {action = "UpdateUser", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateUser(BookInventory.BusinessLogicAcessLayer.Models.AccountModels.UserUpdateModel, Int32) on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 10:39:33.586 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[PasswordHash], [t].[PasswordResetToken], [t].[PasswordSalt], [t].[ResetTokenExpires], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [r].[UserId], [r].[RoleId], [r0].[Id], [r0].[Name]
    FROM [RoleUsers] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2024-08-29 10:39:33.593 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[PasswordHash], [t].[PasswordResetToken], [t].[PasswordSalt], [t].[ResetTokenExpires], [t].[Username], [r].[UserId], [r].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[Id] = @__id_0
) AS [t]
LEFT JOIN [RoleUsers] AS [r] ON [t].[Id] = [r].[UserId]
ORDER BY [t].[Id], [r].[UserId]
2024-08-29 10:39:33.606 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RoleUsers] ([RoleId], [UserId])
VALUES (@p0, @p1);
2024-08-29 10:39:33.610 +02:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2024-08-29 10:39:33.624 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.UpdateUser (BookInventory) in 52.5327ms
2024-08-29 10:39:33.628 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.UpdateUser (BookInventory)'
2024-08-29 10:39:33.631 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7126/api/Auths/9 - 204 null null 71.3594ms
2024-08-29 10:39:42.192 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7126/api/Auths/8 - application/json-patch+json 59
2024-08-29 10:39:42.202 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.UpdateUser (BookInventory)'
2024-08-29 10:39:42.203 +02:00 [INF] Route matched with {action = "UpdateUser", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateUser(BookInventory.BusinessLogicAcessLayer.Models.AccountModels.UserUpdateModel, Int32) on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 10:39:42.219 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[PasswordHash], [t].[PasswordResetToken], [t].[PasswordSalt], [t].[ResetTokenExpires], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [r].[UserId], [r].[RoleId], [r0].[Id], [r0].[Name]
    FROM [RoleUsers] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2024-08-29 10:39:42.226 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[PasswordHash], [t].[PasswordResetToken], [t].[PasswordSalt], [t].[ResetTokenExpires], [t].[Username], [r].[UserId], [r].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[Id] = @__id_0
) AS [t]
LEFT JOIN [RoleUsers] AS [r] ON [t].[Id] = [r].[UserId]
ORDER BY [t].[Id], [r].[UserId]
2024-08-29 10:39:42.243 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@p1='?' (DbType = Int32), @p0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
UPDATE [Users] SET [Username] = @p0
OUTPUT 1
WHERE [Id] = @p1;
2024-08-29 10:39:42.248 +02:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2024-08-29 10:39:42.248 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.UpdateUser (BookInventory) in 42.5844ms
2024-08-29 10:39:42.251 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.UpdateUser (BookInventory)'
2024-08-29 10:39:42.253 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7126/api/Auths/8 - 204 null null 60.9837ms
2024-08-29 10:39:56.055 +02:00 [INF] Request starting HTTP/2 PUT https://localhost:7126/api/Auths/10 - application/json-patch+json 64
2024-08-29 10:39:56.061 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.UpdateUser (BookInventory)'
2024-08-29 10:39:56.090 +02:00 [INF] Route matched with {action = "UpdateUser", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateUser(BookInventory.BusinessLogicAcessLayer.Models.AccountModels.UserUpdateModel, Int32) on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 10:39:56.105 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[PasswordHash], [t].[PasswordResetToken], [t].[PasswordSalt], [t].[ResetTokenExpires], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[Id] = @__id_0
) AS [t]
LEFT JOIN (
    SELECT [r].[UserId], [r].[RoleId], [r0].[Id], [r0].[Name]
    FROM [RoleUsers] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2024-08-29 10:39:56.117 +02:00 [INF] Executed DbCommand (3ms) [Parameters=[@__id_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[PasswordHash], [t].[PasswordResetToken], [t].[PasswordSalt], [t].[ResetTokenExpires], [t].[Username], [r].[UserId], [r].[RoleId]
FROM (
    SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username]
    FROM [Users] AS [u]
    WHERE [u].[Id] = @__id_0
) AS [t]
LEFT JOIN [RoleUsers] AS [r] ON [t].[Id] = [r].[UserId]
ORDER BY [t].[Id], [r].[UserId]
2024-08-29 10:39:56.125 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@p0='?' (DbType = Int32), @p1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [RoleUsers] ([RoleId], [UserId])
VALUES (@p0, @p1);
2024-08-29 10:39:56.130 +02:00 [INF] Executing StatusCodeResult, setting HTTP status code 204
2024-08-29 10:39:56.131 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.UpdateUser (BookInventory) in 35.2476ms
2024-08-29 10:39:56.134 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.UpdateUser (BookInventory)'
2024-08-29 10:39:56.135 +02:00 [INF] Request finished HTTP/2 PUT https://localhost:7126/api/Auths/10 - 204 null null 80.0011ms
2024-08-29 10:40:01.638 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/api/Auths/users - null null
2024-08-29 10:40:01.649 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.GetUsers (BookInventory)'
2024-08-29 10:40:01.670 +02:00 [INF] Route matched with {action = "GetUsers", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsers() on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 10:40:01.685 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username], [t].[UserId], [t].[RoleId], [t].[Id], [t].[Name]
FROM [Users] AS [u]
LEFT JOIN (
    SELECT [r].[UserId], [r].[RoleId], [r0].[Id], [r0].[Name]
    FROM [RoleUsers] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
) AS [t] ON [u].[Id] = [t].[UserId]
ORDER BY [u].[Id], [t].[UserId], [t].[RoleId]
2024-08-29 10:40:01.689 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookInventory.BusinessLogicAcessLayer.Models.AccountModels.UserGetModel, BookInventory, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 10:40:01.691 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.GetUsers (BookInventory) in 16.3207ms
2024-08-29 10:40:01.692 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.GetUsers (BookInventory)'
2024-08-29 10:40:01.697 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/api/Auths/users - 200 1028 application/json; charset=utf-8 59.1983ms
2024-08-29 10:45:47.564 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/api/Auths/users - null null
2024-08-29 10:45:47.593 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.GetUsers (BookInventory)'
2024-08-29 10:45:47.595 +02:00 [INF] Route matched with {action = "GetUsers", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsers() on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 10:45:47.609 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username], [t].[UserId], [t].[RoleId], [t].[Id], [t].[Name]
FROM [Users] AS [u]
LEFT JOIN (
    SELECT [r].[UserId], [r].[RoleId], [r0].[Id], [r0].[Name]
    FROM [RoleUsers] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
) AS [t] ON [u].[Id] = [t].[UserId]
ORDER BY [u].[Id], [t].[UserId], [t].[RoleId]
2024-08-29 10:45:47.614 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookInventory.BusinessLogicAcessLayer.Models.AccountModels.UserGetModel, BookInventory, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 10:45:47.616 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.GetUsers (BookInventory) in 18.6868ms
2024-08-29 10:45:47.618 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.GetUsers (BookInventory)'
2024-08-29 10:45:47.620 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/api/Auths/users - 200 1028 application/json; charset=utf-8 55.8514ms
2024-08-29 10:46:08.556 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/api/Permissions/all - null null
2024-08-29 10:46:08.558 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.PermissionsController.GetPermissions (BookInventory)'
2024-08-29 10:46:08.578 +02:00 [INF] Route matched with {action = "GetPermissions", controller = "Permissions"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPermissions() on controller BookInventory.APIAccessLayer.Controllers.PermissionsController (BookInventory).
2024-08-29 10:46:08.593 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [p].[Id], [p].[Name], [t].[RoleId], [t].[PermissionId], [t].[Id], [t].[Name]
FROM [Permissions] AS [p]
LEFT JOIN (
    SELECT [r].[RoleId], [r].[PermissionId], [r0].[Id], [r0].[Name]
    FROM [RolePermissions] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
) AS [t] ON [p].[Id] = [t].[PermissionId]
ORDER BY [p].[Id], [t].[RoleId], [t].[PermissionId]
2024-08-29 10:46:08.598 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookInventory.BusinessLogicAcessLayer.Models.PermissionModels.PermissionGetModel, BookInventory, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 10:46:08.600 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.PermissionsController.GetPermissions (BookInventory) in 16.6364ms
2024-08-29 10:46:08.603 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.PermissionsController.GetPermissions (BookInventory)'
2024-08-29 10:46:08.605 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/api/Permissions/all - 200 2857 application/json; charset=utf-8 48.7794ms
2024-08-29 10:47:18.703 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7126/api/Auths/login - application/json-patch+json 61
2024-08-29 10:47:18.713 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory)'
2024-08-29 10:47:18.713 +02:00 [INF] Route matched with {action = "Login", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BookInventory.DataAccessLayer.Entities.ServiceResponse`1[System.Int32]]] Login(BookInventory.BusinessLogicAcessLayer.Models.AccountModels.UserLoginModel) on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 10:47:18.729 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[@__ToLower_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[PasswordHash], [t].[PasswordResetToken], [t].[PasswordSalt], [t].[ResetTokenExpires], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username]
    FROM [Users] AS [u]
    WHERE LOWER([u].[Username]) = @__ToLower_0
) AS [t]
LEFT JOIN (
    SELECT [r].[UserId], [r].[RoleId], [r0].[Id], [r0].[Name]
    FROM [RoleUsers] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2024-08-29 10:47:18.748 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__roleIds_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoleId], [r].[PermissionId], [p].[Id], [p].[Name]
FROM [RolePermissions] AS [r]
INNER JOIN [Permissions] AS [p] ON [r].[PermissionId] = [p].[Id]
WHERE [r].[RoleId] IN (
    SELECT [r0].[value]
    FROM OPENJSON(@__roleIds_0) WITH ([value] int '$') AS [r0]
)
2024-08-29 10:47:18.758 +02:00 [INF] Executing OkObjectResult, writing value of type 'BookInventory.DataAccessLayer.Entities.ServiceResponse`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-29 10:47:18.760 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory) in 42.517ms
2024-08-29 10:47:18.763 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory)'
2024-08-29 10:47:18.765 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7126/api/Auths/login - 200 798 application/json; charset=utf-8 61.7782ms
2024-08-29 10:47:44.192 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/api/Auths/users - null null
2024-08-29 10:47:44.196 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.GetUsers (BookInventory)'
2024-08-29 10:47:44.197 +02:00 [INF] Route matched with {action = "GetUsers", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsers() on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 10:47:44.227 +02:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username], [t].[UserId], [t].[RoleId], [t].[Id], [t].[Name]
FROM [Users] AS [u]
LEFT JOIN (
    SELECT [r].[UserId], [r].[RoleId], [r0].[Id], [r0].[Name]
    FROM [RoleUsers] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
) AS [t] ON [u].[Id] = [t].[UserId]
ORDER BY [u].[Id], [t].[UserId], [t].[RoleId]
2024-08-29 10:47:44.230 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookInventory.BusinessLogicAcessLayer.Models.AccountModels.UserGetModel, BookInventory, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 10:47:44.233 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.GetUsers (BookInventory) in 34.3261ms
2024-08-29 10:47:44.235 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.GetUsers (BookInventory)'
2024-08-29 10:47:44.237 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/api/Auths/users - 200 1028 application/json; charset=utf-8 45.1957ms
2024-08-29 10:49:08.102 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7126/api/Auths/login - application/json-patch+json 64
2024-08-29 10:49:08.106 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory)'
2024-08-29 10:49:08.107 +02:00 [INF] Route matched with {action = "Login", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BookInventory.DataAccessLayer.Entities.ServiceResponse`1[System.Int32]]] Login(BookInventory.BusinessLogicAcessLayer.Models.AccountModels.UserLoginModel) on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 10:49:08.135 +02:00 [INF] Executed DbCommand (24ms) [Parameters=[@__ToLower_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[PasswordHash], [t].[PasswordResetToken], [t].[PasswordSalt], [t].[ResetTokenExpires], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username]
    FROM [Users] AS [u]
    WHERE LOWER([u].[Username]) = @__ToLower_0
) AS [t]
LEFT JOIN (
    SELECT [r].[UserId], [r].[RoleId], [r0].[Id], [r0].[Name]
    FROM [RoleUsers] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2024-08-29 10:49:08.141 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'BookInventory.DataAccessLayer.Entities.ServiceResponse`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-29 10:49:08.144 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory) in 34.2543ms
2024-08-29 10:49:08.148 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory)'
2024-08-29 10:49:08.150 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7126/api/Auths/login - 400 57 application/json; charset=utf-8 47.8523ms
2024-08-29 10:49:11.520 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7126/api/Auths/login - application/json-patch+json 67
2024-08-29 10:49:11.524 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory)'
2024-08-29 10:49:11.530 +02:00 [INF] Route matched with {action = "Login", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BookInventory.DataAccessLayer.Entities.ServiceResponse`1[System.Int32]]] Login(BookInventory.BusinessLogicAcessLayer.Models.AccountModels.UserLoginModel) on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 10:49:11.542 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[@__ToLower_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[PasswordHash], [t].[PasswordResetToken], [t].[PasswordSalt], [t].[ResetTokenExpires], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username]
    FROM [Users] AS [u]
    WHERE LOWER([u].[Username]) = @__ToLower_0
) AS [t]
LEFT JOIN (
    SELECT [r].[UserId], [r].[RoleId], [r0].[Id], [r0].[Name]
    FROM [RoleUsers] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2024-08-29 10:49:11.560 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__roleIds_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoleId], [r].[PermissionId], [p].[Id], [p].[Name]
FROM [RolePermissions] AS [r]
INNER JOIN [Permissions] AS [p] ON [r].[PermissionId] = [p].[Id]
WHERE [r].[RoleId] IN (
    SELECT [r0].[value]
    FROM OPENJSON(@__roleIds_0) WITH ([value] int '$') AS [r0]
)
2024-08-29 10:49:11.568 +02:00 [INF] Executing OkObjectResult, writing value of type 'BookInventory.DataAccessLayer.Entities.ServiceResponse`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-29 10:49:11.569 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory) in 34.117ms
2024-08-29 10:49:11.571 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory)'
2024-08-29 10:49:11.572 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7126/api/Auths/login - 200 373 application/json; charset=utf-8 52.2207ms
2024-08-29 10:50:56.706 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7126/api/Auths/login - application/json-patch+json 60
2024-08-29 10:50:56.715 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory)'
2024-08-29 10:50:56.718 +02:00 [INF] Route matched with {action = "Login", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BookInventory.DataAccessLayer.Entities.ServiceResponse`1[System.Int32]]] Login(BookInventory.BusinessLogicAcessLayer.Models.AccountModels.UserLoginModel) on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 10:50:56.733 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[@__ToLower_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[PasswordHash], [t].[PasswordResetToken], [t].[PasswordSalt], [t].[ResetTokenExpires], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username]
    FROM [Users] AS [u]
    WHERE LOWER([u].[Username]) = @__ToLower_0
) AS [t]
LEFT JOIN (
    SELECT [r].[UserId], [r].[RoleId], [r0].[Id], [r0].[Name]
    FROM [RoleUsers] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2024-08-29 10:50:56.737 +02:00 [INF] Executing BadRequestObjectResult, writing value of type 'BookInventory.DataAccessLayer.Entities.ServiceResponse`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-29 10:50:56.739 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory) in 18.9496ms
2024-08-29 10:50:56.741 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory)'
2024-08-29 10:50:56.742 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7126/api/Auths/login - 400 57 application/json; charset=utf-8 36.4613ms
2024-08-29 10:51:01.355 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/api/Auths/users - null null
2024-08-29 10:51:01.361 +02:00 [INF] Authorization failed. These requirements were not met:
ClaimsAuthorizationRequirement:Claim.Type=permissions and Claim.Value is one of the following values: (User_Read)
2024-08-29 10:51:01.367 +02:00 [INF] AuthenticationScheme: Bearer was forbidden.
2024-08-29 10:51:01.370 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/api/Auths/users - 403 0 null 16.2344ms
2024-08-29 10:51:22.137 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7126/api/Auths/login - application/json-patch+json 61
2024-08-29 10:51:22.166 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory)'
2024-08-29 10:51:22.169 +02:00 [INF] Route matched with {action = "Login", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BookInventory.DataAccessLayer.Entities.ServiceResponse`1[System.Int32]]] Login(BookInventory.BusinessLogicAcessLayer.Models.AccountModels.UserLoginModel) on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 10:51:22.177 +02:00 [INF] Executed DbCommand (2ms) [Parameters=[@__ToLower_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[PasswordHash], [t].[PasswordResetToken], [t].[PasswordSalt], [t].[ResetTokenExpires], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username]
    FROM [Users] AS [u]
    WHERE LOWER([u].[Username]) = @__ToLower_0
) AS [t]
LEFT JOIN (
    SELECT [r].[UserId], [r].[RoleId], [r0].[Id], [r0].[Name]
    FROM [RoleUsers] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2024-08-29 10:51:22.202 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__roleIds_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoleId], [r].[PermissionId], [p].[Id], [p].[Name]
FROM [RolePermissions] AS [r]
INNER JOIN [Permissions] AS [p] ON [r].[PermissionId] = [p].[Id]
WHERE [r].[RoleId] IN (
    SELECT [r0].[value]
    FROM OPENJSON(@__roleIds_0) WITH ([value] int '$') AS [r0]
)
2024-08-29 10:51:22.207 +02:00 [INF] Executing OkObjectResult, writing value of type 'BookInventory.DataAccessLayer.Entities.ServiceResponse`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-29 10:51:22.209 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory) in 35.8337ms
2024-08-29 10:51:22.211 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory)'
2024-08-29 10:51:22.213 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7126/api/Auths/login - 200 798 application/json; charset=utf-8 75.993ms
2024-08-29 10:51:43.208 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/api/Authors/getAllAuthors - null null
2024-08-29 10:51:43.222 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthorsController.GetAllAuthors (BookInventory)'
2024-08-29 10:51:43.227 +02:00 [INF] Route matched with {action = "GetAllAuthors", controller = "Authors"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllAuthors() on controller BookInventory.APIAccessLayer.Controllers.AuthorsController (BookInventory).
2024-08-29 10:51:43.235 +02:00 [INF] Displaying all authors!
2024-08-29 10:51:43.238 +02:00 [INF] Fetching all authors!
2024-08-29 10:51:43.259 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [a].[Id], [a].[DateOfBirth], [a].[EmailAddress], [a].[ImageUrl], [a].[Name], [a].[Nationality], [p].[Id], [p].[Address], [p].[AuthorId], [p].[Name], [p].[Website]
FROM [Authors] AS [a]
LEFT JOIN [Publishers] AS [p] ON [a].[Id] = [p].[AuthorId]
2024-08-29 10:51:43.268 +02:00 [INF] All authors displayed!
2024-08-29 10:51:43.271 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookInventory.LogicAcessLayer.Models.AuthorModels.AuthorGetModel, BookInventory, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 10:51:43.273 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthorsController.GetAllAuthors (BookInventory) in 40.9024ms
2024-08-29 10:51:43.276 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthorsController.GetAllAuthors (BookInventory)'
2024-08-29 10:51:43.278 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/api/Authors/getAllAuthors - 200 1210 application/json; charset=utf-8 69.7756ms
2024-08-29 10:51:47.263 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/api/Auths/users - null null
2024-08-29 10:51:47.268 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.GetUsers (BookInventory)'
2024-08-29 10:51:47.269 +02:00 [INF] Route matched with {action = "GetUsers", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetUsers() on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 10:51:47.286 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username], [t].[UserId], [t].[RoleId], [t].[Id], [t].[Name]
FROM [Users] AS [u]
LEFT JOIN (
    SELECT [r].[UserId], [r].[RoleId], [r0].[Id], [r0].[Name]
    FROM [RoleUsers] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
) AS [t] ON [u].[Id] = [t].[UserId]
ORDER BY [u].[Id], [t].[UserId], [t].[RoleId]
2024-08-29 10:51:47.290 +02:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[BookInventory.BusinessLogicAcessLayer.Models.AccountModels.UserGetModel, BookInventory, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 10:51:47.292 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.GetUsers (BookInventory) in 13.7116ms
2024-08-29 10:51:47.295 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.GetUsers (BookInventory)'
2024-08-29 10:51:47.298 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/api/Auths/users - 200 1028 application/json; charset=utf-8 34.7545ms
2024-08-29 10:52:29.354 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/WeatherForecast - null null
2024-08-29 10:52:29.368 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.WeatherForecastController.Get (BookInventory)'
2024-08-29 10:52:29.370 +02:00 [INF] Route matched with {action = "Get", controller = "WeatherForecast"}. Executing controller action with signature System.Collections.Generic.IEnumerable`1[BookInventory.WeatherForecast] Get() on controller BookInventory.APIAccessLayer.Controllers.WeatherForecastController (BookInventory).
2024-08-29 10:52:29.375 +02:00 [INF] Executing ObjectResult, writing value of type 'BookInventory.WeatherForecast[]'.
2024-08-29 10:52:29.382 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.WeatherForecastController.Get (BookInventory) in 9.6476ms
2024-08-29 10:52:29.390 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.WeatherForecastController.Get (BookInventory)'
2024-08-29 10:52:29.394 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/WeatherForecast - 200 385 application/json; charset=utf-8 40.1585ms
2024-08-29 14:42:25.363 +02:00 [INF] User profile is available. Using 'C:\Users\lkelmendi.PC-PR05\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-29 14:42:26.227 +02:00 [INF] Now listening on: https://localhost:7126
2024-08-29 14:42:26.229 +02:00 [INF] Now listening on: http://localhost:5019
2024-08-29 14:42:26.241 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-29 14:42:26.255 +02:00 [INF] Hosting environment: Development
2024-08-29 14:42:26.278 +02:00 [INF] Content root path: C:\Users\lkelmendi.PC-PR05\Desktop\BookInventory\BookInventory
2024-08-29 14:42:28.845 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/swagger/index.html - null null
2024-08-29 14:42:29.761 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/swagger/index.html - 200 null text/html;charset=utf-8 934.0464ms
2024-08-29 14:42:29.810 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/swagger/index.js - null null
2024-08-29 14:42:29.810 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/_framework/aspnetcore-browser-refresh.js - null null
2024-08-29 14:42:29.811 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/_vs/browserLink - null null
2024-08-29 14:42:29.829 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/swagger/index.js - 200 null application/javascript;charset=utf-8 19.0954ms
2024-08-29 14:42:29.874 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 64.329ms
2024-08-29 14:42:30.125 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/_vs/browserLink - 200 null text/javascript; charset=UTF-8 314.4464ms
2024-08-29 14:42:30.226 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/swagger/v1/swagger.json - null null
2024-08-29 14:42:30.555 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 329.3646ms
2024-08-29 14:42:46.393 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7126/api/Auths/login - application/json-patch+json 61
2024-08-29 14:42:46.554 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory)'
2024-08-29 14:42:46.608 +02:00 [INF] Route matched with {action = "Login", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BookInventory.DataAccessLayer.Entities.ServiceResponse`1[System.Int32]]] Login(BookInventory.BusinessLogicAcessLayer.Models.AccountModels.UserLoginModel) on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 14:42:50.128 +02:00 [INF] Executed DbCommand (174ms) [Parameters=[@__ToLower_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[PasswordHash], [t].[PasswordResetToken], [t].[PasswordSalt], [t].[ResetTokenExpires], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username]
    FROM [Users] AS [u]
    WHERE LOWER([u].[Username]) = @__ToLower_0
) AS [t]
LEFT JOIN (
    SELECT [r].[UserId], [r].[RoleId], [r0].[Id], [r0].[Name]
    FROM [RoleUsers] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2024-08-29 14:42:50.368 +02:00 [INF] Executed DbCommand (31ms) [Parameters=[@__roleIds_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoleId], [r].[PermissionId], [p].[Id], [p].[Name]
FROM [RolePermissions] AS [r]
INNER JOIN [Permissions] AS [p] ON [r].[PermissionId] = [p].[Id]
WHERE [r].[RoleId] IN (
    SELECT [r0].[value]
    FROM OPENJSON(@__roleIds_0) WITH ([value] int '$') AS [r0]
)
2024-08-29 14:42:50.434 +02:00 [INF] Executing OkObjectResult, writing value of type 'BookInventory.DataAccessLayer.Entities.ServiceResponse`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-29 14:42:50.469 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory) in 3855.0924ms
2024-08-29 14:42:50.471 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory)'
2024-08-29 14:42:50.482 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7126/api/Auths/login - 200 798 application/json; charset=utf-8 4089.0972ms
2024-08-29 14:45:31.021 +02:00 [INF] User profile is available. Using 'C:\Users\lkelmendi.PC-PR05\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-08-29 14:45:31.376 +02:00 [INF] Now listening on: https://localhost:7126
2024-08-29 14:45:31.378 +02:00 [INF] Now listening on: http://localhost:5019
2024-08-29 14:45:31.380 +02:00 [INF] Application started. Press Ctrl+C to shut down.
2024-08-29 14:45:31.381 +02:00 [INF] Hosting environment: Development
2024-08-29 14:45:31.382 +02:00 [INF] Content root path: C:\Users\lkelmendi.PC-PR05\Desktop\BookInventory\BookInventory
2024-08-29 14:45:31.933 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/swagger/index.html - null null
2024-08-29 14:45:32.483 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/swagger/index.html - 200 null text/html;charset=utf-8 560.4908ms
2024-08-29 14:45:32.633 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/_framework/aspnetcore-browser-refresh.js - null null
2024-08-29 14:45:32.638 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/swagger/index.js - null null
2024-08-29 14:45:32.639 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/_vs/browserLink - null null
2024-08-29 14:45:32.781 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/swagger/index.js - 200 null application/javascript;charset=utf-8 142.668ms
2024-08-29 14:45:32.786 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/_framework/aspnetcore-browser-refresh.js - 200 13762 application/javascript; charset=utf-8 152.7084ms
2024-08-29 14:45:32.888 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/_vs/browserLink - 200 null text/javascript; charset=UTF-8 248.6633ms
2024-08-29 14:45:32.952 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/swagger/v1/swagger.json - null null
2024-08-29 14:45:33.289 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 337.1314ms
2024-08-29 14:45:48.592 +02:00 [INF] Request starting HTTP/2 POST https://localhost:7126/api/Auths/login - application/json-patch+json 61
2024-08-29 14:45:48.745 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory)'
2024-08-29 14:45:48.799 +02:00 [INF] Route matched with {action = "Login", controller = "Auths"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.ActionResult`1[BookInventory.DataAccessLayer.Entities.ServiceResponse`1[System.Int32]]] Login(BookInventory.BusinessLogicAcessLayer.Models.AccountModels.UserLoginModel) on controller BookInventory.APIAccessLayer.Controllers.AuthsController (BookInventory).
2024-08-29 14:45:51.351 +02:00 [INF] Executed DbCommand (105ms) [Parameters=[@__ToLower_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[PasswordHash], [t].[PasswordResetToken], [t].[PasswordSalt], [t].[ResetTokenExpires], [t].[Username], [t0].[UserId], [t0].[RoleId], [t0].[Id], [t0].[Name]
FROM (
    SELECT TOP(1) [u].[Id], [u].[PasswordHash], [u].[PasswordResetToken], [u].[PasswordSalt], [u].[ResetTokenExpires], [u].[Username]
    FROM [Users] AS [u]
    WHERE LOWER([u].[Username]) = @__ToLower_0
) AS [t]
LEFT JOIN (
    SELECT [r].[UserId], [r].[RoleId], [r0].[Id], [r0].[Name]
    FROM [RoleUsers] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[UserId]
ORDER BY [t].[Id], [t0].[UserId], [t0].[RoleId]
2024-08-29 14:45:51.581 +02:00 [INF] Executed DbCommand (12ms) [Parameters=[@__roleIds_0='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SELECT [r].[RoleId], [r].[PermissionId], [p].[Id], [p].[Name]
FROM [RolePermissions] AS [r]
INNER JOIN [Permissions] AS [p] ON [r].[PermissionId] = [p].[Id]
WHERE [r].[RoleId] IN (
    SELECT [r0].[value]
    FROM OPENJSON(@__roleIds_0) WITH ([value] int '$') AS [r0]
)
2024-08-29 14:45:51.659 +02:00 [INF] Executing OkObjectResult, writing value of type 'BookInventory.DataAccessLayer.Entities.ServiceResponse`1[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-08-29 14:45:51.706 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory) in 2901.038ms
2024-08-29 14:45:51.713 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthsController.Login (BookInventory)'
2024-08-29 14:45:51.722 +02:00 [INF] Request finished HTTP/2 POST https://localhost:7126/api/Auths/login - 200 798 application/json; charset=utf-8 3131.019ms
2024-08-29 14:46:10.197 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/api/Authors/getAllAuthors?page=1&size=5 - null null
2024-08-29 14:46:10.274 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.AuthorsController.GetAllAuthors (BookInventory)'
2024-08-29 14:46:10.282 +02:00 [INF] Route matched with {action = "GetAllAuthors", controller = "Authors"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllAuthors(Int32, Int32) on controller BookInventory.APIAccessLayer.Controllers.AuthorsController (BookInventory).
2024-08-29 14:46:10.296 +02:00 [INF] Displaying all authors!
2024-08-29 14:46:10.298 +02:00 [INF] Fetching authors from the database with pagination.
2024-08-29 14:46:10.344 +02:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Authors] AS [a]
2024-08-29 14:46:10.354 +02:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2024-08-29 14:46:10.356 +02:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2024-08-29 14:46:10.378 +02:00 [INF] Executed DbCommand (10ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[DateOfBirth], [t].[EmailAddress], [t].[ImageUrl], [t].[Name], [t].[Nationality], [p].[Id], [p].[Address], [p].[AuthorId], [p].[Name], [p].[Website]
FROM (
    SELECT [a].[Id], [a].[DateOfBirth], [a].[EmailAddress], [a].[ImageUrl], [a].[Name], [a].[Nationality]
    FROM [Authors] AS [a]
    ORDER BY (SELECT 1)
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN [Publishers] AS [p] ON [t].[Id] = [p].[AuthorId]
2024-08-29 14:46:10.432 +02:00 [INF] Exiting GetAllAuthors method with 5 authors fetched.
2024-08-29 14:46:10.433 +02:00 [INF] All authors displayed!
2024-08-29 14:46:10.435 +02:00 [INF] Executing OkObjectResult, writing value of type 'BookInventory.BusinessLogicAcessLayer.Helpers.PaginatedResult`1[[BookInventory.LogicAcessLayer.Models.AuthorModels.AuthorGetModel, BookInventory, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 14:46:10.453 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.AuthorsController.GetAllAuthors (BookInventory) in 168.2009ms
2024-08-29 14:46:10.455 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.AuthorsController.GetAllAuthors (BookInventory)'
2024-08-29 14:46:10.456 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/api/Authors/getAllAuthors?page=1&size=5 - 200 1126 application/json; charset=utf-8 259.6858ms
2024-08-29 14:46:25.053 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/api/Books/getAllBooks?page=1&size=5 - null null
2024-08-29 14:46:25.064 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.BooksController.GetAllBooks (BookInventory)'
2024-08-29 14:46:25.070 +02:00 [INF] Route matched with {action = "GetAllBooks", controller = "Books"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllBooks(Int32, Int32) on controller BookInventory.APIAccessLayer.Controllers.BooksController (BookInventory).
2024-08-29 14:46:25.073 +02:00 [INF] API call to get all books started.
2024-08-29 14:46:25.080 +02:00 [INF] Fetching books from the database with pagination.
2024-08-29 14:46:25.166 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Books] AS [b]
2024-08-29 14:46:25.171 +02:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2024-08-29 14:46:25.172 +02:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2024-08-29 14:46:25.187 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[AuthorId], [t].[Edition], [t].[Format], [t].[Genres], [t].[Language], [t].[PageCount], [t].[Price], [t].[PublicationYear], [t].[Stock], [t].[Title], [a].[Id], [a].[DateOfBirth], [a].[EmailAddress], [a].[ImageUrl], [a].[Name], [a].[Nationality]
FROM (
    SELECT [b].[Id], [b].[AuthorId], [b].[Edition], [b].[Format], [b].[Genres], [b].[Language], [b].[PageCount], [b].[Price], [b].[PublicationYear], [b].[Stock], [b].[Title]
    FROM [Books] AS [b]
    ORDER BY (SELECT 1)
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Authors] AS [a] ON [t].[AuthorId] = [a].[Id]
2024-08-29 14:46:25.223 +02:00 [INF] Exiting GetAllBooks method with 2 books fetched.
2024-08-29 14:46:25.226 +02:00 [INF] API call to get all books completed successfully!
2024-08-29 14:46:25.227 +02:00 [INF] Executing OkObjectResult, writing value of type 'BookInventory.BusinessLogicAcessLayer.Helpers.PaginatedResult`1[[BookInventory.LogicAcessLayer.Models.BookModels.BookGetModel, BookInventory, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 14:46:25.236 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.BooksController.GetAllBooks (BookInventory) in 164.2509ms
2024-08-29 14:46:25.237 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.BooksController.GetAllBooks (BookInventory)'
2024-08-29 14:46:25.238 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/api/Books/getAllBooks?page=1&size=5 - 200 812 application/json; charset=utf-8 185.3284ms
2024-08-29 14:46:32.483 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/api/Permissions/all?page=1&size=5 - null null
2024-08-29 14:46:32.517 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.PermissionsController.GetPermissions (BookInventory)'
2024-08-29 14:46:32.522 +02:00 [INF] Route matched with {action = "GetPermissions", controller = "Permissions"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPermissions(Int32, Int32) on controller BookInventory.APIAccessLayer.Controllers.PermissionsController (BookInventory).
2024-08-29 14:46:32.536 +02:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Permissions] AS [p]
2024-08-29 14:46:32.544 +02:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2024-08-29 14:46:32.545 +02:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2024-08-29 14:46:32.579 +02:00 [INF] Executed DbCommand (20ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Name], [t0].[RoleId], [t0].[PermissionId], [t0].[Id], [t0].[Name]
FROM (
    SELECT [p].[Id], [p].[Name]
    FROM [Permissions] AS [p]
    ORDER BY (SELECT 1)
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN (
    SELECT [r].[RoleId], [r].[PermissionId], [r0].[Id], [r0].[Name]
    FROM [RolePermissions] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[PermissionId]
ORDER BY [t].[Id], [t0].[RoleId], [t0].[PermissionId]
2024-08-29 14:46:32.588 +02:00 [INF] Executing OkObjectResult, writing value of type 'BookInventory.BusinessLogicAcessLayer.Helpers.PaginatedResult`1[[BookInventory.BusinessLogicAcessLayer.Models.PermissionModels.PermissionGetModel, BookInventory, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 14:46:32.597 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.PermissionsController.GetPermissions (BookInventory) in 71.2324ms
2024-08-29 14:46:32.598 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.PermissionsController.GetPermissions (BookInventory)'
2024-08-29 14:46:32.599 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/api/Permissions/all?page=1&size=5 - 200 999 application/json; charset=utf-8 116.0216ms
2024-08-29 14:46:51.488 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/api/Permissions/all?page=4&size=5 - null null
2024-08-29 14:46:51.496 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.PermissionsController.GetPermissions (BookInventory)'
2024-08-29 14:46:51.498 +02:00 [INF] Route matched with {action = "GetPermissions", controller = "Permissions"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetPermissions(Int32, Int32) on controller BookInventory.APIAccessLayer.Controllers.PermissionsController (BookInventory).
2024-08-29 14:46:51.510 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Permissions] AS [p]
2024-08-29 14:46:51.520 +02:00 [INF] Executed DbCommand (7ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Name], [t0].[RoleId], [t0].[PermissionId], [t0].[Id], [t0].[Name]
FROM (
    SELECT [p].[Id], [p].[Name]
    FROM [Permissions] AS [p]
    ORDER BY (SELECT 1)
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN (
    SELECT [r].[RoleId], [r].[PermissionId], [r0].[Id], [r0].[Name]
    FROM [RolePermissions] AS [r]
    INNER JOIN [Roles] AS [r0] ON [r].[RoleId] = [r0].[Id]
) AS [t0] ON [t].[Id] = [t0].[PermissionId]
ORDER BY [t].[Id], [t0].[RoleId], [t0].[PermissionId]
2024-08-29 14:46:51.525 +02:00 [INF] Executing OkObjectResult, writing value of type 'BookInventory.BusinessLogicAcessLayer.Helpers.PaginatedResult`1[[BookInventory.BusinessLogicAcessLayer.Models.PermissionModels.PermissionGetModel, BookInventory, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 14:46:51.526 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.PermissionsController.GetPermissions (BookInventory) in 26.4612ms
2024-08-29 14:46:51.527 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.PermissionsController.GetPermissions (BookInventory)'
2024-08-29 14:46:51.529 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/api/Permissions/all?page=4&size=5 - 200 632 application/json; charset=utf-8 42.9486ms
2024-08-29 14:47:20.255 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/api/Publishers/getAllPublishers?page=1&size=5 - null null
2024-08-29 14:47:20.270 +02:00 [INF] Executing endpoint 'PublisherInventory.APIAccessLayer.Controllers.PublishersController.GetAllPublishers (BookInventory)'
2024-08-29 14:47:20.279 +02:00 [INF] Route matched with {action = "GetAllPublishers", controller = "Publishers"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllPublishers(Int32, Int32) on controller PublisherInventory.APIAccessLayer.Controllers.PublishersController (BookInventory).
2024-08-29 14:47:20.283 +02:00 [INF] API call to get all publishers started.
2024-08-29 14:47:20.296 +02:00 [INF] Executed DbCommand (8ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Publishers] AS [p]
2024-08-29 14:47:20.302 +02:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2024-08-29 14:47:20.304 +02:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2024-08-29 14:47:20.318 +02:00 [INF] Executed DbCommand (5ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Address], [t].[AuthorId], [t].[Name], [t].[Website], [a].[Id], [a].[DateOfBirth], [a].[EmailAddress], [a].[ImageUrl], [a].[Name], [a].[Nationality]
FROM (
    SELECT [p].[Id], [p].[Address], [p].[AuthorId], [p].[Name], [p].[Website]
    FROM [Publishers] AS [p]
    ORDER BY (SELECT 1)
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
INNER JOIN [Authors] AS [a] ON [t].[AuthorId] = [a].[Id]
2024-08-29 14:47:20.329 +02:00 [INF] Successfully retrieved all publishers.
2024-08-29 14:47:20.332 +02:00 [INF] Executing OkObjectResult, writing value of type 'BookInventory.BusinessLogicAcessLayer.Helpers.PaginatedResult`1[[BookInventory.BusinessLogicAcessLayer.Models.PulisherModels.PublisherGetModel, BookInventory, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 14:47:20.336 +02:00 [INF] Executed action PublisherInventory.APIAccessLayer.Controllers.PublishersController.GetAllPublishers (BookInventory) in 54.9072ms
2024-08-29 14:47:20.338 +02:00 [INF] Executed endpoint 'PublisherInventory.APIAccessLayer.Controllers.PublishersController.GetAllPublishers (BookInventory)'
2024-08-29 14:47:20.342 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/api/Publishers/getAllPublishers?page=1&size=5 - 200 1176 application/json; charset=utf-8 87.6002ms
2024-08-29 14:47:31.234 +02:00 [INF] Request starting HTTP/2 GET https://localhost:7126/api/Roles/all?page=1&size=5 - null null
2024-08-29 14:47:31.243 +02:00 [INF] Executing endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.GetAll (BookInventory)'
2024-08-29 14:47:31.249 +02:00 [INF] Route matched with {action = "GetAll", controller = "Roles"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAll(Int32, Int32) on controller BookInventory.APIAccessLayer.Controllers.RolesController (BookInventory).
2024-08-29 14:47:31.268 +02:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT COUNT(*)
FROM [Roles] AS [r]
2024-08-29 14:47:31.274 +02:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2024-08-29 14:47:31.276 +02:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2024-08-29 14:47:31.300 +02:00 [INF] Executed DbCommand (13ms) [Parameters=[@__p_0='?' (DbType = Int32), @__p_1='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT [t].[Id], [t].[Name], [t0].[RoleId], [t0].[PermissionId], [t0].[Id], [t0].[Name]
FROM (
    SELECT [r].[Id], [r].[Name]
    FROM [Roles] AS [r]
    ORDER BY (SELECT 1)
    OFFSET @__p_0 ROWS FETCH NEXT @__p_1 ROWS ONLY
) AS [t]
LEFT JOIN (
    SELECT [r0].[RoleId], [r0].[PermissionId], [p].[Id], [p].[Name]
    FROM [RolePermissions] AS [r0]
    INNER JOIN [Permissions] AS [p] ON [r0].[PermissionId] = [p].[Id]
) AS [t0] ON [t].[Id] = [t0].[RoleId]
ORDER BY [t].[Id], [t0].[RoleId], [t0].[PermissionId]
2024-08-29 14:47:31.311 +02:00 [INF] Executing OkObjectResult, writing value of type 'BookInventory.BusinessLogicAcessLayer.Helpers.PaginatedResult`1[[BookInventory.BusinessLogicAcessLayer.Models.RoleModel.RoleGetModel, BookInventory, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-08-29 14:47:31.315 +02:00 [INF] Executed action BookInventory.APIAccessLayer.Controllers.RolesController.GetAll (BookInventory) in 63.2608ms
2024-08-29 14:47:31.316 +02:00 [INF] Executed endpoint 'BookInventory.APIAccessLayer.Controllers.RolesController.GetAll (BookInventory)'
2024-08-29 14:47:31.317 +02:00 [INF] Request finished HTTP/2 GET https://localhost:7126/api/Roles/all?page=1&size=5 - 200 1746 application/json; charset=utf-8 83.1854ms
